<!DOCTYPE html>
<html><head><title>joekychen/django » django › contrib › gis › gdal › prototypes › ds.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>ds.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd"> This module houses the ctypes function prototypes for OGR DataSource</span>
<span class="sd"> related data structures. OGR_Dr_*, OGR_DS_*, OGR_L_*, OGR_F_*, </span>
<span class="sd"> OGR_Fld_* routines are relevant here.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">ctypes</span> <span class="kn">import</span> <span class="n">c_char_p</span><span class="p">,</span> <span class="n">c_double</span><span class="p">,</span> <span class="n">c_int</span><span class="p">,</span> <span class="n">c_long</span><span class="p">,</span> <span class="n">c_void_p</span><span class="p">,</span> <span class="n">POINTER</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.gdal.envelope</span> <span class="kn">import</span> <span class="n">OGREnvelope</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.gdal.libgdal</span> <span class="kn">import</span> <span class="n">lgdal</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.gdal.prototypes.generation</span> <span class="kn">import</span> <span class="p">(</span><span class="n">const_string_output</span><span class="p">,</span>
    <span class="n">double_output</span><span class="p">,</span> <span class="n">geom_output</span><span class="p">,</span> <span class="n">int_output</span><span class="p">,</span> <span class="n">srs_output</span><span class="p">,</span> <span class="n">void_output</span><span class="p">,</span> <span class="n">voidptr_output</span><span class="p">)</span>

<span class="n">c_int_p</span> <span class="o">=</span> <span class="n">POINTER</span><span class="p">(</span><span class="n">c_int</span><span class="p">)</span> <span class="c"># shortcut type</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><h2>Driver Routines</h2></td><td class="code"><div class="highlight"><pre><span class="n">register_all</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGRRegisterAll</span><span class="p">,</span> <span class="p">[],</span> <span class="n">errcheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">cleanup_all</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGRCleanupAll</span><span class="p">,</span> <span class="p">[],</span> <span class="n">errcheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">get_driver</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGRGetDriver</span><span class="p">,</span> <span class="p">[</span><span class="n">c_int</span><span class="p">])</span>
<span class="n">get_driver_by_name</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGRGetDriverByName</span><span class="p">,</span> <span class="p">[</span><span class="n">c_char_p</span><span class="p">])</span>
<span class="n">get_driver_count</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGRGetDriverCount</span><span class="p">,</span> <span class="p">[])</span>
<span class="n">get_driver_name</span> <span class="o">=</span> <span class="n">const_string_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_Dr_GetName</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><h2>DataSource</h2></td><td class="code"><div class="highlight"><pre><span class="n">open_ds</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGROpen</span><span class="p">,</span> <span class="p">[</span><span class="n">c_char_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">,</span> <span class="n">POINTER</span><span class="p">(</span><span class="n">c_void_p</span><span class="p">)])</span>
<span class="n">destroy_ds</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_DS_Destroy</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">],</span> <span class="n">errcheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">release_ds</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGRReleaseDataSource</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_ds_name</span> <span class="o">=</span> <span class="n">const_string_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_DS_GetName</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_layer</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_DS_GetLayer</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">])</span>
<span class="n">get_layer_by_name</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_DS_GetLayerByName</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_char_p</span><span class="p">])</span>
<span class="n">get_layer_count</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_DS_GetLayerCount</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><h2>Layer Routines</h2></td><td class="code"><div class="highlight"><pre><span class="n">get_extent</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_GetExtent</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">POINTER</span><span class="p">(</span><span class="n">OGREnvelope</span><span class="p">),</span> <span class="n">c_int</span><span class="p">])</span>
<span class="n">get_feature</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_GetFeature</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_long</span><span class="p">])</span>
<span class="n">get_feature_count</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_GetFeatureCount</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">])</span>
<span class="n">get_layer_defn</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_GetLayerDefn</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_layer_srs</span> <span class="o">=</span> <span class="n">srs_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_GetSpatialRef</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_next_feature</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_GetNextFeature</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">reset_reading</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_ResetReading</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">],</span> <span class="n">errcheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">test_capability</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_TestCapability</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_char_p</span><span class="p">])</span>
<span class="n">get_spatial_filter</span> <span class="o">=</span> <span class="n">geom_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_GetSpatialFilter</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">set_spatial_filter</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_SetSpatialFilter</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_void_p</span><span class="p">],</span> <span class="n">errcheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">set_spatial_filter_rect</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_L_SetSpatialFilterRect</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_double</span><span class="p">,</span> <span class="n">c_double</span><span class="p">,</span> <span class="n">c_double</span><span class="p">,</span> <span class="n">c_double</span><span class="p">],</span> <span class="n">errcheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><h2>Feature Definition Routines</h2></td><td class="code"><div class="highlight"><pre><span class="n">get_fd_geom_type</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_FD_GetGeomType</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_fd_name</span> <span class="o">=</span> <span class="n">const_string_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_FD_GetName</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_feat_name</span> <span class="o">=</span> <span class="n">const_string_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_FD_GetName</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_field_count</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_FD_GetFieldCount</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_field_defn</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_FD_GetFieldDefn</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">])</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><h2>Feature Routines</h2></td><td class="code"><div class="highlight"><pre><span class="n">clone_feature</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_Clone</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">destroy_feature</span> <span class="o">=</span> <span class="n">void_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_Destroy</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">],</span> <span class="n">errcheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">feature_equal</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_Equal</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_feat_geom_ref</span> <span class="o">=</span> <span class="n">geom_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetGeometryRef</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_feat_field_count</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFieldCount</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_feat_field_defn</span> <span class="o">=</span> <span class="n">voidptr_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFieldDefnRef</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">])</span>
<span class="n">get_fid</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFID</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_field_as_datetime</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFieldAsDateTime</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">,</span> <span class="n">c_int_p</span><span class="p">,</span> <span class="n">c_int_p</span><span class="p">,</span> <span class="n">c_int_p</span><span class="p">,</span> <span class="n">c_int_p</span><span class="p">,</span> <span class="n">c_int_p</span><span class="p">,</span> <span class="n">c_int_p</span><span class="p">])</span>
<span class="n">get_field_as_double</span> <span class="o">=</span> <span class="n">double_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFieldAsDouble</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">])</span>
<span class="n">get_field_as_integer</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFieldAsInteger</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">])</span>
<span class="n">get_field_as_string</span> <span class="o">=</span> <span class="n">const_string_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFieldAsString</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_int</span><span class="p">])</span>
<span class="n">get_field_index</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_F_GetFieldIndex</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">,</span> <span class="n">c_char_p</span><span class="p">])</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><h2>Field Routines</h2></td><td class="code"><div class="highlight"><pre><span class="n">get_field_name</span> <span class="o">=</span> <span class="n">const_string_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_Fld_GetNameRef</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_field_precision</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_Fld_GetPrecision</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_field_type</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_Fld_GetType</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>
<span class="n">get_field_type_name</span> <span class="o">=</span> <span class="n">const_string_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_GetFieldTypeName</span><span class="p">,</span> <span class="p">[</span><span class="n">c_int</span><span class="p">])</span>
<span class="n">get_field_width</span> <span class="o">=</span> <span class="n">int_output</span><span class="p">(</span><span class="n">lgdal</span><span class="o">.</span><span class="n">OGR_Fld_GetWidth</span><span class="p">,</span> <span class="p">[</span><span class="n">c_void_p</span><span class="p">])</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
