<!DOCTYPE html>
<html><head><title>joekychen/django » django › contrib › admin › __init__.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>__init__.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div><p>ACTION<em>CHECKBOX</em>NAME is unused, but should stay since its import from here
has been referenced in documentation.</p></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.admin.helpers</span> <span class="kn">import</span> <span class="n">ACTION_CHECKBOX_NAME</span>
<span class="kn">from</span> <span class="nn">django.contrib.admin.options</span> <span class="kn">import</span> <span class="n">ModelAdmin</span><span class="p">,</span> <span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">VERTICAL</span>
<span class="kn">from</span> <span class="nn">django.contrib.admin.options</span> <span class="kn">import</span> <span class="n">StackedInline</span><span class="p">,</span> <span class="n">TabularInline</span>
<span class="kn">from</span> <span class="nn">django.contrib.admin.sites</span> <span class="kn">import</span> <span class="n">AdminSite</span><span class="p">,</span> <span class="n">site</span>
<span class="kn">from</span> <span class="nn">django.contrib.admin.filters</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ListFilter</span><span class="p">,</span> <span class="n">SimpleListFilter</span><span class="p">,</span>
    <span class="n">FieldListFilter</span><span class="p">,</span> <span class="n">BooleanFieldListFilter</span><span class="p">,</span> <span class="n">RelatedFieldListFilter</span><span class="p">,</span>
    <span class="n">ChoicesFieldListFilter</span><span class="p">,</span> <span class="n">DateFieldListFilter</span><span class="p">,</span> <span class="n">AllValuesFieldListFilter</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">autodiscover</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Auto-discover INSTALLED_APPS admin.py modules and fail silently when</span>
<span class="sd">    not present. This forces an import on them to register any admin bits they</span>
<span class="sd">    may want.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">copy</span>
    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
    <span class="kn">from</span> <span class="nn">django.utils.importlib</span> <span class="kn">import</span> <span class="n">import_module</span>
    <span class="kn">from</span> <span class="nn">django.utils.module_loading</span> <span class="kn">import</span> <span class="n">module_has_submodule</span>

    <span class="k">for</span> <span class="n">app</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span><span class="p">:</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">app</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>Attempt to import the app's admin module.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">before_import_registry</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">_registry</span><span class="p">)</span>
            <span class="n">import_module</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">.admin&#39;</span> <span class="o">%</span> <span class="n">app</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Reset the model registry to the state before the last import as
this import will have to reoccur on the next request and this
could raise NotRegistered and AlreadyRegistered exceptions
(see #8245).</p></td><td class="code"><div class="highlight"><pre>            <span class="n">site</span><span class="o">.</span><span class="n">_registry</span> <span class="o">=</span> <span class="n">before_import_registry</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Decide whether to bubble up this error. If the app just
doesn't have an admin module, we can ignore the error
attempting to import it, otherwise we want it to bubble up.</p></td><td class="code"><div class="highlight"><pre>            <span class="k">if</span> <span class="n">module_has_submodule</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="s">&#39;admin&#39;</span><span class="p">):</span>
                <span class="k">raise</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
