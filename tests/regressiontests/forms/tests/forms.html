<!DOCTYPE html>
<html><head><title>joekychen/django » tests › regressiontests › forms › tests › forms.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>forms.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div><p>-<em>- coding: utf-8 -</em>-</p></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">from</span> <span class="nn">django.core.files.uploadedfile</span> <span class="kn">import</span> <span class="n">SimpleUploadedFile</span>
<span class="kn">from</span> <span class="nn">django.forms</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">QueryDict</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">Template</span><span class="p">,</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">django.test.utils</span> <span class="kn">import</span> <span class="n">str_prefix</span>
<span class="kn">from</span> <span class="nn">django.utils.datastructures</span> <span class="kn">import</span> <span class="n">MultiValueDict</span><span class="p">,</span> <span class="n">MergeDict</span>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="kn">import</span> <span class="n">mark_safe</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">PersonNew</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;first_name_id&#39;</span><span class="p">}))</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">FormsTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>A Form is a collection of Fields. It knows how to validate a set of data and it
knows how to render itself in a couple of default ways (e.g., an HTML table).
You can pass it data in <strong>init</strong>(), as a dictionary.</p></td><td class="code"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Pass a dictionary to a Form's <strong>init</strong>().</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">,</span> <span class="s">&#39;birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_bound</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">as_text</span><span class="p">(),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&quot;first_name&quot;</span><span class="p">],</span> <span class="s">&#39;John&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&quot;last_name&quot;</span><span class="p">],</span> <span class="s">&#39;Lennon&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&quot;birthday&quot;</span><span class="p">],</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; id=&quot;id_first_name&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;Lennon&quot; id=&quot;id_last_name&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_birthday&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="s">&#39;nonexistentfield&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Attempts to access non-existent fields should fail.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">form_output</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">boundfield</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
            <span class="n">form_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">boundfield</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">form_output</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; id=&quot;id_first_name&quot; /&gt;</span>
<span class="s">&lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;Lennon&quot; id=&quot;id_last_name&quot; /&gt;</span>
<span class="s">&lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_birthday&quot; /&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="n">form_output</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">boundfield</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
            <span class="n">form_output</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">boundfield</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">boundfield</span><span class="o">.</span><span class="n">data</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form_output</span><span class="p">,</span> <span class="p">[</span>
            <span class="p">[</span><span class="s">&#39;First name&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s">&#39;Last name&#39;</span><span class="p">,</span> <span class="s">&#39;Lennon&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s">&#39;Birthday&#39;</span><span class="p">,</span> <span class="s">&#39;1940-10-9&#39;</span><span class="p">]</span>
        <span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; id=&quot;id_first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;Lennon&quot; id=&quot;id_last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_birthday&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_empty_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Empty dictionaries are valid, too.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_bound</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Attempts to access cleaned_data when validation fails should fail.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_unbound_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>If you don't pass any values to the Form's <strong>init</strong>(), or if you pass None,
the Form will be considered unbound and won't do any validation. Form.errors
will be an empty dictionary <em>but</em> Form.is_valid() will return False.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_bound</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Attempts to access cleaned_data when validation fails should fail.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_unicode_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>Unicode values are handled properly.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39;birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; id=&quot;id_first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; id=&quot;id_last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_birthday&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;li&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; id=&quot;id_first_name&quot; /&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; id=&quot;id_last_name&quot; /&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_birthday&quot; /&gt;&lt;/li&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&#39;&lt;p&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; id=&quot;id_first_name&quot; /&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s">&lt;p&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; id=&quot;id_last_name&quot; /&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s">&lt;p&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_birthday&quot; /&gt;&lt;/p&gt;&#39;</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;first_name&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;birthday&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">as_text</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;* first_name</span>
<span class="s">  * This field is required.</span>
<span class="s">* birthday</span>
<span class="s">  * This field is required.&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Attempts to access cleaned_data when validation fails should fail.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">as_text</span><span class="p">(),</span> <span class="s">&#39;* This field is required.&#39;</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_cleaned_data_only_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>cleaned<em>data will always *only* contain a key for fields defined in the
Form, even if you pass extra data when you define the Form. In this
example, we pass a bunch of extra fields to the form constructor,
but cleaned</em>data contains only the form's fields.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">,</span> <span class="s">&#39;birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span><span class="p">,</span> <span class="s">&#39;extra1&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">,</span> <span class="s">&#39;extra2&#39;</span><span class="p">:</span> <span class="s">&#39;hello&#39;</span><span class="p">}</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="s">&#39;John&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="s">&#39;Lennon&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_optional_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>cleaned<em>data will include a key and value for *all* fields defined in the Form,
even if the Form's data didn't include a value for fields that are not
required. In this example, the data dictionary doesn't include a value for the
"nick</em>name" field, but cleaned_data includes it. For CharFields, it's set to the
empty string.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">OptionalPersonForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">nick_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">}</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">OptionalPersonForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;nick_name&#39;</span><span class="p">],</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="s">&#39;John&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="s">&#39;Lennon&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>For DateFields, it's set to None.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">OptionalPersonForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">birth_date</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">}</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">OptionalPersonForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;birth_date&#39;</span><span class="p">],</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="s">&#39;John&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="s">&#39;Lennon&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_auto_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>"auto_id" tells the Form to add an "id" attribute to each form element.
If it's a string that contains '%s', Django will use that as a format string
into which the field's name will be inserted. It will also put a <label> around
the human-readable labels for a field.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">_id&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;first_name_id&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;first_name_id&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;last_name_id&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;last_name_id&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;birthday_id&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;birthday_id&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;first_name_id&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;first_name_id&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;last_name_id&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;last_name_id&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;birthday_id&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;birthday_id&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;&lt;label for=&quot;first_name_id&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;first_name_id&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;last_name_id&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;last_name_id&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;birthday_id&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;birthday_id&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_auto_id_true</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>If auto_id is any True value whose str() does not contain '%s', the "id"
attribute will be the name of the field.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_auto_id_false</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>If auto_id is any False value, an "id" attribute won't be output unless it
was manually entered.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_id_on_field</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>In this example, auto<em>id is False, but the "id" attribute for the "first</em>name"
field is given. Also note that field gets a <label>, while the others don't.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">PersonNew</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;first_name_id&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; id=&quot;first_name_id&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_auto_id_on_form_and_field</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>If the "id" attribute is specified in the Form and auto_id is True, the "id"
attribute in the Form gets precedence.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">PersonNew</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;first_name_id&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; id=&quot;first_name_id&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_various_boolean_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">SignupForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">email</span> <span class="o">=</span> <span class="n">EmailField</span><span class="p">()</span>
            <span class="n">get_spam</span> <span class="o">=</span> <span class="n">BooleanField</span><span class="p">()</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SignupForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;email&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;get_spam&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;get_spam&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SignupForm</span><span class="p">({</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;get_spam&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;email&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;get_spam&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;get_spam&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>'True' or 'true' should be rendered without a value attribute</p></td><td class="code"><div class="highlight"><pre>        <span class="n">f</span> <span class="o">=</span> <span class="n">SignupForm</span><span class="p">({</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;get_spam&#39;</span><span class="p">:</span> <span class="s">&#39;True&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;get_spam&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;get_spam&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SignupForm</span><span class="p">({</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;get_spam&#39;</span><span class="p">:</span> <span class="s">&#39;true&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;get_spam&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;get_spam&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>A value of 'False' or 'false' should be rendered unchecked</p></td><td class="code"><div class="highlight"><pre>        <span class="n">f</span> <span class="o">=</span> <span class="n">SignupForm</span><span class="p">({</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;get_spam&#39;</span><span class="p">:</span> <span class="s">&#39;False&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;get_spam&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;get_spam&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SignupForm</span><span class="p">({</span><span class="s">&#39;email&#39;</span><span class="p">:</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;get_spam&#39;</span><span class="p">:</span> <span class="s">&#39;false&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;get_spam&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;get_spam&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_widget_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>Any Field can have a Widget class passed to its constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">subject</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">Textarea</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;subject&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;textarea name=&quot;message&quot; rows=&quot;10&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><p>as<em>textarea(), as</em>text() and as_hidden() are shortcuts for changing the output
widget type:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_textarea</span><span class="p">(),</span> <span class="s">&#39;&lt;textarea name=&quot;subject&quot; rows=&quot;10&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_text</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_hidden</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;message&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>The 'widget' parameter to a Field can also be an instance:</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">subject</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">Textarea</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;rows&#39;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s">&#39;cols&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}))</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;textarea name=&quot;message&quot; rows=&quot;80&quot; cols=&quot;20&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>Instance-level attrs are <em>not</em> carried over to as<em>textarea(), as</em>text() and
as_hidden():</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_text</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;message&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">({</span><span class="s">&#39;subject&#39;</span><span class="p">:</span> <span class="s">&#39;Hello&#39;</span><span class="p">,</span> <span class="s">&#39;message&#39;</span><span class="p">:</span> <span class="s">&#39;I love you.&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_textarea</span><span class="p">(),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;subject&quot;&gt;Hello&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_text</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;message&quot; value=&quot;I love you.&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;message&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_hidden</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;message&quot; value=&quot;I love you.&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_forms_with_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-21"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-21">&#182;</a></div><p>For a form with a <select>, use ChoiceField:</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FrameworkForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;Java&#39;</span><span class="p">)])</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Django&#39;</span><span class="p">,</span> <span class="s">&#39;language&#39;</span><span class="p">:</span> <span class="s">&#39;P&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;P&quot; selected=&quot;selected&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-22"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-22">&#182;</a></div><p>A subtlety: If one of the choices' value is the empty string and the form is
unbound, then the <option> for the empty-string choice will get selected="selected".</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FrameworkForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;------&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;Java&#39;</span><span class="p">)])</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;------&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-23"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-23">&#182;</a></div><p>You can specify widget attributes in the Widget constructor.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FrameworkForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;Java&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">Select</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">}))</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select class=&quot;foo&quot; name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Django&#39;</span><span class="p">,</span> <span class="s">&#39;language&#39;</span><span class="p">:</span> <span class="s">&#39;P&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select class=&quot;foo&quot; name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;P&quot; selected=&quot;selected&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-24"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-24">&#182;</a></div><p>When passing a custom widget instance to ChoiceField, note that setting
'choices' on the widget is meaningless. The widget will use the choices
defined on the Field, not the ones defined on the Widget.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FrameworkForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;Java&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">Select</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ruby&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Perl&#39;</span><span class="p">)],</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">}))</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select class=&quot;foo&quot; name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Django&#39;</span><span class="p">,</span> <span class="s">&#39;language&#39;</span><span class="p">:</span> <span class="s">&#39;P&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select class=&quot;foo&quot; name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;P&quot; selected=&quot;selected&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-25"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-25">&#182;</a></div><p>You can set a ChoiceField's choices after the fact.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FrameworkForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">()</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;language&quot;&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;Java&#39;</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;language&quot;&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Python&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;Java&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_forms_with_radio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-26"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-26">&#182;</a></div><p>Add widget=RadioSelect to use that widget with a ChoiceField.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FrameworkForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;Java&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">RadioSelect</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;language&quot; value=&quot;P&quot; /&gt; Python&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;language&quot; value=&quot;J&quot; /&gt; Java&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Language:&lt;/th&gt;&lt;td&gt;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;language&quot; value=&quot;P&quot; /&gt; Python&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;language&quot; value=&quot;J&quot; /&gt; Java&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Name: &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Language: &lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;language&quot; value=&quot;P&quot; /&gt; Python&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;language&quot; value=&quot;J&quot; /&gt; Java&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-27"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-27">&#182;</a></div><p>Regarding auto_id and <label>, RadioSelect is a special case. Each radio button
gets a distinct ID, formed by appending an underscore plus the button's
zero-based index.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">f</span> <span class="o">=</span> <span class="n">FrameworkForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;language&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_0&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_0&quot; value=&quot;P&quot; name=&quot;language&quot; /&gt; Python&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_1&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_1&quot; value=&quot;J&quot; name=&quot;language&quot; /&gt; Java&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-28"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-28">&#182;</a></div><p>When RadioSelect is used with auto<em>id, and the whole form is printed using
either as</em>table() or as_ul(), the label for the RadioSelect will point to the
ID of the <em>first</em> radio button.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_name&quot;&gt;Name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;id_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_language_0&quot;&gt;Language:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_0&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_0&quot; value=&quot;P&quot; name=&quot;language&quot; /&gt; Python&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_1&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_1&quot; value=&quot;J&quot; name=&quot;language&quot; /&gt; Java&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;id_name&quot;&gt;Name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;id_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_0&quot;&gt;Language:&lt;/label&gt; &lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_0&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_0&quot; value=&quot;P&quot; name=&quot;language&quot; /&gt; Python&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_1&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_1&quot; value=&quot;J&quot; name=&quot;language&quot; /&gt; Java&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;&lt;label for=&quot;id_name&quot;&gt;Name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;id_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_language_0&quot;&gt;Language:&lt;/label&gt; &lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_0&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_0&quot; value=&quot;P&quot; name=&quot;language&quot; /&gt; Python&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_language_1&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;id_language_1&quot; value=&quot;J&quot; name=&quot;language&quot; /&gt; Java&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_form_with_iterable_boundfield</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">BeatleForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;paul&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;george&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;ringo&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">RadioSelect</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">BeatleForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">bf</span><span class="p">)</span> <span class="k">for</span> <span class="n">bf</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]]),</span> <span class="s">&quot;&quot;&quot;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;john&quot; /&gt; John&lt;/label&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;paul&quot; /&gt; Paul&lt;/label&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;george&quot; /&gt; George&lt;/label&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;ringo&quot; /&gt; Ringo&lt;/label&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;&lt;div&gt;</span><span class="si">%s</span><span class="s">&lt;/div&gt;&#39;</span> <span class="o">%</span> <span class="n">bf</span> <span class="k">for</span> <span class="n">bf</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]]),</span> <span class="s">&quot;&quot;&quot;&lt;div&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;john&quot; /&gt; John&lt;/label&gt;&lt;/div&gt;</span>
<span class="s">&lt;div&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;paul&quot; /&gt; Paul&lt;/label&gt;&lt;/div&gt;</span>
<span class="s">&lt;div&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;george&quot; /&gt; George&lt;/label&gt;&lt;/div&gt;</span>
<span class="s">&lt;div&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;name&quot; value=&quot;ringo&quot; /&gt; Ringo&lt;/label&gt;&lt;/div&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_form_with_noniterable_boundfield</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-29"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-29">&#182;</a></div><p>You can iterate over any BoundField, not just those with widget=RadioSelect.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">BeatleForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">BeatleForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">bf</span><span class="p">)</span> <span class="k">for</span> <span class="n">bf</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_forms_with_multiple_choice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-30"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-30">&#182;</a></div><p>MultipleChoiceField is a special case, as its data is required to be a list:</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">()</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;composers&quot;&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John Lennon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul McCartney&#39;</span><span class="p">)])</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;composers&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;John Lennon&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul McCartney&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">,</span> <span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;P&#39;</span><span class="p">]},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;Yesterday&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;composers&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;John Lennon&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot; selected=&quot;selected&quot;&gt;Paul McCartney&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_hidden_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John Lennon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul McCartney&#39;</span><span class="p">)])</span></pre></div></td></tr>


<tr id="section-31"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-31">&#182;</a></div><p>MultipleChoiceField rendered as<em>hidden() is a special case. Because it can
have multiple values, its as</em>hidden() renders multiple <input type="hidden">
tags.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">,</span> <span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;P&#39;</span><span class="p">]},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_hidden</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;composers&quot; value=&quot;P&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;From Me To You&#39;</span><span class="p">,</span> <span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">]},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_hidden</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;input type=&quot;hidden&quot; name=&quot;composers&quot; value=&quot;P&quot; /&gt;</span>
<span class="s">&lt;input type=&quot;hidden&quot; name=&quot;composers&quot; value=&quot;J&quot; /&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-32"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-32">&#182;</a></div><p>DateTimeField rendered as_hidden() is special too</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">MessageForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">when</span> <span class="o">=</span> <span class="n">SplitDateTimeField</span><span class="p">()</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">MessageForm</span><span class="p">({</span><span class="s">&#39;when_0&#39;</span><span class="p">:</span> <span class="s">&#39;1992-01-01&#39;</span><span class="p">,</span> <span class="s">&#39;when_1&#39;</span><span class="p">:</span> <span class="s">&#39;01:01&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;when&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;when_0&quot; value=&quot;1992-01-01&quot; id=&quot;id_when_0&quot; /&gt;&lt;input type=&quot;text&quot; name=&quot;when_1&quot; value=&quot;01:01&quot; id=&quot;id_when_1&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;when&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_hidden</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;when_0&quot; value=&quot;1992-01-01&quot; id=&quot;id_when_0&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;when_1&quot; value=&quot;01:01&quot; id=&quot;id_when_1&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_mulitple_choice_checkbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-33"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-33">&#182;</a></div><p>MultipleChoiceField can also be used with the CheckboxSelectMultiple widget.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John Lennon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul McCartney&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">CheckboxSelectMultiple</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;J&quot; /&gt; John Lennon&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;P&quot; /&gt; Paul McCartney&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">]},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;J&quot; /&gt; John Lennon&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;P&quot; /&gt; Paul McCartney&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">]},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;J&quot; /&gt; John Lennon&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;P&quot; /&gt; Paul McCartney&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_checkbox_auto_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-34"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-34">&#182;</a></div><p>Regarding auto_id, CheckboxSelectMultiple is a special case. Each checkbox
gets a distinct ID, formed by appending an underscore plus the checkbox's
zero-based index.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John Lennon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul McCartney&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">CheckboxSelectMultiple</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">_id&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;composers_id_0&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;J&quot; id=&quot;composers_id_0&quot; /&gt; John Lennon&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;composers_id_1&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;composers&quot; value=&quot;P&quot; id=&quot;composers_id_1&quot; /&gt; Paul McCartney&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_multiple_choice_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-35"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-35">&#182;</a></div><p>Data for a MultipleChoiceField should be a list. QueryDict, MultiValueDict and
MergeDict (when created as a merge of MultiValueDicts) conveniently work with
this.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John Lennon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul McCartney&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">CheckboxSelectMultiple</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">,</span> <span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">]}</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">&#39;name=Yesterday&amp;composers=J&amp;composers=P&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">MultiValueDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Yesterday&#39;</span><span class="p">],</span> <span class="n">composers</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">]))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">MergeDict</span><span class="p">(</span><span class="n">MultiValueDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Yesterday&#39;</span><span class="p">],</span> <span class="n">composers</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">])))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>

    <span class="k">def</span> <span class="nf">test_multiple_hidden</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John Lennon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul McCartney&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">CheckboxSelectMultiple</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-36"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-36">&#182;</a></div><p>The MultipleHiddenInput widget renders multiple values as hidden fields.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">SongFormHidden</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">composers</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John Lennon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul McCartney&#39;</span><span class="p">)],</span> <span class="n">widget</span><span class="o">=</span><span class="n">MultipleHiddenInput</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">SongFormHidden</span><span class="p">(</span><span class="n">MultiValueDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Yesterday&#39;</span><span class="p">],</span> <span class="n">composers</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">])),</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Name: &lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;Yesterday&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;composers&quot; value=&quot;J&quot; /&gt;</span>
<span class="s">&lt;input type=&quot;hidden&quot; name=&quot;composers&quot; value=&quot;P&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-37"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-37">&#182;</a></div><p>When using CheckboxSelectMultiple, the framework expects a list of input and
returns a list of input.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">,</span> <span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">]},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">,</span> <span class="s">&#39;composers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">]},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;composers&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span> <span class="s">&#39;Yesterday&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_escaping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-38"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-38">&#182;</a></div><p>Validation errors are HTML-escaped when output as HTML.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">EscapingForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">special_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;&lt;em&gt;Special&lt;/em&gt; Field&quot;</span><span class="p">)</span>
            <span class="n">special_safe_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">mark_safe</span><span class="p">(</span><span class="s">&quot;&lt;em&gt;Special&lt;/em&gt; Field&quot;</span><span class="p">))</span>

            <span class="k">def</span> <span class="nf">clean_special_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&quot;Something&#39;s wrong with &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;special_name&#39;</span><span class="p">])</span>

            <span class="k">def</span> <span class="nf">clean_special_safe_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">mark_safe</span><span class="p">(</span><span class="s">&quot;&#39;&lt;b&gt;</span><span class="si">%s</span><span class="s">&lt;/b&gt;&#39; is a safe string&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;special_safe_name&#39;</span><span class="p">]))</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">EscapingForm</span><span class="p">({</span><span class="s">&#39;special_name&#39;</span><span class="p">:</span> <span class="s">&quot;Nothing to escape&quot;</span><span class="p">,</span> <span class="s">&#39;special_safe_name&#39;</span><span class="p">:</span> <span class="s">&quot;Nothing to escape&quot;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&amp;lt;em&amp;gt;Special&amp;lt;/em&amp;gt; Field:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Something&amp;#39;s wrong with &amp;#39;Nothing to escape&amp;#39;&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;special_name&quot; value=&quot;Nothing to escape&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;em&gt;Special&lt;/em&gt; Field:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;&#39;&lt;b&gt;Nothing to escape&lt;/b&gt;&#39; is a safe string&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;special_safe_name&quot; value=&quot;Nothing to escape&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">EscapingForm</span><span class="p">({</span>
            <span class="s">&#39;special_name&#39;</span><span class="p">:</span> <span class="s">&quot;Should escape &lt; &amp; &gt; and &lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;&quot;</span><span class="p">,</span>
            <span class="s">&#39;special_safe_name&#39;</span><span class="p">:</span> <span class="s">&quot;&lt;i&gt;Do not escape&lt;/i&gt;&quot;</span>
        <span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&amp;lt;em&amp;gt;Special&amp;lt;/em&amp;gt; Field:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Something&amp;#39;s wrong with &amp;#39;Should escape &amp;lt; &amp;amp; &amp;gt; and &amp;lt;script&amp;gt;alert(&amp;#39;xss&amp;#39;)&amp;lt;/script&amp;gt;&amp;#39;&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;special_name&quot; value=&quot;Should escape &amp;lt; &amp;amp; &amp;gt; and &amp;lt;script&amp;gt;alert(&amp;#39;xss&amp;#39;)&amp;lt;/script&amp;gt;&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;em&gt;Special&lt;/em&gt; Field:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;&#39;&lt;b&gt;&lt;i&gt;Do not escape&lt;/i&gt;&lt;/b&gt;&#39; is a safe string&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;special_safe_name&quot; value=&quot;&amp;lt;i&amp;gt;Do not escape&amp;lt;/i&amp;gt;&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_validating_multiple_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-39"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-39">&#182;</a></div><p>There are a couple of ways to do multiple-field validation. If you want the
validation message to be associated with a particular field, implement the
clean<em>XXX() method on the Form, where XXX is the field name. As in
Field.clean(), the clean</em>XXX() method should return the cleaned value. In the
clean<em>XXX() method, you have access to self.cleaned</em>data, which is a dictionary
of all the data that has been cleaned <em>so far</em>, in order by the fields,
including the current field (e.g., the field XXX if you're in clean_XXX()).</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">password1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="n">password2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">clean_password2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password1&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password2&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&#39;Please make sure your passwords match.&#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">]</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;Please make sure your passwords match.&#39;</span><span class="p">])</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">],</span> <span class="s">&#39;adrian&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">],</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">],</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-40"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-40">&#182;</a></div><p>Another way of doing multiple-field validation is by implementing the
Form's clean() method. If you do this, any ValidationError raised by that
method will not be associated with a particular field; it will have a
special-case association with the field named '<strong>all</strong>'.
Note that in Form.clean(), you have access to self.cleaned_data, a dictionary of
all the fields/values that have <em>not</em> raised a ValidationError. Also note
Form.clean() is required to return a dictionary of all clean data.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">password1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="n">password2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password1&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password2&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&#39;Please make sure your passwords match.&#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password1:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password2:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;__all__&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;Please make sure your passwords match.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Please make sure your passwords match.&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;adrian&quot; maxlength=&quot;10&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Please make sure your passwords match.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;adrian&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password1: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password2: &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">],</span> <span class="s">&#39;adrian&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">],</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">],</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_dynamic_construction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-41"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-41">&#182;</a></div><p>It's possible to construct a Form dynamically by adding to the self.fields
dictionary in <strong>init</strong>(). Don't forget to call Form.<strong>init</strong>() within the
subclass' <strong>init</strong>().</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="nb">super</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;First name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Last name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Birthday:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-42"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-42">&#182;</a></div><p>Instances of a dynamic Form do not persist fields from one Form instance to
the next.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">field_list</span><span class="o">=</span><span class="p">[]):</span>
                <span class="n">Form</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="n">auto_id</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">field_list</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">field_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;field1&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">()),</span> <span class="p">(</span><span class="s">&#39;field2&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">())]</span>
        <span class="n">my_form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">(</span><span class="n">field_list</span><span class="o">=</span><span class="n">field_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">my_form</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Field1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">field_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;field3&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">()),</span> <span class="p">(</span><span class="s">&#39;field4&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">())]</span>
        <span class="n">my_form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">(</span><span class="n">field_list</span><span class="o">=</span><span class="n">field_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">my_form</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Field3:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field3&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field4:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field4&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">default_field_1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">default_field_2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">field_list</span><span class="o">=</span><span class="p">[]):</span>
                <span class="n">Form</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="n">auto_id</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">field_list</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">field_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;field1&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">()),</span> <span class="p">(</span><span class="s">&#39;field2&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">())]</span>
        <span class="n">my_form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">(</span><span class="n">field_list</span><span class="o">=</span><span class="n">field_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">my_form</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Default field 1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;default_field_1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Default field 2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;default_field_2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">field_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;field3&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">()),</span> <span class="p">(</span><span class="s">&#39;field4&#39;</span><span class="p">,</span> <span class="n">CharField</span><span class="p">())]</span>
        <span class="n">my_form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">(</span><span class="n">field_list</span><span class="o">=</span><span class="n">field_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">my_form</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Default field 1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;default_field_1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Default field 2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;default_field_2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field3:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field3&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field4:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field4&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-43"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-43">&#182;</a></div><p>Similarly, changes to field attributes do not persist from one Form instance
to the next.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names_required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="nb">super</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">names_required</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;required&#39;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;required&#39;</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">names_required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">required</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">required</span><span class="p">,</span> <span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span> <span class="p">({},</span> <span class="p">{}))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">names_required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">required</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">required</span><span class="p">,</span> <span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span> <span class="p">({</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;required&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;required&#39;</span><span class="p">}))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">names_required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">required</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">required</span><span class="p">,</span> <span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span> <span class="p">({},</span> <span class="p">{}))</span>

        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_max_length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="nb">super</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">name_max_length</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max_length</span> <span class="o">=</span> <span class="n">name_max_length</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max_length</span> <span class="o">=</span> <span class="n">name_max_length</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">name_max_length</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">max_length</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">max_length</span><span class="p">,</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">name_max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">max_length</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">max_length</span><span class="p">,</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">name_max_length</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">max_length</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">max_length</span><span class="p">,</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-44"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-44">&#182;</a></div><p>Similarly, choices do not persist from one Form instance to the next.
Refs #15127.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">gender</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;Female&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;Male&#39;</span><span class="p">)))</span>

            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allow_unspec_gender</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="nb">super</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">allow_unspec_gender</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span> <span class="o">+=</span> <span class="p">((</span><span class="s">&#39;u&#39;</span><span class="p">,</span> <span class="s">&#39;Unspecified&#39;</span><span class="p">),)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;Female&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;Male&#39;</span><span class="p">)])</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">allow_unspec_gender</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;Female&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;Male&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;u&#39;</span><span class="p">,</span> <span class="s">&#39;Unspecified&#39;</span><span class="p">)])</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">Person</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;gender&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="p">[(</span><span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;Female&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;Male&#39;</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">test_validators_independence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Test that we are able to modify a form field validators list without polluting</span>
<span class="sd">            other forms &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">django.core.validators</span> <span class="kn">import</span> <span class="n">MaxValueValidator</span>
        <span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">myfield</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>

        <span class="n">f1</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">()</span>
        <span class="n">f2</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">()</span>

        <span class="n">f1</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;myfield&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">validators</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">f1</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;myfield&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">validators</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">f2</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;myfield&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">validators</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_hidden_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-45"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-45">&#182;</a></div><p>HiddenInput widgets are displayed differently in the as<em>table(), as</em>ul())
and as_p() output of a Form -- their verbose names are not displayed, and a
separate row is not displayed. They're displayed in the last row of the
form, directly after that row's form element.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">hidden_text</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">HiddenInput</span><span class="p">)</span>
            <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;First name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Last name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Birthday:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-46"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-46">&#182;</a></div><p>With auto_id set, a HiddenInput still gets an ID, but it doesn't get a label.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; id=&quot;id_hidden_text&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; id=&quot;id_hidden_text&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;&lt;label for=&quot;id_first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;first_name&quot; id=&quot;id_first_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;last_name&quot; id=&quot;id_last_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;birthday&quot; id=&quot;id_birthday&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; id=&quot;id_hidden_text&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-47"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-47">&#182;</a></div><p>If a field with a HiddenInput has errors, the as<em>table() and as</em>ul() output
will include the error message(s) with the text "(Hidden field [fieldname]) "
prepended. This message is displayed at the top of the output, regardless of
its field's order in the form.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">,</span> <span class="s">&#39;birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;(Hidden field hidden_text) This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;First name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Last name:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;Lennon&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Birthday:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;(Hidden field hidden_text) This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;Lennon&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;(Hidden field hidden_text) This field is required.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="s">&lt;p&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; value=&quot;John&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; value=&quot;Lennon&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; value=&quot;1940-10-9&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;hidden_text&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-48"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-48">&#182;</a></div><p>A corner case: It's possible for a form to have only HiddenInputs.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">TestForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">foo</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">HiddenInput</span><span class="p">)</span>
            <span class="n">bar</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">HiddenInput</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">TestForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;foo&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;bar&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;foo&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;bar&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;foo&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;bar&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_field_order</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-49"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-49">&#182;</a></div><p>A Form's fields are displayed in the same order in which they were defined.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">TestForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">field1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field3</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field4</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field6</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field7</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field8</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field9</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field10</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field11</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field12</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field13</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">field14</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">TestForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Field1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field3:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field3&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field4:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field4&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field5:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field5&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field6:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field6&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field7:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field7&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field8:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field8&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field9:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field9&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field10:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field10&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field11:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field11&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field12:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field12&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field13:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field13&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Field14:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;field14&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_form_html_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-50"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-50">&#182;</a></div><p>Some Field classes have an effect on the HTML attributes of their associated
Widget. If you set max_length in a CharField and its associated widget is
either a TextInput or PasswordInput, then the widget's rendered HTML will
include the "maxlength" attribute.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>                   <span class="c"># uses TextInput by default</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="n">realname</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">TextInput</span><span class="p">)</span> <span class="c"># redundantly define widget, just to test</span>
            <span class="n">address</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>                                 <span class="c"># no max_length defined here</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Realname: &lt;input type=&quot;text&quot; name=&quot;realname&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Address: &lt;input type=&quot;text&quot; name=&quot;address&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-51"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-51">&#182;</a></div><p>If you specify a custom "attrs" that includes the "maxlength" attribute,
the Field's max_length attribute will override whatever "maxlength" you specify
in "attrs".</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;maxlength&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}))</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_specifying_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-52"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-52">&#182;</a></div><p>You can specify the label for a field by using the 'label' argument to a Field
class. If you don't specify 'label', Django will use the field name with
underscores converted to spaces, and the initial letter capitalized.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Your username&#39;</span><span class="p">)</span>
            <span class="n">password1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="n">password2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Password (again)&#39;</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Your username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password1: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password (again): &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-53"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-53">&#182;</a></div><p>Labels for as_* methods will only end in a colon if they don't end in other
punctuation already.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Questions</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">q1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;The first question&#39;</span><span class="p">)</span>
            <span class="n">q2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;What is your name?&#39;</span><span class="p">)</span>
            <span class="n">q3</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;The answer to life is:&#39;</span><span class="p">)</span>
            <span class="n">q4</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Answer this question!&#39;</span><span class="p">)</span>
            <span class="n">q5</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;The last question. Period.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">Questions</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;The first question: &lt;input type=&quot;text&quot; name=&quot;q1&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;What is your name? &lt;input type=&quot;text&quot; name=&quot;q2&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;The answer to life is: &lt;input type=&quot;text&quot; name=&quot;q3&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Answer this question! &lt;input type=&quot;text&quot; name=&quot;q4&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;The last question. Period. &lt;input type=&quot;text&quot; name=&quot;q5&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">Questions</span><span class="p">()</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;&lt;label for=&quot;id_q1&quot;&gt;The first question:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;q1&quot; id=&quot;id_q1&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_q2&quot;&gt;What is your name?&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;q2&quot; id=&quot;id_q2&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_q3&quot;&gt;The answer to life is:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;q3&quot; id=&quot;id_q3&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_q4&quot;&gt;Answer this question!&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;q4&quot; id=&quot;id_q4&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_q5&quot;&gt;The last question. Period.&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;q5&quot; id=&quot;id_q5&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-54"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-54">&#182;</a></div><p>A label can be a Unicode object or a bytestring with special characters.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;li&gt;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-55"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-55">&#182;</a></div><p>If a label is set to the empty string for a field, that field won't get a label.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt; &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt; &lt;input id=&quot;id_username&quot; type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_password&quot;&gt;Password:&lt;/label&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;id_password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-56"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-56">&#182;</a></div><p>If label is None, Django will auto-create the label from the field name. This
is default behavior.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;id_username&quot;&gt;Username:&lt;/label&gt; &lt;input id=&quot;id_username&quot; type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_password&quot;&gt;Password:&lt;/label&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;id_password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_label_suffix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-57"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-57">&#182;</a></div><p>You can specify the 'label_suffix' argument to a Form class to modify the
punctuation symbol used at the end of a label.  By default, the colon (:) is
used, and is only appended to the label if the label doesn't already end with a
punctuation symbol: ., !, ? or :.  If you specify a different suffix, it will
be appended regardless of the last character of the label.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FavoriteForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Favorite color?&#39;</span><span class="p">)</span>
            <span class="n">animal</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Favorite animal&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FavoriteForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Favorite color? &lt;input type=&quot;text&quot; name=&quot;color&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Favorite animal: &lt;input type=&quot;text&quot; name=&quot;animal&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FavoriteForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label_suffix</span><span class="o">=</span><span class="s">&#39;?&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Favorite color? &lt;input type=&quot;text&quot; name=&quot;color&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Favorite animal? &lt;input type=&quot;text&quot; name=&quot;animal&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FavoriteForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label_suffix</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Favorite color? &lt;input type=&quot;text&quot; name=&quot;color&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Favorite animal &lt;input type=&quot;text&quot; name=&quot;animal&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">FavoriteForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label_suffix</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\u2192</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;li&gt;Favorite color? &lt;input type=&quot;text&quot; name=&quot;color&quot; /&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;Favorite animal</span><span class="se">\u2192</span><span class="s"> &lt;input type=&quot;text&quot; name=&quot;animal&quot; /&gt;&lt;/li&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_initial_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-58"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-58">&#182;</a></div><p>You can specify initial data for a field by using the 'initial' argument to a
Field class. This initial data is displayed when a Form is rendered with <em>no</em>
data. It is not displayed when a Form is rendered with any data (including an
empty dictionary). Also, the initial value is <em>not</em> used if data for a
particular required field isn't provided.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="s">&#39;django&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-59"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-59">&#182;</a></div><p>Here, we're not submitting any data, so the initial value will be displayed.)</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;django&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-60"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-60">&#182;</a></div><p>Here, we're submitting data, so the initial value will <em>not</em> be displayed.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;foo&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-61"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-61">&#182;</a></div><p>An 'initial' value is <em>not</em> used as a fallback if data is not provided. In this
example, we don't provide a value for 'username', and the form raises a
validation error rather than using the initial value for 'username'.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">test_dynamic_initial_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-62"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-62">&#182;</a></div><p>The previous technique dealt with "hard-coded" initial data, but it's also
possible to specify initial data after you've already created the Form class
(i.e., at runtime). Use the 'initial' parameter to the Form constructor. This
should be a dictionary containing initial values for one or more fields in the
form, keyed by field name.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-63"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-63">&#182;</a></div><p>Here, we're not submitting any data, so the initial value will be displayed.)</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;django&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;stephane&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;stephane&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-64"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-64">&#182;</a></div><p>The 'initial' parameter is meaningless if you pass data.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;foo&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-65"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-65">&#182;</a></div><p>A dynamic 'initial' value is <em>not</em> used as a fallback if data is not provided.
In this example, we don't provide a value for 'username', and the form raises a
validation error rather than using the initial value for 'username'.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span></pre></div></td></tr>


<tr id="section-66"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-66">&#182;</a></div><p>If a Form defines 'initial' <em>and</em> 'initial' is passed as a parameter to Form(),
then the latter will get precedence.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="s">&#39;django&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;babik&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;babik&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_callable_initial_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-67"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-67">&#182;</a></div><p>The previous technique dealt with raw values as initial data, but it's also
possible to specify callable data.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="s">&#39;foo&#39;</span><span class="p">),(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">),(</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="s">&#39;whiz&#39;</span><span class="p">)])</span></pre></div></td></tr>


<tr id="section-68"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-68">&#182;</a></div><p>We need to define functions that get called later.)</p></td><td class="code"><div class="highlight"><pre>        <span class="k">def</span> <span class="nf">initial_django</span><span class="p">():</span>
            <span class="k">return</span> <span class="s">&#39;django&#39;</span>

        <span class="k">def</span> <span class="nf">initial_stephane</span><span class="p">():</span>
            <span class="k">return</span> <span class="s">&#39;stephane&#39;</span>

        <span class="k">def</span> <span class="nf">initial_options</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">[</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">initial_other_options</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">]</span></pre></div></td></tr>


<tr id="section-69"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-69">&#182;</a></div><p>Here, we're not submitting any data, so the initial value will be displayed.)</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="n">initial_django</span><span class="p">,</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="n">initial_options</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;django&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Options: &lt;select multiple=&quot;multiple&quot; name=&quot;options&quot;&gt;</span>
<span class="s">&lt;option value=&quot;f&quot; selected=&quot;selected&quot;&gt;foo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;b&quot; selected=&quot;selected&quot;&gt;bar&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;w&quot;&gt;whiz&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-70"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-70">&#182;</a></div><p>The 'initial' parameter is meaningless if you pass data.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="n">initial_django</span><span class="p">,</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="n">initial_options</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Options: &lt;select multiple=&quot;multiple&quot; name=&quot;options&quot;&gt;</span>
<span class="s">&lt;option value=&quot;f&quot;&gt;foo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;b&quot;&gt;bar&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;w&quot;&gt;whiz&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="n">initial_django</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Options: &lt;select multiple=&quot;multiple&quot; name=&quot;options&quot;&gt;</span>
<span class="s">&lt;option value=&quot;f&quot;&gt;foo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;b&quot;&gt;bar&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;w&quot;&gt;whiz&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;options&#39;</span><span class="p">:[</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">]},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="n">initial_django</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;foo&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Options: &lt;select multiple=&quot;multiple&quot; name=&quot;options&quot;&gt;</span>
<span class="s">&lt;option value=&quot;f&quot; selected=&quot;selected&quot;&gt;foo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;b&quot; selected=&quot;selected&quot;&gt;bar&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;w&quot;&gt;whiz&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-71"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-71">&#182;</a></div><p>A callable 'initial' value is <em>not</em> used as a fallback if data is not provided.
In this example, we don't provide a value for 'username', and the form raises a
validation error rather than using the initial value for 'username'.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">},</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="n">initial_django</span><span class="p">,</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="n">initial_options</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span></pre></div></td></tr>


<tr id="section-72"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-72">&#182;</a></div><p>If a Form defines 'initial' <em>and</em> 'initial' is passed as a parameter to Form(),
then the latter will get precedence.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
           <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="n">initial_django</span><span class="p">)</span>
           <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
           <span class="n">options</span> <span class="o">=</span> <span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="s">&#39;foo&#39;</span><span class="p">),(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">),(</span><span class="s">&#39;w&#39;</span><span class="p">,</span><span class="s">&#39;whiz&#39;</span><span class="p">)],</span> <span class="n">initial</span><span class="o">=</span><span class="n">initial_other_options</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;django&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Options: &lt;select multiple=&quot;multiple&quot; name=&quot;options&quot;&gt;</span>
<span class="s">&lt;option value=&quot;f&quot;&gt;foo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;b&quot; selected=&quot;selected&quot;&gt;bar&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;w&quot; selected=&quot;selected&quot;&gt;whiz&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="n">initial_stephane</span><span class="p">,</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="n">initial_options</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;stephane&quot; maxlength=&quot;10&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Options: &lt;select multiple=&quot;multiple&quot; name=&quot;options&quot;&gt;</span>
<span class="s">&lt;option value=&quot;f&quot; selected=&quot;selected&quot;&gt;foo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;b&quot; selected=&quot;selected&quot;&gt;bar&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;w&quot;&gt;whiz&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_boundfield_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-73"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-73">&#182;</a></div><p>It's possible to get to the value which would be used for rendering
the widget for a field by using the BoundField's value method.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="s">&#39;djangonaut&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

        <span class="n">unbound</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">()</span>
        <span class="n">bound</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">bound</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unbound</span><span class="p">[</span><span class="s">&#39;username&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="s">&#39;djangonaut&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">bound</span><span class="p">[</span><span class="s">&#39;password&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unbound</span><span class="p">[</span><span class="s">&#39;password&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_help_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-74"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-74">&#182;</a></div><p>You can specify descriptive text for a field by using the 'help_text' argument)</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s">&#39;e.g., user@example.com&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s">&#39;Choose wisely.&#39;</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;e.g., user@example.com&lt;/span&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;Choose wisely.&lt;/span&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;e.g., user@example.com&lt;/span&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;Choose wisely.&lt;/span&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;br /&gt;&lt;span class=&quot;helptext&quot;&gt;e.g., user@example.com&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;br /&gt;&lt;span class=&quot;helptext&quot;&gt;Choose wisely.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-75"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-75">&#182;</a></div><p>The help text is displayed whether or not data is provided for the form.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;foo&quot; maxlength=&quot;10&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;e.g., user@example.com&lt;/span&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;Choose wisely.&lt;/span&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-76"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-76">&#182;</a></div><p>help_text is not displayed for hidden fields. It can be used for documentation
purposes, though.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s">&#39;e.g., user@example.com&#39;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="nb">next</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">HiddenInput</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s">&#39;Redirect destination&#39;</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;e.g., user@example.com&lt;/span&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;next&quot; value=&quot;/&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-77"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-77">&#182;</a></div><p>Help text can include arbitrary Unicode characters.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">)</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;li&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt; &lt;span class=&quot;helptext&quot;&gt;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&lt;/span&gt;&lt;/li&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_subclassing_forms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-78"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-78">&#182;</a></div><p>You can subclass a Form to add fields. The resulting form subclass will have
all of the fields of the parent Form, plus whichever fields you define in the
subclass.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>

        <span class="k">class</span> <span class="nc">Musician</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
            <span class="n">instrument</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">Musician</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Instrument: &lt;input type=&quot;text&quot; name=&quot;instrument&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-79"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-79">&#182;</a></div><p>Yes, you can subclass multiple forms. The fields are added in the order in
which the parent classes are listed.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>

        <span class="k">class</span> <span class="nc">Instrument</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">instrument</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

        <span class="k">class</span> <span class="nc">Beatle</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">Instrument</span><span class="p">):</span>
            <span class="n">haircut_type</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

        <span class="n">b</span> <span class="o">=</span> <span class="n">Beatle</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Birthday: &lt;input type=&quot;text&quot; name=&quot;birthday&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Instrument: &lt;input type=&quot;text&quot; name=&quot;instrument&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;Haircut type: &lt;input type=&quot;text&quot; name=&quot;haircut_type&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_forms_with_prefixes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-80"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-80">&#182;</a></div><p>Sometimes it's necessary to have multiple forms display on the same HTML page,
or multiple copies of the same form. We can accomplish this with form prefixes.
Pass the keyword argument 'prefix' to the Form constructor to use this feature.
This value will be prepended to each HTML form field name. One way to think
about this is "namespaces for HTML forms". Notice that in the data argument,
each field's key has the prefix, in this case 'person1', prepended to the
actual field name.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;person1-first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span>
            <span class="s">&#39;person1-last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">,</span>
            <span class="s">&#39;person1-birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span>
        <span class="p">}</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;person1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;id_person1-first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;person1-first_name&quot; value=&quot;John&quot; id=&quot;id_person1-first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_person1-last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;person1-last_name&quot; value=&quot;Lennon&quot; id=&quot;id_person1-last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_person1-birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;person1-birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_person1-birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;person1-first_name&quot; value=&quot;John&quot; id=&quot;id_person1-first_name&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;person1-last_name&quot; value=&quot;Lennon&quot; id=&quot;id_person1-last_name&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;person1-birthday&quot; value=&quot;1940-10-9&quot; id=&quot;id_person1-birthday&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="s">&#39;John&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="s">&#39;Lennon&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-81"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-81">&#182;</a></div><p>Let's try submitting some bad data to make sure form.errors and field.errors
work as expected.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;person1-first_name&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;person1-last_name&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="s">&#39;person1-birthday&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
        <span class="p">}</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;person1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="s">&#39;person1-first_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">errors</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Attempts to access non-existent fields should fail.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span></pre></div></td></tr>


<tr id="section-82"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-82">&#182;</a></div><p>In this example, the data doesn't have a prefix, but the form requires it, so
the form doesn't "see" the fields.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span>
            <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">,</span>
            <span class="s">&#39;birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span>
        <span class="p">}</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;person1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">])</span></pre></div></td></tr>


<tr id="section-83"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-83">&#182;</a></div><p>With prefixes, a single data dictionary can hold data for multiple instances
of the same form.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;person1-first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span>
            <span class="s">&#39;person1-last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">,</span>
            <span class="s">&#39;person1-birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span><span class="p">,</span>
            <span class="s">&#39;person2-first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Jim&#39;</span><span class="p">,</span>
            <span class="s">&#39;person2-last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Morrison&#39;</span><span class="p">,</span>
            <span class="s">&#39;person2-birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1943-12-8&#39;</span>
        <span class="p">}</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;person1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="s">&#39;John&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="s">&#39;Lennon&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;person2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="s">&#39;Jim&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="s">&#39;Morrison&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1943</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-84"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-84">&#182;</a></div><p>By default, forms append a hyphen between the prefix and the field name, but a
form can alter that behavior by implementing the add_prefix() method. This
method takes a field name and returns the prefixed field, according to
self.prefix.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">birthday</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">()</span>

            <span class="k">def</span> <span class="nf">add_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">and</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">-prefix-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span> <span class="ow">or</span> <span class="n">field_name</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li&gt;&lt;label for=&quot;id_foo-prefix-first_name&quot;&gt;First name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;foo-prefix-first_name&quot; id=&quot;id_foo-prefix-first_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_foo-prefix-last_name&quot;&gt;Last name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;foo-prefix-last_name&quot; id=&quot;id_foo-prefix-last_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_foo-prefix-birthday&quot;&gt;Birthday:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;foo-prefix-birthday&quot; id=&quot;id_foo-prefix-birthday&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;foo-prefix-first_name&#39;</span><span class="p">:</span> <span class="s">&#39;John&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo-prefix-last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Lennon&#39;</span><span class="p">,</span>
            <span class="s">&#39;foo-prefix-birthday&#39;</span><span class="p">:</span> <span class="s">&#39;1940-10-9&#39;</span>
        <span class="p">}</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;first_name&#39;</span><span class="p">],</span> <span class="s">&#39;John&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;last_name&#39;</span><span class="p">],</span> <span class="s">&#39;Lennon&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;birthday&#39;</span><span class="p">],</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1940</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_forms_with_null_boolean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-85"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-85">&#182;</a></div><p>NullBooleanField is a bit of a special case because its presentation (widget)
is different than its data. This is handled transparently, though.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">is_cool</span> <span class="o">=</span> <span class="n">NullBooleanField</span><span class="p">()</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Joe&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;is_cool&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Joe&#39;</span><span class="p">,</span> <span class="s">&#39;is_cool&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;is_cool&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Joe&#39;</span><span class="p">,</span> <span class="s">&#39;is_cool&#39;</span><span class="p">:</span> <span class="s">&#39;2&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;is_cool&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Joe&#39;</span><span class="p">,</span> <span class="s">&#39;is_cool&#39;</span><span class="p">:</span> <span class="s">&#39;3&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;is_cool&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Joe&#39;</span><span class="p">,</span> <span class="s">&#39;is_cool&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;is_cool&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Joe&#39;</span><span class="p">,</span> <span class="s">&#39;is_cool&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;is_cool&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_forms_with_file_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-86"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-86">&#182;</a></div><p>FileFields are a special case because they take their data from the request.FILES,
not request.POST.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FileForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">file1</span> <span class="o">=</span> <span class="n">FileField</span><span class="p">()</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;File1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;file&quot; name=&quot;file1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{},</span> <span class="n">files</span><span class="o">=</span><span class="p">{},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;File1:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;file&quot; name=&quot;file1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{},</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;file1&#39;</span><span class="p">:</span> <span class="n">SimpleUploadedFile</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;&#39;</span><span class="p">)},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;File1:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;The submitted file is empty.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;file&quot; name=&quot;file1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{},</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;file1&#39;</span><span class="p">:</span> <span class="s">&#39;something that is not a file&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;File1:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;No file was submitted. Check the encoding type on the form.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;file&quot; name=&quot;file1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{},</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;file1&#39;</span><span class="p">:</span> <span class="n">SimpleUploadedFile</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;some content&#39;</span><span class="p">)},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;File1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;file&quot; name=&quot;file1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">FileForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{},</span> <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;file1&#39;</span><span class="p">:</span> <span class="n">SimpleUploadedFile</span><span class="p">(</span><span class="s">&#39;我隻氣墊船裝滿晒鱔.txt&#39;</span><span class="p">,</span> <span class="s">&#39;मेरी मँडराने वाली नाव सर्पमीनों से भरी ह&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">))},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;File1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;file&quot; name=&quot;file1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_basic_processing_in_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">password1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="n">password2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password1&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password2&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&#39;Please make sure your passwords match.&#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span>

        <span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">post_data</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s">&#39;POST&#39;</span><span class="p">:</span>
                <span class="n">form</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">post_data</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">form</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
                <span class="k">return</span> <span class="s">&#39;VALID: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span>

            <span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><span class="se">\n</span><span class="s">&lt;table&gt;</span><span class="se">\n</span><span class="s">{{ form }}</span><span class="se">\n</span><span class="s">&lt;/table&gt;</span><span class="se">\n</span><span class="s">&lt;input type=&quot;submit&quot; /&gt;</span><span class="se">\n</span><span class="s">&lt;/form&gt;&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">form</span><span class="p">}))</span></pre></div></td></tr>


<tr id="section-87"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-87">&#182;</a></div><p>Case 1: GET (an empty form, with no errors).)</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">my_function</span><span class="p">(</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="p">{}),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="s">&lt;table&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;/table&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-88"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-88">&#182;</a></div><p>Case 2: POST with erroneous data (a redisplayed form, with errors).)</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">my_function</span><span class="p">(</span><span class="s">&#39;POST&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;this-is-a-long-username&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">}),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="s">&lt;table&gt;</span>
<span class="s">&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Please make sure your passwords match.&lt;/li&gt;&lt;/ul&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Ensure this value has at most 10 characters (it has 23).&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;this-is-a-long-username&quot; maxlength=&quot;10&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password1:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;Password2:&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;/table&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-89"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-89">&#182;</a></div><p>Case 3: POST with valid data (the success message).)</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">my_function</span><span class="p">(</span><span class="s">&#39;POST&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;secret&#39;</span><span class="p">}),</span> <span class="n">str_prefix</span><span class="p">(</span><span class="s">&quot;VALID: {&#39;username&#39;: </span><span class="si">%(_)s</span><span class="s">&#39;adrian&#39;, &#39;password1&#39;: </span><span class="si">%(_)s</span><span class="s">&#39;secret&#39;, &#39;password2&#39;: </span><span class="si">%(_)s</span><span class="s">&#39;secret&#39;}&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_templates_with_forms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">UserRegistration</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s">&quot;Good luck picking a username that doesn&#39;t already exist.&quot;</span><span class="p">)</span>
            <span class="n">password1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>
            <span class="n">password2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password1&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;password2&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password1&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">&#39;password2&#39;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&#39;Please make sure your passwords match.&#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span></pre></div></td></tr>


<tr id="section-90"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-90">&#182;</a></div><p>You have full flexibility in displaying form fields in a template. Just pass a
Form instance to the template, and use "dot" access to refer to individual
fields. Note, however, that this flexibility comes with the responsibility of
displaying all the errors, including any that might not be associated with a
particular field.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;&#39;&#39;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">{{ form.username.errors.as_ul }}&lt;p&gt;&lt;label&gt;Your username: {{ form.username }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">{{ form.password1.errors.as_ul }}&lt;p&gt;&lt;label&gt;Password: {{ form.password1 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">{{ form.password2.errors.as_ul }}&lt;p&gt;&lt;label&gt;Password (again): {{ form.password2 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Your username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password (again): &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Your username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;django&quot; maxlength=&quot;10&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;label&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;label&gt;Password (again): &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-91"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-91">&#182;</a></div><p>Use form.[field].label to output a field's label. You can specify the label for
a field by using the 'label' argument to a Field class. If you don't specify
'label', Django will use the field name with underscores converted to spaces,
and the initial letter capitalized.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;&#39;&#39;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;{{ form.username.label }}: {{ form.username }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;{{ form.password1.label }}: {{ form.password1 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;{{ form.password2.label }}: {{ form.password2 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password1: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password2: &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-92"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-92">&#182;</a></div><p>User form.[field].label<em>tag to output a field's label with a <label> tag
wrapped around it, but *only* if the given field has an "id" attribute.
Recall from above that passing the "auto</em>id" argument to a Form gives each
field an "id" attribute.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;&#39;&#39;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;{{ form.username.label_tag }}: {{ form.username }}&lt;/p&gt;</span>
<span class="s">&lt;p&gt;{{ form.password1.label_tag }}: {{ form.password1 }}&lt;/p&gt;</span>
<span class="s">&lt;p&gt;{{ form.password2.label_tag }}: {{ form.password2 }}&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Password1: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Password2: &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_username&quot;&gt;Username&lt;/label&gt;: &lt;input id=&quot;id_username&quot; type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_password1&quot;&gt;Password1&lt;/label&gt;: &lt;input type=&quot;password&quot; name=&quot;password1&quot; id=&quot;id_password1&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_password2&quot;&gt;Password2&lt;/label&gt;: &lt;input type=&quot;password&quot; name=&quot;password2&quot; id=&quot;id_password2&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-93"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-93">&#182;</a></div><p>User form.[field].help_text to output a field's help text. If the given field
does not have help text, nothing will be output.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;&#39;&#39;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;{{ form.username.label_tag }}: {{ form.username }}&lt;br /&gt;{{ form.username.help_text }}&lt;/p&gt;</span>
<span class="s">&lt;p&gt;{{ form.password1.label_tag }}: {{ form.password1 }}&lt;/p&gt;</span>
<span class="s">&lt;p&gt;{{ form.password2.label_tag }}: {{ form.password2 }}&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; maxlength=&quot;10&quot; /&gt;&lt;br /&gt;Good luck picking a username that doesn&amp;#39;t already exist.&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Password1: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Password2: &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="s">&#39;{{ form.password1.help_text }}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&#39;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-94"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-94">&#182;</a></div><p>The label_tag() method takes an optional attrs argument: a dictionary of HTML
attributes to add to the <label> tag.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">f</span> <span class="o">=</span> <span class="n">UserRegistration</span><span class="p">(</span><span class="n">auto_id</span><span class="o">=</span><span class="s">&#39;id_</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">form_output</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">bf</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">form_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bf</span><span class="o">.</span><span class="n">label_tag</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">}))</span>

        <span class="n">expected_form_output</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;&lt;label for=&quot;id_username&quot; class=&quot;pretty&quot;&gt;Username&lt;/label&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;label for=&quot;id_password1&quot; class=&quot;pretty&quot;&gt;Password1&lt;/label&gt;&#39;</span><span class="p">,</span>
            <span class="s">&#39;&lt;label for=&quot;id_password2&quot; class=&quot;pretty&quot;&gt;Password2&lt;/label&gt;&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">form_output</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">expected_form_output</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">form_output</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">form_output</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">expected_form_output</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></pre></div></td></tr>


<tr id="section-95"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-95">&#182;</a></div><p>To display the errors that aren't associated with a particular field -- e.g.,
the errors caused by Form.clean() -- use {{ form.non<em>field</em>errors }} in the
template. If used on its own, it is displayed as a <ul> (or an empty string, if
the list of errors is empty). You can also use it in {% if %} statements.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;&#39;&#39;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">{{ form.username.errors.as_ul }}&lt;p&gt;&lt;label&gt;Your username: {{ form.username }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">{{ form.password1.errors.as_ul }}&lt;p&gt;&lt;label&gt;Password: {{ form.password1 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">{{ form.password2.errors.as_ul }}&lt;p&gt;&lt;label&gt;Password (again): {{ form.password2 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Your username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;django&quot; maxlength=&quot;10&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password (again): &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;&#39;&#39;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">{{ form.non_field_errors }}</span>
<span class="s">{{ form.username.errors.as_ul }}&lt;p&gt;&lt;label&gt;Your username: {{ form.username }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">{{ form.password1.errors.as_ul }}&lt;p&gt;&lt;label&gt;Password: {{ form.password1 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">{{ form.password2.errors.as_ul }}&lt;p&gt;&lt;label&gt;Password (again): {{ form.password2 }}&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&#39;&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span><span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="n">UserRegistration</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;django&#39;</span><span class="p">,</span> <span class="s">&#39;password1&#39;</span><span class="p">:</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;password2&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">},</span> <span class="n">auto_id</span><span class="o">=</span><span class="bp">False</span><span class="p">)})),</span> <span class="s">&quot;&quot;&quot;&lt;form action=&quot;&quot;&gt;</span>
<span class="s">&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;Please make sure your passwords match.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Your username: &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;django&quot; maxlength=&quot;10&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password: &lt;input type=&quot;password&quot; name=&quot;password1&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label&gt;Password (again): &lt;input type=&quot;password&quot; name=&quot;password2&quot; /&gt;&lt;/label&gt;&lt;/p&gt;</span>
<span class="s">&lt;input type=&quot;submit&quot; /&gt;</span>
<span class="s">&lt;/form&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_empty_permitted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-96"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-96">&#182;</a></div><p>Sometimes (pretty much in formsets) we want to allow a form to pass validation
if it is completely empty. We can accomplish this by using the empty_permitted
agrument to a form constructor.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">artist</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span></pre></div></td></tr>


<tr id="section-97"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-97">&#182;</a></div><p>First let's show what happens id empty_permitted=False (the default):</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;artist&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;song&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">empty_permitted</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">],</span> <span class="s">&#39;artist&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">]})</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Attempts to access cleaned_data when validation fails should fail.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span></pre></div></td></tr>


<tr id="section-98"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-98">&#182;</a></div><p>Now let's show what happens when empty_permitted=True and the form is empty.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">form</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">empty_permitted</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">,</span> <span class="p">{})</span></pre></div></td></tr>


<tr id="section-99"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-99">&#182;</a></div><p>But if we fill in data for one of the fields, the form is no longer empty and
the whole thing must pass validation.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;artist&#39;</span><span class="p">:</span> <span class="s">&#39;The Doors&#39;</span><span class="p">,</span> <span class="s">&#39;song&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">empty_permitted</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;This field is required.&#39;</span><span class="p">]})</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;Attempts to access cleaned_data when validation fails should fail.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span></pre></div></td></tr>


<tr id="section-100"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-100">&#182;</a></div><p>If a field is not given in the data then None is returned for its data. Lets
make sure that when checking for empty_permitted that None is treated
accordingly.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;artist&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;song&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">empty_permitted</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span></pre></div></td></tr>


<tr id="section-101"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-101">&#182;</a></div><p>However, we <em>really</em> need to be sure we are checking for None as any data in
initial that returns False on a boolean call needs to be treated literally.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">PriceForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">amount</span> <span class="o">=</span> <span class="n">FloatField</span><span class="p">()</span>
            <span class="n">qty</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">()</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="s">&#39;0.0&#39;</span><span class="p">,</span> <span class="s">&#39;qty&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">PriceForm</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">initial</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;amount&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span> <span class="n">empty_permitted</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">test_extracting_hidden_and_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">SongForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">token</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">HiddenInput</span><span class="p">)</span>
            <span class="n">artist</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>

        <span class="n">form</span> <span class="o">=</span> <span class="n">SongForm</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">form</span><span class="o">.</span><span class="n">hidden_fields</span><span class="p">()],</span> <span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">form</span><span class="o">.</span><span class="n">visible_fields</span><span class="p">()],</span> <span class="p">[</span><span class="s">&#39;artist&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_hidden_initial_gets_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">field1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">show_hidden_initial</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">MyForm</span><span class="p">()</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_field1&quot;&gt;Field1:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_field1&quot; type=&quot;text&quot; name=&quot;field1&quot; maxlength=&quot;50&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;initial-field1&quot; id=&quot;initial-id_field1&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_error_html_required_html_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
            <span class="n">is_cool</span> <span class="o">=</span> <span class="n">NullBooleanField</span><span class="p">()</span>
            <span class="n">email</span> <span class="o">=</span> <span class="n">EmailField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">age</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">()</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">Person</span><span class="p">({})</span>
        <span class="n">p</span><span class="o">.</span><span class="n">error_css_class</span> <span class="o">=</span> <span class="s">&#39;error&#39;</span>
        <span class="n">p</span><span class="o">.</span><span class="n">required_css_class</span> <span class="o">=</span> <span class="s">&#39;required&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;li class=&quot;required error&quot;&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;label for=&quot;id_name&quot;&gt;Name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;id_name&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li class=&quot;required&quot;&gt;&lt;label for=&quot;id_is_cool&quot;&gt;Is cool:&lt;/label&gt; &lt;select name=&quot;is_cool&quot; id=&quot;id_is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;id_email&quot;&gt;Email:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;email&quot; id=&quot;id_email&quot; /&gt;&lt;/li&gt;</span>
<span class="s">&lt;li class=&quot;required error&quot;&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;label for=&quot;id_age&quot;&gt;Age:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;age&quot; id=&quot;id_age&quot; /&gt;&lt;/li&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_p</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="s">&lt;p class=&quot;required error&quot;&gt;&lt;label for=&quot;id_name&quot;&gt;Name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;id_name&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;p class=&quot;required&quot;&gt;&lt;label for=&quot;id_is_cool&quot;&gt;Is cool:&lt;/label&gt; &lt;select name=&quot;is_cool&quot; id=&quot;id_is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;label for=&quot;id_email&quot;&gt;Email:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;email&quot; id=&quot;id_email&quot; /&gt;&lt;/p&gt;</span>
<span class="s">&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;</span>
<span class="s">&lt;p class=&quot;required error&quot;&gt;&lt;label for=&quot;id_age&quot;&gt;Age:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;age&quot; id=&quot;id_age&quot; /&gt;&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&quot;&quot;&quot;&lt;tr class=&quot;required error&quot;&gt;&lt;th&gt;&lt;label for=&quot;id_name&quot;&gt;Name:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;id_name&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr class=&quot;required&quot;&gt;&lt;th&gt;&lt;label for=&quot;id_is_cool&quot;&gt;Is cool:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;select name=&quot;is_cool&quot; id=&quot;id_is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_email&quot;&gt;Email:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;email&quot; id=&quot;id_email&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span>
<span class="s">&lt;tr class=&quot;required error&quot;&gt;&lt;th&gt;&lt;label for=&quot;id_age&quot;&gt;Age:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;ul class=&quot;errorlist&quot;&gt;&lt;li&gt;This field is required.&lt;/li&gt;&lt;/ul&gt;&lt;input type=&quot;text&quot; name=&quot;age&quot; id=&quot;id_age&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_label_split_datetime_not_displayed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">EventForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">happened_at</span> <span class="o">=</span> <span class="n">SplitDateTimeField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">SplitHiddenDateTimeWidget</span><span class="p">)</span>

        <span class="n">form</span> <span class="o">=</span> <span class="n">EventForm</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">as_ul</span><span class="p">(),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;happened_at_0&quot; id=&quot;id_happened_at_0&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;happened_at_1&quot; id=&quot;id_happened_at_1&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_multivalue_field_validation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">bad_names</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s">&#39;bad value&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&#39;bad value not allowed&#39;</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">NameField</span><span class="p">(</span><span class="n">MultiValueField</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;First name&#39;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
                          <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Last name&#39;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
                <span class="nb">super</span><span class="p">(</span><span class="n">NameField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">compress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_list</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">NameForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">NameField</span><span class="p">(</span><span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">bad_names</span><span class="p">])</span>

        <span class="n">form</span> <span class="o">=</span> <span class="n">NameForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;name&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;bad&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">]})</span>
        <span class="n">form</span><span class="o">.</span><span class="n">full_clean</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;bad value not allowed&#39;</span><span class="p">]})</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">NameForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;name&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;should be overly&#39;</span><span class="p">,</span> <span class="s">&#39;long for the field names&#39;</span><span class="p">]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;Ensure this value has at most 10 characters (it has 16).&#39;</span><span class="p">,</span>
                                                <span class="s">&#39;Ensure this value has at most 10 characters (it has 24).&#39;</span><span class="p">]})</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">NameForm</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;name&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;fname&#39;</span><span class="p">,</span> <span class="s">&#39;lname&#39;</span><span class="p">]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;name&#39;</span> <span class="p">:</span> <span class="s">&#39;fname lname&#39;</span><span class="p">})</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
