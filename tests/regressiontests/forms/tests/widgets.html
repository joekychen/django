<!DOCTYPE html>
<html><head><title>joekychen/django » tests › regressiontests › forms › tests › widgets.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>widgets.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div><p>-<em>- coding: utf-8 -</em>-</p></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.core.files.uploadedfile</span> <span class="kn">import</span> <span class="n">SimpleUploadedFile</span>
<span class="kn">from</span> <span class="nn">django.forms</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.forms.widgets</span> <span class="kn">import</span> <span class="n">RadioFieldRenderer</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">formats</span>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="kn">import</span> <span class="n">mark_safe</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">activate</span><span class="p">,</span> <span class="n">deactivate</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>


<span class="k">class</span> <span class="nc">FormsWidgetTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>Each Widget class corresponds to an HTML form widget. A Widget knows how to
render itself, given a field name and some data. Widgets don't perform
validation.</p></td><td class="code"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_textinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;some &quot;quoted&quot; &amp; ampersanded value&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;some &amp;quot;quoted&amp;quot; &amp;amp; ampersanded value&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; class=&quot;fun&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; class=&quot;fun&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>You can also pass 'attrs' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; class=&quot;fun&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; class=&quot;fun&quot; value=&quot;foo@example.com&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; class=&quot;special&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>'attrs' can be safe-strings if needed)</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;onBlur&#39;</span><span class="p">:</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&quot;function(&#39;foo&#39;)&quot;</span><span class="p">)})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input onBlur=&quot;function(</span><span class="se">\&#39;</span><span class="s">foo</span><span class="se">\&#39;</span><span class="s">)&quot; type=&quot;text&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_passwordinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">PasswordInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;secret&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>The render_value argument lets you specify whether the widget should render
its value. For security reasons, this is off by default.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">PasswordInput</span><span class="p">(</span><span class="n">render_value</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;some &quot;quoted&quot; &amp; ampersanded value&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; value=&quot;some &amp;quot;quoted&amp;quot; &amp;amp; ampersanded value&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; class=&quot;fun&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>You can also pass 'attrs' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">PasswordInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">},</span> <span class="n">render_value</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; class=&quot;fun&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; class=&quot;fun&quot; value=&quot;foo@example.com&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">PasswordInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">},</span> <span class="n">render_value</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; class=&quot;special&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;password&quot; class=&quot;fun&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_hiddeninput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">HiddenInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;some &quot;quoted&quot; &amp; ampersanded value&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;some &amp;quot;quoted&amp;quot; &amp;amp; ampersanded value&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; class=&quot;fun&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>You can also pass 'attrs' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">HiddenInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;fun&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;fun&quot; value=&quot;foo@example.com&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">HiddenInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;special&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;fun&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">HiddenInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;special&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>Boolean values are rendered to their string forms ("True" and "False").</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">HiddenInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;get_spam&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;get_spam&quot; value=&quot;False&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;get_spam&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;get_spam&quot; value=&quot;True&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_multiplehiddeninput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">MultipleHiddenInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[]),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test@example.com&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;some &quot;quoted&quot; &amp; ampersanded value&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;some &amp;quot;quoted&amp;quot; &amp;amp; ampersanded value&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; /&gt;</span><span class="se">\n</span><span class="s">&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;foo@example.com&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test@example.com&#39;</span><span class="p">],</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; class=&quot;fun&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">],</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;test@example.com&quot; class=&quot;fun&quot; /&gt;</span><span class="se">\n</span><span class="s">&lt;input type=&quot;hidden&quot; name=&quot;email&quot; value=&quot;foo@example.com&quot; class=&quot;fun&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>You can also pass 'attrs' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">MultipleHiddenInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[]),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo@example.com&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;fun&quot; value=&quot;foo@example.com&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo@example.com&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;fun&quot; value=&quot;foo@example.com&quot; name=&quot;email&quot; /&gt;</span><span class="se">\n</span><span class="s">&lt;input type=&quot;hidden&quot; class=&quot;fun&quot; value=&quot;test@example.com&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">MultipleHiddenInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo@example.com&#39;</span><span class="p">],</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;special&quot; value=&quot;foo@example.com&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">],</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;fun&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">MultipleHiddenInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo@example.com&#39;</span><span class="p">],</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; class=&quot;special&quot; value=&quot;foo@example.com&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>Each input gets a separate ID.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">MultipleHiddenInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;letters&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">),</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;hideme&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;letters&quot; value=&quot;a&quot; id=&quot;hideme_0&quot; /&gt;</span><span class="se">\n</span><span class="s">&lt;input type=&quot;hidden&quot; name=&quot;letters&quot; value=&quot;b&quot; id=&quot;hideme_1&quot; /&gt;</span><span class="se">\n</span><span class="s">&lt;input type=&quot;hidden&quot; name=&quot;letters&quot; value=&quot;c&quot; id=&quot;hideme_2&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_fileinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>FileInput widgets don't ever show the value, because the old value is of no use
if you are updating the form or if the provided file generated an error.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">FileInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;some &quot;quoted&quot; &amp; ampersanded value&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; name=&quot;email&quot; class=&quot;fun&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><p>You can also pass 'attrs' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">FileInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; class=&quot;fun&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;foo@example.com&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; class=&quot;fun&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;file&quot; class=&quot;fun&quot; name=&quot;email&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>Test for the behavior of <em>has</em>changed for FileInput. The value of data will
more than likely come from request.FILES. The value of initial data will
likely be a filename stored in the database. Since its value is of no use to
a FileInput it is ignored.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">FileInput</span><span class="p">()</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>No file was uploaded and no initial data.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-21"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-21">&#182;</a></div><p>A file was uploaded and no initial data.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;filename&#39;</span><span class="p">:</span> <span class="s">&#39;resume.txt&#39;</span><span class="p">,</span> <span class="s">&#39;content&#39;</span><span class="p">:</span> <span class="s">&#39;My resume&#39;</span><span class="p">}))</span></pre></div></td></tr>


<tr id="section-22"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-22">&#182;</a></div><p>A file was not uploaded, but there is initial data</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;resume.txt&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-23"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-23">&#182;</a></div><p>A file was uploaded and there is initial data (file identity is not dealt
with here)</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;resume.txt&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;filename&#39;</span><span class="p">:</span> <span class="s">&#39;resume.txt&#39;</span><span class="p">,</span> <span class="s">&#39;content&#39;</span><span class="p">:</span> <span class="s">&#39;My resume&#39;</span><span class="p">}))</span>

    <span class="k">def</span> <span class="nf">test_textarea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">Textarea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot;&gt;value&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;some &quot;quoted&quot; &amp; ampersanded value&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot;&gt;some &amp;quot;quoted&amp;quot; &amp;amp; ampersanded value&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&#39;pre &amp;quot;quoted&amp;quot; value&#39;</span><span class="p">)),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot;&gt;pre &amp;quot;quoted&amp;quot; value&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">,</span> <span class="s">&#39;rows&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}),</span> <span class="s">&#39;&lt;textarea class=&quot;pretty&quot; rows=&quot;20&quot; cols=&quot;40&quot; name=&quot;msg&quot;&gt;value&lt;/textarea&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-24"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-24">&#182;</a></div><p>You can also pass 'attrs' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">Textarea</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot; class=&quot;pretty&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;example&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot; class=&quot;pretty&quot;&gt;example&lt;/textarea&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-25"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-25">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">Textarea</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot; class=&quot;special&quot;&gt;&lt;/textarea&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;fun&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;textarea rows=&quot;10&quot; cols=&quot;40&quot; name=&quot;msg&quot; class=&quot;fun&quot;&gt;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&lt;/textarea&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_checkboxinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">CheckboxInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;is_cool&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;is_cool&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;is_cool&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;is_cool&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-26"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-26">&#182;</a></div><p>Using any value that's not in ('', None, False, True) will check the checkbox
and set the 'value' attribute.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;is_cool&quot; value=&quot;foo&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;is_cool&quot; class=&quot;pretty&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-27"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-27">&#182;</a></div><p>regression for #17114</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;is_cool&quot; value=&quot;0&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;is_cool&quot; value=&quot;1&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-28"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-28">&#182;</a></div><p>You can also pass 'attrs' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">CheckboxInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; class=&quot;pretty&quot; name=&quot;is_cool&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-29"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-29">&#182;</a></div><p>'attrs' passed to render() get precedence over those passed to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">CheckboxInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;special&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; class=&quot;special&quot; name=&quot;is_cool&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-30"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-30">&#182;</a></div><p>You can pass 'check_test' to the constructor. This is a callable that takes the
value and returns True if the box should be checked.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">CheckboxInput</span><span class="p">(</span><span class="n">check_test</span><span class="o">=</span><span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;hello&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;greeting&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;greeting&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;greeting&#39;</span><span class="p">,</span> <span class="s">&#39;hello&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;greeting&quot; value=&quot;hello&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;greeting&#39;</span><span class="p">,</span> <span class="s">&#39;hello there&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;greeting&quot; value=&quot;hello there&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;greeting&#39;</span><span class="p">,</span> <span class="s">&#39;hello &amp; goodbye&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;greeting&quot; value=&quot;hello &amp;amp; goodbye&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-31"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-31">&#182;</a></div><p>A subtlety: If the 'check<em>test' argument cannot handle a value and raises any
exception during its <strong>call</strong>, then the exception will be swallowed and the box
will not be checked. In this example, the 'check</em>test' assumes the value has a
startswith() method, which fails for the values True, False and None.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;greeting&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;greeting&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;greeting&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;greeting&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;greeting&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;checkbox&quot; name=&quot;greeting&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-32"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-32">&#182;</a></div><p>The CheckboxInput widget will return False if the key is not found in the data
dictionary (because HTML form submission doesn't send any result for unchecked
checkboxes).</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">value_from_datadict</span><span class="p">({},</span> <span class="p">{},</span> <span class="s">&#39;testing&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="s">&#39;on&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="s">&#39;on&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_select</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">Select</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;beatle&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot; selected=&quot;selected&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-33"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-33">&#182;</a></div><p>If the value is None, none of the options are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;beatle&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-34"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-34">&#182;</a></div><p>If the value corresponds to a label (but not to an option value), none of the options are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;beatle&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-35"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-35">&#182;</a></div><p>Only one option can be selected, see #8103:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;choices&#39;</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;extra&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;choices&quot;&gt;</span>
<span class="s">&lt;option value=&quot;0&quot; selected=&quot;selected&quot;&gt;0&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;0&quot;&gt;extra&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-36"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-36">&#182;</a></div><p>The value is compared to its str():</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-37"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-37">&#182;</a></div><p>The 'choices' argument can be any iterable:</p></td><td class="code"><div class="highlight"><pre>        <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
        <span class="k">def</span> <span class="nf">get_choices</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                <span class="k">yield</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">get_choices</span><span class="p">()),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">things</span> <span class="o">=</span> <span class="p">({</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;And Boom&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;One More Thing!&#39;</span><span class="p">})</span>
        <span class="k">class</span> <span class="nc">SomeForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">somechoice</span> <span class="o">=</span> <span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">chain</span><span class="p">(((</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="o">*</span><span class="mi">9</span><span class="p">),),</span> <span class="p">[(</span><span class="n">thing</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">],</span> <span class="n">thing</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">things</span><span class="p">]))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SomeForm</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_somechoice&quot;&gt;Somechoice:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;select name=&quot;somechoice&quot; id=&quot;id_somechoice&quot;&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;---------&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;1&quot;&gt;And Boom&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;2&quot;&gt;One More Thing!&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_somechoice&quot;&gt;Somechoice:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;select name=&quot;somechoice&quot; id=&quot;id_somechoice&quot;&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;---------&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;1&quot;&gt;And Boom&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;2&quot;&gt;One More Thing!&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SomeForm</span><span class="p">({</span><span class="s">&#39;somechoice&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">as_table</span><span class="p">(),</span> <span class="s">&#39;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_somechoice&quot;&gt;Somechoice:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;select name=&quot;somechoice&quot; id=&quot;id_somechoice&quot;&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;&quot;&gt;---------&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;1&quot;&gt;And Boom&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;One More Thing!&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-38"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-38">&#182;</a></div><p>You can also pass 'choices' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-39"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-39">&#182;</a></div><p>If 'choices' is passed to both the constructor and render(), then they'll both be in the output:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-40"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-40">&#182;</a></div><p>Choices are escaped correctly</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;escape&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;bad&#39;</span><span class="p">,</span> <span class="s">&#39;you &amp; me&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;good&#39;</span><span class="p">,</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&#39;you &amp;gt; me&#39;</span><span class="p">)))),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;escape&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;bad&quot;&gt;you &amp;amp; me&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;good&quot;&gt;you &amp;gt; me&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-41"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-41">&#182;</a></div><p>Unicode choices are correctly rendered as HTML</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐabcĆŽćžšđ&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;ćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;abcćžšđ&#39;</span><span class="p">)]),</span> <span class="s">&#39;&lt;select name=&quot;email&quot;&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; selected=&quot;selected&quot;&gt;</span><span class="se">\u0160\u0110</span><span class="s">abc</span><span class="se">\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&quot;&gt;abc</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;/select&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-42"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-42">&#182;</a></div><p>If choices is passed to the constructor and is a generator, it can be iterated
over multiple times without getting consumed:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">get_choices</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;num&quot;&gt;</span>
<span class="s">&lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-43"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-43">&#182;</a></div><p>Choices can be nested one level in order to create HTML optgroups:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span><span class="o">.</span><span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;outer1&#39;</span><span class="p">,</span> <span class="s">&#39;Outer 1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;Group &quot;1&quot;&#39;</span><span class="p">,</span> <span class="p">((</span><span class="s">&#39;inner1&#39;</span><span class="p">,</span> <span class="s">&#39;Inner 1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;inner2&#39;</span><span class="p">,</span> <span class="s">&#39;Inner 2&#39;</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nestchoice&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;nestchoice&quot;&gt;</span>
<span class="s">&lt;option value=&quot;outer1&quot;&gt;Outer 1&lt;/option&gt;</span>
<span class="s">&lt;optgroup label=&quot;Group &amp;quot;1&amp;quot;&quot;&gt;</span>
<span class="s">&lt;option value=&quot;inner1&quot;&gt;Inner 1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;inner2&quot;&gt;Inner 2&lt;/option&gt;</span>
<span class="s">&lt;/optgroup&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nestchoice&#39;</span><span class="p">,</span> <span class="s">&#39;outer1&#39;</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;nestchoice&quot;&gt;</span>
<span class="s">&lt;option value=&quot;outer1&quot; selected=&quot;selected&quot;&gt;Outer 1&lt;/option&gt;</span>
<span class="s">&lt;optgroup label=&quot;Group &amp;quot;1&amp;quot;&quot;&gt;</span>
<span class="s">&lt;option value=&quot;inner1&quot;&gt;Inner 1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;inner2&quot;&gt;Inner 2&lt;/option&gt;</span>
<span class="s">&lt;/optgroup&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nestchoice&#39;</span><span class="p">,</span> <span class="s">&#39;inner1&#39;</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;nestchoice&quot;&gt;</span>
<span class="s">&lt;option value=&quot;outer1&quot;&gt;Outer 1&lt;/option&gt;</span>
<span class="s">&lt;optgroup label=&quot;Group &amp;quot;1&amp;quot;&quot;&gt;</span>
<span class="s">&lt;option value=&quot;inner1&quot; selected=&quot;selected&quot;&gt;Inner 1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;inner2&quot;&gt;Inner 2&lt;/option&gt;</span>
<span class="s">&lt;/optgroup&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_nullbooleanselect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">NullBooleanSelect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;is_cool&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select name=&quot;is_cool&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;Unknown&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;Yes&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;No&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_selectmultiple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">SelectMultiple</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;beatles&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot; selected=&quot;selected&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;beatles&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot; selected=&quot;selected&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot; selected=&quot;selected&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;R&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;beatles&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot; selected=&quot;selected&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot; selected=&quot;selected&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot; selected=&quot;selected&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-44"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-44">&#182;</a></div><p>If the value is None, none of the options are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;beatles&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-45"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-45">&#182;</a></div><p>If the value corresponds to a label (but not to an option value), none of the options are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;John&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;beatles&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-46"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-46">&#182;</a></div><p>Multiple options (with the same value) can be selected, see #8103:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;choices&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;0&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;extra&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;choices&quot;&gt;</span>
<span class="s">&lt;option value=&quot;0&quot; selected=&quot;selected&quot;&gt;0&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;0&quot; selected=&quot;selected&quot;&gt;extra&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-47"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-47">&#182;</a></div><p>If multiple values are given, but some of them are not valid, the valid ones are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;beatles&quot;&gt;</span>
<span class="s">&lt;option value=&quot;J&quot; selected=&quot;selected&quot;&gt;John&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;P&quot;&gt;Paul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;G&quot; selected=&quot;selected&quot;&gt;George&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;R&quot;&gt;Ringo&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-48"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-48">&#182;</a></div><p>The value is compared to its str():</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nums&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nums&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nums&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-49"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-49">&#182;</a></div><p>The 'choices' argument can be any iterable:</p></td><td class="code"><div class="highlight"><pre>        <span class="k">def</span> <span class="nf">get_choices</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                <span class="k">yield</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="n">get_choices</span><span class="p">()),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nums&quot;&gt;</span>
<span class="s">&lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-50"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-50">&#182;</a></div><p>You can also pass 'choices' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">SelectMultiple</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nums&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-51"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-51">&#182;</a></div><p>If 'choices' is passed to both the constructor and render(), then they'll both be in the output:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nums&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-52"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-52">&#182;</a></div><p>Choices are escaped correctly</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;escape&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;bad&#39;</span><span class="p">,</span> <span class="s">&#39;you &amp; me&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;good&#39;</span><span class="p">,</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&#39;you &amp;gt; me&#39;</span><span class="p">)))),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;escape&quot;&gt;</span>
<span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;bad&quot;&gt;you &amp;amp; me&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;good&quot;&gt;you &amp;gt; me&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-53"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-53">&#182;</a></div><p>Unicode choices are correctly rendered as HTML</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐabcĆŽćžšđ&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;ćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;abcćžšđ&#39;</span><span class="p">)]),</span> <span class="s">&#39;&lt;select multiple=&quot;multiple&quot; name=&quot;nums&quot;&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; selected=&quot;selected&quot;&gt;</span><span class="se">\u0160\u0110</span><span class="s">abc</span><span class="se">\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&quot;&gt;abc</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;/select&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-54"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-54">&#182;</a></div><p>Test the usage of <em>has</em>changed</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([],</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">]))</span></pre></div></td></tr>


<tr id="section-55"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-55">&#182;</a></div><p>Choices can be nested one level in order to create HTML optgroups:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;outer1&#39;</span><span class="p">,</span> <span class="s">&#39;Outer 1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;Group &quot;1&quot;&#39;</span><span class="p">,</span> <span class="p">((</span><span class="s">&#39;inner1&#39;</span><span class="p">,</span> <span class="s">&#39;Inner 1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;inner2&#39;</span><span class="p">,</span> <span class="s">&#39;Inner 2&#39;</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nestchoice&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nestchoice&quot;&gt;</span>
<span class="s">&lt;option value=&quot;outer1&quot;&gt;Outer 1&lt;/option&gt;</span>
<span class="s">&lt;optgroup label=&quot;Group &amp;quot;1&amp;quot;&quot;&gt;</span>
<span class="s">&lt;option value=&quot;inner1&quot;&gt;Inner 1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;inner2&quot;&gt;Inner 2&lt;/option&gt;</span>
<span class="s">&lt;/optgroup&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nestchoice&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;outer1&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nestchoice&quot;&gt;</span>
<span class="s">&lt;option value=&quot;outer1&quot; selected=&quot;selected&quot;&gt;Outer 1&lt;/option&gt;</span>
<span class="s">&lt;optgroup label=&quot;Group &amp;quot;1&amp;quot;&quot;&gt;</span>
<span class="s">&lt;option value=&quot;inner1&quot;&gt;Inner 1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;inner2&quot;&gt;Inner 2&lt;/option&gt;</span>
<span class="s">&lt;/optgroup&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nestchoice&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;inner1&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nestchoice&quot;&gt;</span>
<span class="s">&lt;option value=&quot;outer1&quot;&gt;Outer 1&lt;/option&gt;</span>
<span class="s">&lt;optgroup label=&quot;Group &amp;quot;1&amp;quot;&quot;&gt;</span>
<span class="s">&lt;option value=&quot;inner1&quot; selected=&quot;selected&quot;&gt;Inner 1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;inner2&quot;&gt;Inner 2&lt;/option&gt;</span>
<span class="s">&lt;/optgroup&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nestchoice&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;outer1&#39;</span><span class="p">,</span> <span class="s">&#39;inner2&#39;</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;select multiple=&quot;multiple&quot; name=&quot;nestchoice&quot;&gt;</span>
<span class="s">&lt;option value=&quot;outer1&quot; selected=&quot;selected&quot;&gt;Outer 1&lt;/option&gt;</span>
<span class="s">&lt;optgroup label=&quot;Group &amp;quot;1&amp;quot;&quot;&gt;</span>
<span class="s">&lt;option value=&quot;inner1&quot;&gt;Inner 1&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;inner2&quot; selected=&quot;selected&quot;&gt;Inner 2&lt;/option&gt;</span>
<span class="s">&lt;/optgroup&gt;</span>
<span class="s">&lt;/select&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_radioselect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-56"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-56">&#182;</a></div><p>If the value is None, none of the options are checked:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-57"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-57">&#182;</a></div><p>If the value corresponds to a label (but not to an option value), none of the options are checked:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-58"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-58">&#182;</a></div><p>The value is compared to its str():</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;num&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;num&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;num&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-59"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-59">&#182;</a></div><p>The 'choices' argument can be any iterable:</p></td><td class="code"><div class="highlight"><pre>        <span class="k">def</span> <span class="nf">get_choices</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                <span class="k">yield</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">get_choices</span><span class="p">()),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;0&quot; /&gt; 0&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;num&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;4&quot; /&gt; 4&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-60"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-60">&#182;</a></div><p>You can also pass 'choices' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;num&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-61"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-61">&#182;</a></div><p>If 'choices' is passed to both the constructor and render(), then they'll both be in the output:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;num&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;num&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;4&quot; /&gt; 4&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;num&quot; value=&quot;5&quot; /&gt; 5&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-62"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-62">&#182;</a></div><p>RadioSelect uses a RadioFieldRenderer to render the individual radio inputs.
You can manipulate that object directly to customize the way the RadioSelect
is rendered.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">get_renderer</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">)))</span>
        <span class="n">inp_set1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">inp_set2</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">inp_set3</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">inp_set4</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">inp</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
            <span class="n">inp_set1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">inp</span><span class="p">))</span>
            <span class="n">inp_set2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&lt;br /&gt;&#39;</span> <span class="o">%</span> <span class="n">inp</span><span class="p">)</span>
            <span class="n">inp_set3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;&lt;p&gt;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">tag</span><span class="p">(),</span> <span class="n">inp</span><span class="o">.</span><span class="n">choice_label</span><span class="p">))</span>
            <span class="n">inp_set4</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">inp</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">inp</span><span class="o">.</span><span class="n">choice_value</span><span class="p">,</span> <span class="n">inp</span><span class="o">.</span><span class="n">choice_label</span><span class="p">,</span> <span class="n">inp</span><span class="o">.</span><span class="n">is_checked</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inp_set1</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inp_set2</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;br /&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inp_set3</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;&lt;p&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/p&gt;</span>
<span class="s">&lt;p&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/p&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inp_set4</span><span class="p">),</span> <span class="s">&quot;&quot;&quot;beatle J J John True</span>
<span class="s">beatle J P Paul False</span>
<span class="s">beatle J G George False</span>
<span class="s">beatle J R Ringo False&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-63"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-63">&#182;</a></div><p>You can create your own custom renderers for RadioSelect to use.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">MyRenderer</span><span class="p">(</span><span class="n">RadioFieldRenderer</span><span class="p">):</span>
           <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
               <span class="k">return</span> <span class="s">&#39;&lt;br /&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">unicode</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span> <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="n">MyRenderer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-64"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-64">&#182;</a></div><p>Or you can use custom RadioSelect fields that use your custom renderer.</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">CustomRadioSelect</span><span class="p">(</span><span class="n">RadioSelect</span><span class="p">):</span>
           <span class="n">renderer</span> <span class="o">=</span> <span class="n">MyRenderer</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">CustomRadioSelect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;br /&gt;</span>
<span class="s">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-65"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-65">&#182;</a></div><p>A RadioFieldRenderer object also allows index access to individual RadioInput</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">get_renderer</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s">&#39;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s">&#39;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;beatle&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_checked</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">is_checked</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">((</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">choice_value</span><span class="p">,</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">choice_label</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">r</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;This offset should not exist.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">pass</span></pre></div></td></tr>


<tr id="section-66"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-66">&#182;</a></div><p>Choices are escaped correctly</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;escape&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;bad&#39;</span><span class="p">,</span> <span class="s">&#39;you &amp; me&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;good&#39;</span><span class="p">,</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&#39;you &amp;gt; me&#39;</span><span class="p">)))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;escape&quot; value=&quot;bad&quot; /&gt; you &amp;amp; me&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;escape&quot; value=&quot;good&quot; /&gt; you &amp;gt; me&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-67"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-67">&#182;</a></div><p>Unicode choices are correctly rendered as HTML</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐabcĆŽćžšđ&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;ćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;abcćžšđ&#39;</span><span class="p">)])),</span> <span class="s">&#39;&lt;ul&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; name=&quot;email&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; /&gt; </span><span class="se">\u0160\u0110</span><span class="s">abc</span><span class="se">\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&lt;/label&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;email&quot; value=&quot;</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&quot; /&gt; abc</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&lt;/label&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;/ul&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-68"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-68">&#182;</a></div><p>Attributes provided at instantiation are passed to the constituent inputs</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;foo&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;foo_0&quot;&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; id=&quot;foo_0&quot; value=&quot;J&quot; name=&quot;beatle&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;foo_1&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;foo_1&quot; value=&quot;P&quot; name=&quot;beatle&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;foo_2&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;foo_2&quot; value=&quot;G&quot; name=&quot;beatle&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;foo_3&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;foo_3&quot; value=&quot;R&quot; name=&quot;beatle&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-69"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-69">&#182;</a></div><p>Attributes provided at render-time are passed to the constituent inputs</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">RadioSelect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatle&#39;</span><span class="p">,</span> <span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">)),</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;bar&#39;</span><span class="p">}),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;bar_0&quot;&gt;&lt;input checked=&quot;checked&quot; type=&quot;radio&quot; id=&quot;bar_0&quot; value=&quot;J&quot; name=&quot;beatle&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;bar_1&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;bar_1&quot; value=&quot;P&quot; name=&quot;beatle&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;bar_2&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;bar_2&quot; value=&quot;G&quot; name=&quot;beatle&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;bar_3&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;bar_3&quot; value=&quot;R&quot; name=&quot;beatle&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_checkboxselectmultiple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">CheckboxSelectMultiple</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;R&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-70"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-70">&#182;</a></div><p>If the value is None, none of the options are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-71"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-71">&#182;</a></div><p>If the value corresponds to a label (but not to an option value), none of the options are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;John&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-72"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-72">&#182;</a></div><p>If multiple values are given, but some of them are not valid, the valid ones are selected:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;beatles&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;J&#39;</span><span class="p">,</span> <span class="s">&#39;John&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;Paul&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;George&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="s">&#39;Ringo&#39;</span><span class="p">))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;J&quot; /&gt; John&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;P&quot; /&gt; Paul&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;G&quot; /&gt; George&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;beatles&quot; value=&quot;R&quot; /&gt; Ringo&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-73"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-73">&#182;</a></div><p>The value is compared to its str():</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;2&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-74"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-74">&#182;</a></div><p>The 'choices' argument can be any iterable:</p></td><td class="code"><div class="highlight"><pre>        <span class="k">def</span> <span class="nf">get_choices</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                <span class="k">yield</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="n">get_choices</span><span class="p">()),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;0&quot; /&gt; 0&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;4&quot; /&gt; 4&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-75"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-75">&#182;</a></div><p>You can also pass 'choices' to the constructor:</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">CheckboxSelectMultiple</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-76"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-76">&#182;</a></div><p>If 'choices' is passed to both the constructor and render(), then they'll both be in the output:</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;4&quot; /&gt; 4&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;5&quot; /&gt; 5&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-77"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-77">&#182;</a></div><p>Choices are escaped correctly</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;escape&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="s">&#39;bad&#39;</span><span class="p">,</span> <span class="s">&#39;you &amp; me&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;good&#39;</span><span class="p">,</span> <span class="n">mark_safe</span><span class="p">(</span><span class="s">&#39;you &amp;gt; me&#39;</span><span class="p">)))),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;escape&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;escape&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;escape&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;escape&quot; value=&quot;bad&quot; /&gt; you &amp;amp; me&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;escape&quot; value=&quot;good&quot; /&gt; you &amp;gt; me&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-78"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-78">&#182;</a></div><p>Test the usage of <em>has</em>changed</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([],</span> <span class="bp">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">]))</span></pre></div></td></tr>


<tr id="section-79"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-79">&#182;</a></div><p>Unicode choices are correctly rendered as HTML</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;nums&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">],</span> <span class="n">choices</span><span class="o">=</span><span class="p">[(</span><span class="s">&#39;ŠĐĆŽćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;ŠĐabcĆŽćžšđ&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;ćžšđ&#39;</span><span class="p">,</span> <span class="s">&#39;abcćžšđ&#39;</span><span class="p">)]),</span> <span class="s">&#39;&lt;ul&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;1&quot; /&gt; 1&lt;/label&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;2&quot; /&gt; 2&lt;/label&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;3&quot; /&gt; 3&lt;/label&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;</span><span class="se">\u0160\u0110\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&quot; /&gt; </span><span class="se">\u0160\u0110</span><span class="s">abc</span><span class="se">\u0106\u017d\u0107\u017e\u0161\u0111</span><span class="s">&lt;/label&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;li&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;nums&quot; value=&quot;</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&quot; /&gt; abc</span><span class="se">\u0107\u017e\u0161\u0111</span><span class="s">&lt;/label&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s">&lt;/ul&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-80"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-80">&#182;</a></div><p>Each input gets a separate ID</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">CheckboxSelectMultiple</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;letters&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ac&#39;</span><span class="p">),</span> <span class="n">choices</span><span class="o">=</span><span class="nb">zip</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">)),</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;abc&#39;</span><span class="p">}),</span> <span class="s">&quot;&quot;&quot;&lt;ul&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;abc_0&quot;&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;letters&quot; value=&quot;a&quot; id=&quot;abc_0&quot; /&gt; A&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;abc_1&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;letters&quot; value=&quot;b&quot; id=&quot;abc_1&quot; /&gt; B&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;li&gt;&lt;label for=&quot;abc_2&quot;&gt;&lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot; name=&quot;letters&quot; value=&quot;c&quot; id=&quot;abc_2&quot; /&gt; C&lt;/label&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ul&gt;&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_multi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">MyMultiWidget</span><span class="p">(</span><span class="n">MultiWidget</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">decompress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]</span>
            <span class="k">def</span> <span class="nf">format_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rendered_widgets</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;&lt;br /&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rendered_widgets</span><span class="p">)</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">MyMultiWidget</span><span class="p">(</span><span class="n">widgets</span><span class="o">=</span><span class="p">(</span><span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;big&#39;</span><span class="p">}),</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;small&#39;</span><span class="p">})))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;lennon&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; class=&quot;big&quot; value=&quot;john&quot; name=&quot;name_0&quot; /&gt;&lt;br /&gt;&lt;input type=&quot;text&quot; class=&quot;small&quot; value=&quot;lennon&quot; name=&quot;name_1&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;john__lennon&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; class=&quot;big&quot; value=&quot;john&quot; name=&quot;name_0&quot; /&gt;&lt;br /&gt;&lt;input type=&quot;text&quot; class=&quot;small&quot; value=&quot;lennon&quot; name=&quot;name_1&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;john__lennon&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;foo&#39;</span><span class="p">}),</span> <span class="s">&#39;&lt;input id=&quot;foo_0&quot; type=&quot;text&quot; class=&quot;big&quot; value=&quot;john&quot; name=&quot;name_0&quot; /&gt;&lt;br /&gt;&lt;input id=&quot;foo_1&quot; type=&quot;text&quot; class=&quot;small&quot; value=&quot;lennon&quot; name=&quot;name_1&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">MyMultiWidget</span><span class="p">(</span><span class="n">widgets</span><span class="o">=</span><span class="p">(</span><span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;big&#39;</span><span class="p">}),</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;small&#39;</span><span class="p">})),</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;lennon&#39;</span><span class="p">]),</span> <span class="s">&#39;&lt;input id=&quot;bar_0&quot; type=&quot;text&quot; class=&quot;big&quot; value=&quot;john&quot; name=&quot;name_0&quot; /&gt;&lt;br /&gt;&lt;input id=&quot;bar_1&quot; type=&quot;text&quot; class=&quot;small&quot; value=&quot;lennon&quot; name=&quot;name_1&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">MyMultiWidget</span><span class="p">(</span><span class="n">widgets</span><span class="o">=</span><span class="p">(</span><span class="n">TextInput</span><span class="p">(),</span> <span class="n">TextInput</span><span class="p">()))</span></pre></div></td></tr>


<tr id="section-81"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-81">&#182;</a></div><p>test with no initial data</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;lennon&#39;</span><span class="p">]))</span></pre></div></td></tr>


<tr id="section-82"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-82">&#182;</a></div><p>test when the data is the same as initial</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;john__lennon&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;lennon&#39;</span><span class="p">]))</span></pre></div></td></tr>


<tr id="section-83"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-83">&#182;</a></div><p>test when the first widget's data has changed</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;john__lennon&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;alfred&#39;</span><span class="p">,</span> <span class="s">&#39;lennon&#39;</span><span class="p">]))</span></pre></div></td></tr>


<tr id="section-84"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-84">&#182;</a></div><p>test when the last widget's data has changed. this ensures that it is not
short circuiting while testing the widgets.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="s">&#39;john__lennon&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;john&#39;</span><span class="p">,</span> <span class="s">&#39;denver&#39;</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">test_splitdatetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">SplitDateTimeWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date_0&quot; /&gt;&lt;input type=&quot;text&quot; name=&quot;date_1&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date_0&quot; /&gt;&lt;input type=&quot;text&quot; name=&quot;date_1&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date_0&quot; value=&quot;2006-01-10&quot; /&gt;&lt;input type=&quot;text&quot; name=&quot;date_1&quot; value=&quot;07:30:00&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">)]),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date_0&quot; value=&quot;2006-01-10&quot; /&gt;&lt;input type=&quot;text&quot; name=&quot;date_1&quot; value=&quot;07:30:00&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-85"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-85">&#182;</a></div><p>You can also pass 'attrs' to the constructor. In this case, the attrs will be</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">SplitDateTimeWidget</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;pretty&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; class=&quot;pretty&quot; value=&quot;2006-01-10&quot; name=&quot;date_0&quot; /&gt;&lt;input type=&quot;text&quot; class=&quot;pretty&quot; value=&quot;07:30:00&quot; name=&quot;date_1&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-86"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-86">&#182;</a></div><p>Use 'date<em>format' and 'time</em>format' to change the way a value is displayed.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">SplitDateTimeWidget</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">/%m/%Y&#39;</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s">&#39;%H:%M&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2006</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date_0&quot; value=&quot;10/01/2006&quot; /&gt;&lt;input type=&quot;text&quot; name=&quot;date_1&quot; value=&quot;07:30&quot; /&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mo">00</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;2008-05-06&#39;</span><span class="p">,</span> <span class="s">&#39;12:40:00&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mo">00</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;06/05/2008&#39;</span><span class="p">,</span> <span class="s">&#39;12:40&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mo">00</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;06/05/2008&#39;</span><span class="p">,</span> <span class="s">&#39;12:41&#39;</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">test_datetimeinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">DateTimeInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">482548</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="s">&#39;2007-09-17 12:51:34.482548&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-87"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-87">&#182;</a></div><p>The microseconds are trimmed on display, by default.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;2007-09-17 12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;2007-09-17 12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;2007-09-17 12:51:00&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-88"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-88">&#182;</a></div><p>Use 'format' to change the way a value is displayed.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">DateTimeInput</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">/%m/%Y %H:%M&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;17/09/2007 12:51&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s">&#39;17/09/2007 12:51&#39;</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-89"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-89">&#182;</a></div><p>Make sure a custom format works with <em>has</em>changed. The hidden input will use</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">custom_format</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s">.%m.%Y %H:%M&#39;</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">DateTimeInput</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="n">custom_format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">formats</span><span class="o">.</span><span class="n">localize_input</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">custom_format</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">test_dateinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">DateInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="s">&#39;2007-09-17&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;2007-09-17&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;2007-09-17&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-90"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-90">&#182;</a></div><p>We should be able to initialize from a unicode value.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="s">&#39;2007-09-17&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;2007-09-17&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-91"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-91">&#182;</a></div><p>Use 'format' to change the way a value is displayed.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">DateInput</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">/%m/%Y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;17/09/2007&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s">&#39;17/09/2007&#39;</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-92"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-92">&#182;</a></div><p>Make sure a custom format works with <em>has</em>changed. The hidden input will use</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">custom_format</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%d</span><span class="s">.%m.%Y&#39;</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">DateInput</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="n">custom_format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">formats</span><span class="o">.</span><span class="n">localize_input</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">custom_format</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">test_timeinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">TimeInput</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;time&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">482548</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="s">&#39;12:51:34.482548&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-93"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-93">&#182;</a></div><p>The microseconds are trimmed on display, by default.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;time&quot; value=&quot;12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;time&quot; value=&quot;12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;time&quot; value=&quot;12:51:00&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-94"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-94">&#182;</a></div><p>We should be able to initialize from a unicode value.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="s">&#39;13:12:11&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;time&quot; value=&quot;13:12:11&quot; /&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-95"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-95">&#182;</a></div><p>Use 'format' to change the way a value is displayed.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w</span> <span class="o">=</span> <span class="n">TimeInput</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;%H:%M&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;time&quot; value=&quot;12:51&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&#39;12:51&#39;</span><span class="p">))</span></pre></div></td></tr>


<tr id="section-96"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-96">&#182;</a></div><p>Make sure a custom format works with <em>has</em>changed. The hidden input will use</p></td><td class="code"><div class="highlight"><pre>        <span class="n">data</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">custom_format</span> <span class="o">=</span> <span class="s">&#39;%I:%M %p&#39;</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">TimeInput</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="n">custom_format</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">formats</span><span class="o">.</span><span class="n">localize_input</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">custom_format</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">test_splithiddendatetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">django.forms.widgets</span> <span class="kn">import</span> <span class="n">SplitHiddenDateTimeWidget</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">SplitHiddenDateTimeWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;date_0&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;date_1&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">482548</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="s">&#39;2007-09-17 12:51:34.482548&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;date_0&quot; value=&quot;2007-09-17&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;date_1&quot; value=&quot;12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;date_0&quot; value=&quot;2007-09-17&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;date_1&quot; value=&quot;12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;date_0&quot; value=&quot;2007-09-17&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;date_1&quot; value=&quot;12:51:00&quot; /&gt;&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">NullBooleanSelectLazyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Form to test for lazy evaluation. Refs #17190&quot;&quot;&quot;</span>
    <span class="nb">bool</span> <span class="o">=</span> <span class="n">BooleanField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">NullBooleanSelect</span><span class="p">())</span>

<span class="k">class</span> <span class="nc">FormsI18NWidgetsTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FormsI18NWidgetsTestCase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">setUp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">old_use_l10n</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s">&#39;USE_L10N&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">USE_L10N</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">activate</span><span class="p">(</span><span class="s">&#39;de-at&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">deactivate</span><span class="p">()</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">USE_L10N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">old_use_l10n</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FormsI18NWidgetsTestCase</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">tearDown</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_splitdatetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">SplitDateTimeWidget</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">/%m/%Y&#39;</span><span class="p">,</span> <span class="n">time_format</span><span class="o">=</span><span class="s">&#39;%H:%M&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">_has_changed</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mo">00</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;06.05.2008&#39;</span><span class="p">,</span> <span class="s">&#39;12:41&#39;</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">test_datetimeinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">DateTimeInput</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">482548</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">is_localized</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;17.09.2007 12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_dateinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">DateInput</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">is_localized</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;date&quot; value=&quot;17.09.2007&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_timeinput</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">TimeInput</span><span class="p">()</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">482548</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">is_localized</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">),</span> <span class="s">&#39;&lt;input type=&quot;text&quot; name=&quot;time&quot; value=&quot;12:51:34&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_splithiddendatetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">django.forms.widgets</span> <span class="kn">import</span> <span class="n">SplitHiddenDateTimeWidget</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">SplitHiddenDateTimeWidget</span><span class="p">()</span>
        <span class="n">w</span><span class="o">.</span><span class="n">is_localized</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">51</span><span class="p">)),</span> <span class="s">&#39;&lt;input type=&quot;hidden&quot; name=&quot;date_0&quot; value=&quot;17.09.2007&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;date_1&quot; value=&quot;12:51:00&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_nullbooleanselect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensure that the NullBooleanSelect widget&#39;s options are lazily</span>
<span class="sd">        localized.</span>
<span class="sd">        Refs #17190</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">NullBooleanSelectLazyForm</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;bool&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;id_bool&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="s">&#39;&lt;select name=&quot;id_bool&quot;&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;1&quot;&gt;Unbekannt&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Ja&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;option value=&quot;3&quot;&gt;Nein&lt;/option&gt;</span><span class="se">\n</span><span class="s">&lt;/select&gt;&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SelectAndTextWidget</span><span class="p">(</span><span class="n">MultiWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MultiWidget subclass</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[]):</span>
        <span class="n">widgets</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">RadioSelect</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">choices</span><span class="p">),</span>
            <span class="n">TextInput</span>
        <span class="p">]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SelectAndTextWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">widgets</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        When choices are set for this widget, we want to pass those along to the Select widget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widgets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="n">choices</span>
    <span class="k">def</span> <span class="nf">_get_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The choices for this widget are the Select widget&#39;s choices</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">choices</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_choices</span><span class="p">,</span> <span class="n">_set_choices</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WidgetTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_12048</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-97"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-97">&#182;</a></div><p>See ticket #12048.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">w1</span> <span class="o">=</span> <span class="n">SelectAndTextWidget</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">w2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">w1</span><span class="p">)</span>
        <span class="n">w2</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span></pre></div></td></tr>


<tr id="section-98"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-98">&#182;</a></div><p>w2 ought to be independent of w1, since MultiWidget ought
to make a copy of its sub-widgets when it is copied.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">w1</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_13390</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-99"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-99">&#182;</a></div><p>See ticket #13390</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">SplitDateForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">SplitDateTimeWidget</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="n">form</span> <span class="o">=</span> <span class="n">SplitDateForm</span><span class="p">({</span><span class="s">&#39;field&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">SplitDateForm</span><span class="p">({</span><span class="s">&#39;field&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>

        <span class="k">class</span> <span class="nc">SplitDateRequiredForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">SplitDateTimeWidget</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">form</span> <span class="o">=</span> <span class="n">SplitDateRequiredForm</span><span class="p">({</span><span class="s">&#39;field&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">SplitDateRequiredForm</span><span class="p">({</span><span class="s">&#39;field&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">FakeFieldFile</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quacks like a FieldFile (has a .url and unicode representation), but</span>
<span class="sd">    doesn&#39;t require us to care about storages etc.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;something&#39;</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>

<span class="k">class</span> <span class="nc">ClearableFileInputTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_clear_input_renders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A ClearableFileInput with is_required False and rendered with</span>
<span class="sd">        an initial value that is a file renders a clear checkbox.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">ClearableFileInput</span><span class="p">()</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">is_required</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;myfile&#39;</span><span class="p">,</span> <span class="n">FakeFieldFile</span><span class="p">()),</span>
                         <span class="s">&#39;Currently: &lt;a href=&quot;something&quot;&gt;something&lt;/a&gt; &lt;input type=&quot;checkbox&quot; name=&quot;myfile-clear&quot; id=&quot;myfile-clear_id&quot; /&gt; &lt;label for=&quot;myfile-clear_id&quot;&gt;Clear&lt;/label&gt;&lt;br /&gt;Change: &lt;input type=&quot;file&quot; name=&quot;myfile&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_html_escaped</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A ClearableFileInput should escape name, filename and URL when</span>
<span class="sd">        rendering HTML. Refs #15182.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">StrangeFieldFile</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;something?chapter=1&amp;sect=2&amp;copy=3&amp;lang=en&quot;</span>

            <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;&#39;&#39;something&lt;div onclick=&quot;alert(&#39;oops&#39;)&quot;&gt;.jpg&#39;&#39;&#39;</span>

        <span class="n">widget</span> <span class="o">=</span> <span class="n">ClearableFileInput</span><span class="p">()</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">StrangeFieldFile</span><span class="p">()</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;my&lt;div&gt;file&#39;</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">url</span> <span class="ow">in</span> <span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s">&#39;href=&quot;something?chapter=1&amp;amp;sect=2&amp;amp;copy=3&amp;amp;lang=en&quot;&#39;</span> <span class="ow">in</span> <span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="ow">in</span> <span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s">&#39;something&amp;lt;div onclick=&amp;quot;alert(&amp;#39;oops&amp;#39;)&amp;quot;&amp;gt;.jpg&#39;</span> <span class="ow">in</span> <span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s">&#39;my&amp;lt;div&amp;gt;file&#39;</span> <span class="ow">in</span> <span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="s">&#39;my&lt;div&gt;file&#39;</span> <span class="ow">in</span> <span class="n">output</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_clear_input_renders_only_if_not_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A ClearableFileInput with is_required=False does not render a clear</span>
<span class="sd">        checkbox.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">ClearableFileInput</span><span class="p">()</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">is_required</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;myfile&#39;</span><span class="p">,</span> <span class="n">FakeFieldFile</span><span class="p">()),</span>
                         <span class="s">&#39;Currently: &lt;a href=&quot;something&quot;&gt;something&lt;/a&gt; &lt;br /&gt;Change: &lt;input type=&quot;file&quot; name=&quot;myfile&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_clear_input_renders_only_if_initial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A ClearableFileInput instantiated with no initial value does not render</span>
<span class="sd">        a clear checkbox.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">ClearableFileInput</span><span class="p">()</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">is_required</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;myfile&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span>
                         <span class="s">&#39;&lt;input type=&quot;file&quot; name=&quot;myfile&quot; /&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_clear_input_checked_returns_false</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ClearableFileInput.value_from_datadict returns False if the clear</span>
<span class="sd">        checkbox is checked, if not required.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">ClearableFileInput</span><span class="p">()</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">is_required</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">value_from_datadict</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;myfile-clear&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
                <span class="n">files</span><span class="o">=</span><span class="p">{},</span>
                <span class="n">name</span><span class="o">=</span><span class="s">&#39;myfile&#39;</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_clear_input_checked_returns_false_only_if_not_required</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ClearableFileInput.value_from_datadict never returns False if the field</span>
<span class="sd">        is required.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">ClearableFileInput</span><span class="p">()</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">is_required</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">SimpleUploadedFile</span><span class="p">(</span><span class="s">&#39;something.txt&#39;</span><span class="p">,</span> <span class="n">b</span><span class="s">&#39;content&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">value_from_datadict</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;myfile-clear&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
                <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;myfile&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">},</span>
                <span class="n">name</span><span class="o">=</span><span class="s">&#39;myfile&#39;</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
