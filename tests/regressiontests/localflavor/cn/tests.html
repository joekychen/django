<!DOCTYPE html>
<html><head><title>joekychen/django » tests › regressiontests › localflavor › cn › tests.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>tests.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div><p>Tests for contrib/localflavor/ CN Form Fields</p></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">from</span> <span class="nn">django.contrib.localflavor.cn.forms</span> <span class="kn">import</span> <span class="p">(</span><span class="n">CNProvinceSelect</span><span class="p">,</span>
        <span class="n">CNPostCodeField</span><span class="p">,</span> <span class="n">CNIDCardField</span><span class="p">,</span> <span class="n">CNPhoneNumberField</span><span class="p">,</span> <span class="n">CNCellNumberField</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">SimpleTestCase</span>

<span class="k">class</span> <span class="nc">CNLocalFlavorTests</span><span class="p">(</span><span class="n">SimpleTestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_CNProvinceSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">CNProvinceSelect</span><span class="p">()</span>
        <span class="n">correct_output</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;&lt;select name=&quot;provinces&quot;&gt;</span>
<span class="s">&lt;option value=&quot;anhui&quot;&gt;</span><span class="se">\u5b89\u5fbd</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;beijing&quot;&gt;</span><span class="se">\u5317\u4eac</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;chongqing&quot;&gt;</span><span class="se">\u91cd\u5e86</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;fujian&quot;&gt;</span><span class="se">\u798f\u5efa</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;gansu&quot;&gt;</span><span class="se">\u7518\u8083</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;guangdong&quot;&gt;</span><span class="se">\u5e7f\u4e1c</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;guangxi&quot;&gt;</span><span class="se">\u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;guizhou&quot;&gt;</span><span class="se">\u8d35\u5dde</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;hainan&quot;&gt;</span><span class="se">\u6d77\u5357</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;hebei&quot;&gt;</span><span class="se">\u6cb3\u5317</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;heilongjiang&quot;&gt;</span><span class="se">\u9ed1\u9f99\u6c5f</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;henan&quot;&gt;</span><span class="se">\u6cb3\u5357</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;hongkong&quot;&gt;</span><span class="se">\u9999\u6e2f</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;hubei&quot; selected=&quot;selected&quot;&gt;</span><span class="se">\u6e56\u5317</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;hunan&quot;&gt;</span><span class="se">\u6e56\u5357</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;jiangsu&quot;&gt;</span><span class="se">\u6c5f\u82cf</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;jiangxi&quot;&gt;</span><span class="se">\u6c5f\u897f</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;jilin&quot;&gt;</span><span class="se">\u5409\u6797</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;liaoning&quot;&gt;</span><span class="se">\u8fbd\u5b81</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;macao&quot;&gt;</span><span class="se">\u6fb3\u95e8</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;neimongol&quot;&gt;</span><span class="se">\u5185\u8499\u53e4\u81ea\u6cbb\u533a</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;ningxia&quot;&gt;</span><span class="se">\u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;qinghai&quot;&gt;</span><span class="se">\u9752\u6d77</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;shaanxi&quot;&gt;</span><span class="se">\u9655\u897f</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;shandong&quot;&gt;</span><span class="se">\u5c71\u4e1c</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;shanghai&quot;&gt;</span><span class="se">\u4e0a\u6d77</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;shanxi&quot;&gt;</span><span class="se">\u5c71\u897f</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;sichuan&quot;&gt;</span><span class="se">\u56db\u5ddd</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;taiwan&quot;&gt;</span><span class="se">\u53f0\u6e7e</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;tianjin&quot;&gt;</span><span class="se">\u5929\u6d25</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;xinjiang&quot;&gt;</span><span class="se">\u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;xizang&quot;&gt;</span><span class="se">\u897f\u85cf\u81ea\u6cbb\u533a</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;yunnan&quot;&gt;</span><span class="se">\u4e91\u5357</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;zhejiang&quot;&gt;</span><span class="se">\u6d59\u6c5f</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;provinces&#39;</span><span class="p">,</span> <span class="s">&#39;hubei&#39;</span><span class="p">),</span> <span class="n">correct_output</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_CNPostCodeField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">error_format</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Enter a post code in the format XXXXXX.&#39;</span><span class="p">]</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;091209&#39;</span><span class="p">:</span> <span class="s">&#39;091209&#39;</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;09120&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
                <span class="s">&#39;09120916&#39;</span><span class="p">:</span> <span class="n">error_format</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">CNPostCodeField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_CNIDCardField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>A valid 1st generation ID Card Number.</p></td><td class="code"><div class="highlight"><pre>                <span class="s">&#39;110101491001001&#39;</span><span class="p">:</span> <span class="s">&#39;110101491001001&#39;</span><span class="p">,</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>A valid 2nd generation ID Card number.</p></td><td class="code"><div class="highlight"><pre>                <span class="s">&#39;11010119491001001X&#39;</span><span class="p">:</span> <span class="s">&#39;11010119491001001X&#39;</span><span class="p">,</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Another valid 2nd gen ID Number with a case change</p></td><td class="code"><div class="highlight"><pre>                <span class="s">&#39;11010119491001001x&#39;</span><span class="p">:</span> <span class="s">&#39;11010119491001001X&#39;</span>
        <span class="p">}</span>

        <span class="n">wrong_format</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;ID Card Number consists of 15 or 18 digits.&#39;</span><span class="p">]</span>
        <span class="n">wrong_location</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Invalid ID Card Number: Wrong location code&#39;</span><span class="p">]</span>
        <span class="n">wrong_bday</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Invalid ID Card Number: Wrong birthdate&#39;</span><span class="p">]</span>
        <span class="n">wrong_checksum</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Invalid ID Card Number: Wrong checksum&#39;</span><span class="p">]</span>

        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;abcdefghijklmnop&#39;</span><span class="p">:</span> <span class="n">wrong_format</span><span class="p">,</span>
                <span class="s">&#39;1010101010101010&#39;</span><span class="p">:</span> <span class="n">wrong_format</span><span class="p">,</span>
                <span class="s">&#39;010101491001001&#39;</span> <span class="p">:</span> <span class="n">wrong_location</span><span class="p">,</span> <span class="c"># 1st gen, 01 is invalid</span>
                <span class="s">&#39;110101491041001&#39;</span> <span class="p">:</span> <span class="n">wrong_bday</span><span class="p">,</span> <span class="c"># 1st gen. There wasn&#39;t day 41</span>
                <span class="s">&#39;92010119491001001X&#39;</span><span class="p">:</span> <span class="n">wrong_location</span><span class="p">,</span> <span class="c"># 2nd gen, 92 is invalid</span>
                <span class="s">&#39;91010119491301001X&#39;</span><span class="p">:</span> <span class="n">wrong_bday</span><span class="p">,</span> <span class="c"># 2nd gen, 19491301 is invalid date</span>
                <span class="s">&#39;910101194910010014&#39;</span><span class="p">:</span> <span class="n">wrong_checksum</span> <span class="c">#2nd gen</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">CNIDCardField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_CNPhoneNumberField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">error_format</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Enter a valid phone number.&#39;</span><span class="p">]</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;010-12345678&#39;</span><span class="p">:</span> <span class="s">&#39;010-12345678&#39;</span><span class="p">,</span>
                <span class="s">&#39;010-1234567&#39;</span><span class="p">:</span> <span class="s">&#39;010-1234567&#39;</span><span class="p">,</span>
                <span class="s">&#39;0101-12345678&#39;</span><span class="p">:</span> <span class="s">&#39;0101-12345678&#39;</span><span class="p">,</span>
                <span class="s">&#39;0101-1234567&#39;</span><span class="p">:</span> <span class="s">&#39;0101-1234567&#39;</span><span class="p">,</span>
                <span class="s">&#39;010-12345678-020&#39;</span><span class="p">:</span><span class="s">&#39;010-12345678-020&#39;</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;01x-12345678&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
                <span class="s">&#39;12345678&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
                <span class="s">&#39;01123-12345678&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
                <span class="s">&#39;010-123456789&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
                <span class="s">&#39;010-12345678-&#39;</span><span class="p">:</span> <span class="n">error_format</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">CNPhoneNumberField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_CNCellNumberField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">error_format</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Enter a valid cell number.&#39;</span><span class="p">]</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;13012345678&#39;</span><span class="p">:</span> <span class="s">&#39;13012345678&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;130123456789&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
                <span class="s">&#39;14012345678&#39;</span><span class="p">:</span> <span class="n">error_format</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">CNCellNumberField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
