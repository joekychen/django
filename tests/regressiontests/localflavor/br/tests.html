<!DOCTYPE html>
<html><head><title>joekychen/django » tests › regressiontests › localflavor › br › tests.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>tests.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">from</span> <span class="nn">django.contrib.localflavor.br.forms</span> <span class="kn">import</span> <span class="p">(</span><span class="n">BRZipCodeField</span><span class="p">,</span>
    <span class="n">BRCNPJField</span><span class="p">,</span> <span class="n">BRCPFField</span><span class="p">,</span> <span class="n">BRPhoneNumberField</span><span class="p">,</span> <span class="n">BRStateSelect</span><span class="p">,</span>
    <span class="n">BRStateChoiceField</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">SimpleTestCase</span>


<span class="k">class</span> <span class="nc">BRLocalFlavorTests</span><span class="p">(</span><span class="n">SimpleTestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_BRZipCodeField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">error_format</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Enter a zip code in the format XXXXX-XXX.&#39;</span><span class="p">]</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;12345-123&#39;</span><span class="p">:</span> <span class="s">&#39;12345-123&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;12345_123&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;1234-123&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;abcde-abc&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;12345-&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;-123&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">BRZipCodeField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_BRCNPJField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">error_format</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Invalid CNPJ number.&#39;</span><span class="p">]</span>
        <span class="n">error_numbersonly</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;This field requires only numbers.&#39;</span><span class="p">]</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;64.132.916/0001-88&#39;</span><span class="p">:</span> <span class="s">&#39;64.132.916/0001-88&#39;</span><span class="p">,</span>
            <span class="s">&#39;64-132-916/0001-88&#39;</span><span class="p">:</span> <span class="s">&#39;64-132-916/0001-88&#39;</span><span class="p">,</span>
            <span class="s">&#39;64132916/0001-88&#39;</span><span class="p">:</span> <span class="s">&#39;64132916/0001-88&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;12-345-678/9012-10&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;12.345.678/9012-10&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;12345678/9012-10&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;64.132.916/0001-XX&#39;</span><span class="p">:</span> <span class="n">error_numbersonly</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">BRCNPJField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_BRCPFField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">error_format</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Invalid CPF number.&#39;</span><span class="p">]</span>
        <span class="n">error_numbersonly</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;This field requires only numbers.&#39;</span><span class="p">]</span>
        <span class="n">error_atmost_chars</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Ensure this value has at most 14 characters (it has 15).&#39;</span><span class="p">]</span>
        <span class="n">error_atleast_chars</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Ensure this value has at least 11 characters (it has 10).&#39;</span><span class="p">]</span>
        <span class="n">error_atmost</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;This field requires at most 11 digits or 14 characters.&#39;</span><span class="p">]</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;663.256.017-26&#39;</span><span class="p">:</span> <span class="s">&#39;663.256.017-26&#39;</span><span class="p">,</span>
            <span class="s">&#39;66325601726&#39;</span><span class="p">:</span> <span class="s">&#39;66325601726&#39;</span><span class="p">,</span>
            <span class="s">&#39;375.788.573-20&#39;</span><span class="p">:</span> <span class="s">&#39;375.788.573-20&#39;</span><span class="p">,</span>
            <span class="s">&#39;84828509895&#39;</span><span class="p">:</span> <span class="s">&#39;84828509895&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;489.294.654-54&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;295.669.575-98&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;539.315.127-22&#39;</span><span class="p">:</span> <span class="n">error_format</span><span class="p">,</span>
            <span class="s">&#39;375.788.573-XX&#39;</span><span class="p">:</span> <span class="n">error_numbersonly</span><span class="p">,</span>
            <span class="s">&#39;375.788.573-000&#39;</span><span class="p">:</span> <span class="n">error_atmost_chars</span><span class="p">,</span>
            <span class="s">&#39;123.456.78&#39;</span><span class="p">:</span> <span class="n">error_atleast_chars</span><span class="p">,</span>
            <span class="s">&#39;123456789555&#39;</span><span class="p">:</span> <span class="n">error_atmost</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">BRCPFField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_BRPhoneNumberField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>TODO: this doesn't test for any invalid inputs.</p></td><td class="code"><div class="highlight"><pre>        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;41-3562-3464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
            <span class="s">&#39;4135623464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
            <span class="s">&#39;41 3562-3464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
            <span class="s">&#39;41 3562 3464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
            <span class="s">&#39;(41) 3562 3464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
            <span class="s">&#39;41.3562.3464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
            <span class="s">&#39;41.3562-3464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
            <span class="s">&#39; (41) 3562.3464&#39;</span><span class="p">:</span> <span class="s">&#39;41-3562-3464&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">BRPhoneNumberField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_BRStateSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">BRStateSelect</span><span class="p">()</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;&lt;select name=&quot;states&quot;&gt;</span>
<span class="s">&lt;option value=&quot;AC&quot;&gt;Acre&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;AL&quot;&gt;Alagoas&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;AP&quot;&gt;Amap</span><span class="se">\xe1</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;AM&quot;&gt;Amazonas&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;BA&quot;&gt;Bahia&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;CE&quot;&gt;Cear</span><span class="se">\xe1</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;DF&quot;&gt;Distrito Federal&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;ES&quot;&gt;Esp</span><span class="se">\xed</span><span class="s">rito Santo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;GO&quot;&gt;Goi</span><span class="se">\xe1</span><span class="s">s&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;MA&quot;&gt;Maranh</span><span class="se">\xe3</span><span class="s">o&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;MT&quot;&gt;Mato Grosso&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;MS&quot;&gt;Mato Grosso do Sul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;MG&quot;&gt;Minas Gerais&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;PA&quot;&gt;Par</span><span class="se">\xe1</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;PB&quot;&gt;Para</span><span class="se">\xed</span><span class="s">ba&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;PR&quot; selected=&quot;selected&quot;&gt;Paran</span><span class="se">\xe1</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;PE&quot;&gt;Pernambuco&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;PI&quot;&gt;Piau</span><span class="se">\xed</span><span class="s">&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;RJ&quot;&gt;Rio de Janeiro&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;RN&quot;&gt;Rio Grande do Norte&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;RS&quot;&gt;Rio Grande do Sul&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;RO&quot;&gt;Rond</span><span class="se">\xf4</span><span class="s">nia&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;RR&quot;&gt;Roraima&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;SC&quot;&gt;Santa Catarina&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;SP&quot;&gt;S</span><span class="se">\xe3</span><span class="s">o Paulo&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;SE&quot;&gt;Sergipe&lt;/option&gt;</span>
<span class="s">&lt;option value=&quot;TO&quot;&gt;Tocantins&lt;/option&gt;</span>
<span class="s">&lt;/select&gt;&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertHTMLEqual</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">&#39;states&#39;</span><span class="p">,</span> <span class="s">&#39;PR&#39;</span><span class="p">),</span> <span class="n">out</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_BRStateChoiceField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">error_invalid</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Select a valid brazilian state. That state is not one of the available states.&#39;</span><span class="p">]</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;AC&#39;</span><span class="p">:</span> <span class="s">&#39;AC&#39;</span><span class="p">,</span>
            <span class="s">&#39;AL&#39;</span><span class="p">:</span> <span class="s">&#39;AL&#39;</span><span class="p">,</span>
            <span class="s">&#39;AP&#39;</span><span class="p">:</span> <span class="s">&#39;AP&#39;</span><span class="p">,</span>
            <span class="s">&#39;AM&#39;</span><span class="p">:</span> <span class="s">&#39;AM&#39;</span><span class="p">,</span>
            <span class="s">&#39;BA&#39;</span><span class="p">:</span> <span class="s">&#39;BA&#39;</span><span class="p">,</span>
            <span class="s">&#39;CE&#39;</span><span class="p">:</span> <span class="s">&#39;CE&#39;</span><span class="p">,</span>
            <span class="s">&#39;DF&#39;</span><span class="p">:</span> <span class="s">&#39;DF&#39;</span><span class="p">,</span>
            <span class="s">&#39;ES&#39;</span><span class="p">:</span> <span class="s">&#39;ES&#39;</span><span class="p">,</span>
            <span class="s">&#39;GO&#39;</span><span class="p">:</span> <span class="s">&#39;GO&#39;</span><span class="p">,</span>
            <span class="s">&#39;MA&#39;</span><span class="p">:</span> <span class="s">&#39;MA&#39;</span><span class="p">,</span>
            <span class="s">&#39;MT&#39;</span><span class="p">:</span> <span class="s">&#39;MT&#39;</span><span class="p">,</span>
            <span class="s">&#39;MS&#39;</span><span class="p">:</span> <span class="s">&#39;MS&#39;</span><span class="p">,</span>
            <span class="s">&#39;MG&#39;</span><span class="p">:</span> <span class="s">&#39;MG&#39;</span><span class="p">,</span>
            <span class="s">&#39;PA&#39;</span><span class="p">:</span> <span class="s">&#39;PA&#39;</span><span class="p">,</span>
            <span class="s">&#39;PB&#39;</span><span class="p">:</span> <span class="s">&#39;PB&#39;</span><span class="p">,</span>
            <span class="s">&#39;PR&#39;</span><span class="p">:</span> <span class="s">&#39;PR&#39;</span><span class="p">,</span>
            <span class="s">&#39;PE&#39;</span><span class="p">:</span> <span class="s">&#39;PE&#39;</span><span class="p">,</span>
            <span class="s">&#39;PI&#39;</span><span class="p">:</span> <span class="s">&#39;PI&#39;</span><span class="p">,</span>
            <span class="s">&#39;RJ&#39;</span><span class="p">:</span> <span class="s">&#39;RJ&#39;</span><span class="p">,</span>
            <span class="s">&#39;RN&#39;</span><span class="p">:</span> <span class="s">&#39;RN&#39;</span><span class="p">,</span>
            <span class="s">&#39;RS&#39;</span><span class="p">:</span> <span class="s">&#39;RS&#39;</span><span class="p">,</span>
            <span class="s">&#39;RO&#39;</span><span class="p">:</span> <span class="s">&#39;RO&#39;</span><span class="p">,</span>
            <span class="s">&#39;RR&#39;</span><span class="p">:</span> <span class="s">&#39;RR&#39;</span><span class="p">,</span>
            <span class="s">&#39;SC&#39;</span><span class="p">:</span> <span class="s">&#39;SC&#39;</span><span class="p">,</span>
            <span class="s">&#39;SP&#39;</span><span class="p">:</span> <span class="s">&#39;SP&#39;</span><span class="p">,</span>
            <span class="s">&#39;SE&#39;</span><span class="p">:</span> <span class="s">&#39;SE&#39;</span><span class="p">,</span>
            <span class="s">&#39;TO&#39;</span><span class="p">:</span> <span class="s">&#39;TO&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;pr&#39;</span><span class="p">:</span> <span class="n">error_invalid</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFieldOutput</span><span class="p">(</span><span class="n">BRStateChoiceField</span><span class="p">,</span> <span class="n">valid</span><span class="p">,</span> <span class="n">invalid</span><span class="p">)</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
