<!DOCTYPE html>
<html><head><title>joekychen/django » tests › regressiontests › urlpatterns_reverse › tests.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>tests.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Unit tests for reverse URL lookups.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.core.exceptions</span> <span class="kn">import</span> <span class="n">ImproperlyConfigured</span><span class="p">,</span> <span class="n">ViewDoesNotExist</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="p">(</span><span class="n">reverse</span><span class="p">,</span> <span class="n">resolve</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span>
    <span class="n">Resolver404</span><span class="p">,</span> <span class="n">ResolverMatch</span><span class="p">,</span> <span class="n">RegexURLResolver</span><span class="p">,</span> <span class="n">RegexURLPattern</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseRedirect</span><span class="p">,</span> <span class="n">HttpResponsePermanentRedirect</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">redirect</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">unittest</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">urlconf_outer</span><span class="p">,</span> <span class="n">urlconf_inner</span><span class="p">,</span> <span class="n">middleware</span><span class="p">,</span> <span class="n">views</span>


<span class="n">resolve_test_data</span> <span class="o">=</span> <span class="p">(</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>These entries are in the format: (path, url<em>name, app</em>name, namespace, view_func, args, kwargs)
Simple case</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;/normal/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;normal-view&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/view_class/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;view-class&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">view_class_instance</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/included/normal/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;inc-normal-view&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/included/view_class/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;inc-view-class&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">view_class_instance</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Unnamed args are dropped if you have <em>any</em> kwargs in a pattern</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;/mixed_args/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;mixed-args&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/included/mixed_args/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;inc-mixed-args&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Unnamed views will be resolved to the function/class name</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;/unnamed/normal/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.views.empty_view&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/unnamed/view_class/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.views.ViewClass&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">view_class_instance</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>If you have no kwargs, you get an args list.</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;/no_kwargs/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;no-kwargs&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;42&#39;</span><span class="p">,</span><span class="s">&#39;37&#39;</span><span class="p">),</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;/included/no_kwargs/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;inc-no-kwargs&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;42&#39;</span><span class="p">,</span><span class="s">&#39;37&#39;</span><span class="p">),</span> <span class="p">{}),</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>Namespaces</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;/test1/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;testapp&#39;</span><span class="p">,</span> <span class="s">&#39;test-ns1&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/included/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;testapp&#39;</span><span class="p">,</span> <span class="s">&#39;test-ns3&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/ns-included1/normal/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;inc-normal-view&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;inc-ns1&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/included/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;testapp&#39;</span><span class="p">,</span> <span class="s">&#39;test-ns3&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/default/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;testapp&#39;</span><span class="p">,</span> <span class="s">&#39;testapp&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/other2/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;nodefault&#39;</span><span class="p">,</span> <span class="s">&#39;other-ns2&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/other1/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;nodefault&#39;</span><span class="p">,</span> <span class="s">&#39;other-ns1&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>Nested namespaces</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;/ns-included1/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;testapp&#39;</span><span class="p">,</span> <span class="s">&#39;inc-ns1:test-ns3&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/ns-included1/ns-included4/ns-included2/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="s">&#39;testapp&#39;</span><span class="p">,</span> <span class="s">&#39;inc-ns1:inc-ns4:inc-ns2:test-ns3&#39;</span><span class="p">,</span> <span class="s">&#39;empty_view&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="s">&#39;37&#39;</span><span class="p">}),</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>Namespaces capturing variables</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;/inc70/&#39;</span><span class="p">,</span> <span class="s">&#39;inner-nothing&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;inc-ns5&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span> <span class="s">&#39;70&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;/inc78/extra/foobar/&#39;</span><span class="p">,</span> <span class="s">&#39;inner-extra&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;inc-ns5&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">empty_view</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(),</span> <span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span><span class="s">&#39;78&#39;</span><span class="p">,</span> <span class="s">&#39;extra&#39;</span><span class="p">:</span><span class="s">&#39;foobar&#39;</span><span class="p">}),</span>
<span class="p">)</span>

<span class="n">test_data</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="s">&#39;/places/3/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="s">&#39;/places/3/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;3&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places?&#39;</span><span class="p">,</span> <span class="s">&#39;/place/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places+&#39;</span><span class="p">,</span> <span class="s">&#39;/places/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places*&#39;</span><span class="p">,</span> <span class="s">&#39;/place/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places2?&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places2+&#39;</span><span class="p">,</span> <span class="s">&#39;/places/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places2*&#39;</span><span class="p">,</span> <span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places3&#39;</span><span class="p">,</span> <span class="s">&#39;/places/4/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places3&#39;</span><span class="p">,</span> <span class="s">&#39;/places/harlem/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;harlem&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places3&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;harlem64&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;places4&#39;</span><span class="p">,</span> <span class="s">&#39;/places/3/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;people&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people&#39;</span><span class="p">,</span> <span class="s">&#39;/people/adrian/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;adrian&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people&#39;</span><span class="p">,</span> <span class="s">&#39;/people/adrian/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;people&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;name with spaces&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;name with spaces&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;people2&#39;</span><span class="p">,</span> <span class="s">&#39;/people/name/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people2a&#39;</span><span class="p">,</span> <span class="s">&#39;/people/name/fred/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;fred&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people_backref&#39;</span><span class="p">,</span> <span class="s">&#39;/people/nate-nate/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;nate&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people_backref&#39;</span><span class="p">,</span> <span class="s">&#39;/people/nate-nate/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;nate&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;optional&#39;</span><span class="p">,</span> <span class="s">&#39;/optional/fred/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;fred&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;optional&#39;</span><span class="p">,</span> <span class="s">&#39;/optional/fred/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;fred&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;hardcoded&#39;</span><span class="p">,</span> <span class="s">&#39;/hardcoded/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;hardcoded2&#39;</span><span class="p">,</span> <span class="s">&#39;/hardcoded/doc.pdf&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people3&#39;</span><span class="p">,</span> <span class="s">&#39;/people/il/adrian/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;state&#39;</span><span class="p">:</span> <span class="s">&#39;il&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;people3&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;state&#39;</span><span class="p">:</span> <span class="s">&#39;il&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;people3&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;people4&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;state&#39;</span><span class="p">:</span> <span class="s">&#39;il&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;adrian&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;people6&#39;</span><span class="p">,</span> <span class="s">&#39;/people/il/test/adrian/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;il/test&#39;</span><span class="p">,</span> <span class="s">&#39;adrian&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;people6&#39;</span><span class="p">,</span> <span class="s">&#39;/people//adrian/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;adrian&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;range&#39;</span><span class="p">,</span> <span class="s">&#39;/character_set/a/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;range2&#39;</span><span class="p">,</span> <span class="s">&#39;/character_set/x/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;price&#39;</span><span class="p">,</span> <span class="s">&#39;/price/$10/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;10&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;price2&#39;</span><span class="p">,</span> <span class="s">&#39;/price/$10/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;10&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;price3&#39;</span><span class="p">,</span> <span class="s">&#39;/price/$10/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;10&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;product&#39;</span><span class="p">,</span> <span class="s">&#39;/product/chocolate+($2.00)/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;price&#39;</span><span class="p">:</span> <span class="s">&#39;2.00&#39;</span><span class="p">,</span> <span class="s">&#39;product&#39;</span><span class="p">:</span> <span class="s">&#39;chocolate&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;headlines&#39;</span><span class="p">,</span> <span class="s">&#39;/headlines/2007.5.21/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">dict</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2007</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">21</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;windows&#39;</span><span class="p">,</span> <span class="s">r&#39;/windows_path/C:%5CDocuments%20and%20Settings%5Cspam/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">dict</span><span class="p">(</span><span class="n">drive_name</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">r&#39;Documents and Settings\spam&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;special&#39;</span><span class="p">,</span> <span class="s">r&#39;/special_chars/+%5C$*/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">r&#39;+\$*&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;special&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;mixed&#39;</span><span class="p">,</span> <span class="s">&#39;/john/0/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;john&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;repeats&#39;</span><span class="p">,</span> <span class="s">&#39;/repeats/a/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;repeats2&#39;</span><span class="p">,</span> <span class="s">&#39;/repeats/aa/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;repeats3&#39;</span><span class="p">,</span> <span class="s">&#39;/repeats/aa/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;insensitive&#39;</span><span class="p">,</span> <span class="s">&#39;/CaseInsensitive/fred&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;fred&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;/test/1&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;test2&#39;</span><span class="p">,</span> <span class="s">&#39;/test/2&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;inner-nothing&#39;</span><span class="p">,</span> <span class="s">&#39;/outer/42/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;inner-nothing&#39;</span><span class="p">,</span> <span class="s">&#39;/outer/42/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;42&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;inner-nothing&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;inner-extra&#39;</span><span class="p">,</span> <span class="s">&#39;/outer/42/extra/inner/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;extra&#39;</span><span class="p">:</span> <span class="s">&#39;inner&#39;</span><span class="p">,</span> <span class="s">&#39;outer&#39;</span><span class="p">:</span> <span class="s">&#39;42&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;inner-extra&#39;</span><span class="p">,</span> <span class="s">&#39;/outer/42/extra/inner/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;42&#39;</span><span class="p">,</span> <span class="s">&#39;inner&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;inner-extra&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;fred&#39;</span><span class="p">,</span> <span class="s">&#39;inner&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;disjunction&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;inner-disjunction&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;10&#39;</span><span class="p">,</span> <span class="s">&#39;11&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;extra-places&#39;</span><span class="p">,</span> <span class="s">&#39;/e-places/10/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;10&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;extra-people&#39;</span><span class="p">,</span> <span class="s">&#39;/e-people/fred/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;fred&#39;</span><span class="p">],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;extra-people&#39;</span><span class="p">,</span> <span class="s">&#39;/e-people/fred/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;fred&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;part&#39;</span><span class="p">,</span> <span class="s">&#39;/part/one/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;part&#39;</span><span class="p">,</span> <span class="s">&#39;/prefix/xx/part/one/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;prefix&#39;</span><span class="p">:</span> <span class="s">&#39;xx&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;part2&#39;</span><span class="p">,</span> <span class="s">&#39;/part2/one/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;part2&#39;</span><span class="p">,</span> <span class="s">&#39;/part2/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;part2&#39;</span><span class="p">,</span> <span class="s">&#39;/prefix/xx/part2/one/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;prefix&#39;</span><span class="p">:</span> <span class="s">&#39;xx&#39;</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;part2&#39;</span><span class="p">,</span> <span class="s">&#39;/prefix/xx/part2/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;prefix&#39;</span><span class="p">:</span> <span class="s">&#39;xx&#39;</span><span class="p">}),</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>Regression for #9038
These views are resolved by method name. Each method is deployed twice -
once with an explicit argument, and once using the default value on
the method. This is potentially ambiguous, as you have to pick the
correct view for the arguments provided.</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;kwargs_view&#39;</span><span class="p">,</span> <span class="s">&#39;/arg_view/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;kwargs_view&#39;</span><span class="p">,</span> <span class="s">&#39;/arg_view/10/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;regressiontests.urlpatterns_reverse.views.absolute_kwargs_view&#39;</span><span class="p">,</span> <span class="s">&#39;/absolute_arg_view/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s">&#39;regressiontests.urlpatterns_reverse.views.absolute_kwargs_view&#39;</span><span class="p">,</span> <span class="s">&#39;/absolute_arg_view/10/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;non_path_include&#39;</span><span class="p">,</span> <span class="s">&#39;/includes/non_path_include/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}),</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>Tests for #13154</p></td><td class="code"><div class="highlight"><pre>    <span class="p">(</span><span class="s">&#39;defaults&#39;</span><span class="p">,</span> <span class="s">&#39;/defaults_view1/3/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;defaults&#39;</span><span class="p">,</span> <span class="s">&#39;/defaults_view2/3/&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;defaults&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}),</span>
    <span class="p">(</span><span class="s">&#39;defaults&#39;</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{</span><span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}),</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">NoURLPatternsTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.no_urls&#39;</span>

    <span class="k">def</span> <span class="nf">test_no_urls_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RegexURLResolver should raise an exception when no urlpatterns exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resolver</span> <span class="o">=</span> <span class="n">RegexURLResolver</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">urls</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesMessage</span><span class="p">(</span><span class="n">ImproperlyConfigured</span><span class="p">,</span>
            <span class="s">&quot;The included urlconf regressiontests.urlpatterns_reverse.no_urls &quot;</span>\
            <span class="s">&quot;doesn&#39;t have any patterns in it&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">,</span> <span class="n">resolver</span><span class="p">,</span> <span class="s">&#39;url_patterns&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">URLPatternReverse</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.urls&#39;</span>

    <span class="k">def</span> <span class="nf">test_urlpattern_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="ow">in</span> <span class="n">test_data</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">got</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">NoReverseMatch</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">got</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_reverse_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>Reversing None should raise an error, not return the last un-named view.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ResolverTests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_non_regex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies that we raise a Resolver404 if what we are resolving doesn&#39;t</span>
<span class="sd">        meet the basic requirements of a path to match - i.e., at the very</span>
<span class="sd">        least, it matches the root pattern &#39;^/&#39;. We must never return None</span>
<span class="sd">        from resolve, or we will get a TypeError further down the line.</span>

<span class="sd">        Regression for #10834.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">Resolver404</span><span class="p">,</span> <span class="n">resolve</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">Resolver404</span><span class="p">,</span> <span class="n">resolve</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">Resolver404</span><span class="p">,</span> <span class="n">resolve</span><span class="p">,</span> <span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">Resolver404</span><span class="p">,</span> <span class="n">resolve</span><span class="p">,</span> <span class="s">&#39;.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_404_tried_urls_have_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies that the list of URLs that come back from a Resolver404</span>
<span class="sd">        exception contains a list in the right format for printing out in</span>
<span class="sd">        the DEBUG 404 page with both the patterns and URL names, if available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.named_urls&#39;</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>this list matches the expected URL types and names returned when
you try to resolve a non-existent URL in the first level of included
URLs in named_urls.py (e.g., '/included/non-existent-url')</p></td><td class="code"><div class="highlight"><pre>        <span class="n">url_types_names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLPattern</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;named-url1&#39;</span><span class="p">}],</span>
            <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLPattern</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;named-url2&#39;</span><span class="p">}],</span>
            <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLPattern</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}],</span>
            <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLResolver</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLPattern</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;named-url3&#39;</span><span class="p">}],</span>
            <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLResolver</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLPattern</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;named-url4&#39;</span><span class="p">}],</span>
            <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLResolver</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLPattern</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}],</span>
            <span class="p">[{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLResolver</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="n">RegexURLResolver</span><span class="p">}],</span>
        <span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">resolve</span><span class="p">(</span><span class="s">&#39;/included/non-existent-url&#39;</span><span class="p">,</span> <span class="n">urlconf</span><span class="o">=</span><span class="n">urls</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&#39;resolve did not raise a 404&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">Resolver404</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>make sure we at least matched the root ('/') url resolver:</p></td><td class="code"><div class="highlight"><pre>            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s">&#39;tried&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">tried</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;tried&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;tried&#39;</span><span class="p">]),</span> <span class="nb">len</span><span class="p">(</span><span class="n">url_types_names</span><span class="p">),</span> <span class="s">&#39;Wrong number of tried URLs returned.  Expected </span><span class="si">%s</span><span class="s">, got </span><span class="si">%s</span><span class="s">.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">url_types_names</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;tried&#39;</span><span class="p">])))</span>
            <span class="k">for</span> <span class="n">tried</span><span class="p">,</span> <span class="n">expected</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;tried&#39;</span><span class="p">],</span> <span class="n">url_types_names</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">tried</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]),</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> is not an instance of </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]))</span>
                    <span class="k">if</span> <span class="s">&#39;name&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;Expected no URL name but found </span><span class="si">%s</span><span class="s">.&#39;</span> <span class="o">%</span> <span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span> <span class="s">&#39;Wrong URL name.  Expected &quot;</span><span class="si">%s</span><span class="s">&quot;, got &quot;</span><span class="si">%s</span><span class="s">&quot;.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">ReverseLazyTest</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.reverse_lazy_urls&#39;</span>

    <span class="k">def</span> <span class="nf">test_redirect_with_lazy_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/redirect/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRedirects</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">&quot;/redirected_to/&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">301</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_user_permission_with_lazy_reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="s">&#39;alfred&#39;</span><span class="p">,</span> <span class="s">&#39;alfred@example.com&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">&#39;testpw&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/login_required_view/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRedirects</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">&quot;/login/?next=/login_required_view/&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">302</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">&#39;alfred&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">&#39;testpw&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/login_required_view/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ReverseShortcutTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.urls&#39;</span>

    <span class="k">def</span> <span class="nf">test_redirect_to_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>We don't really need a model; just something with a get<em>absolute</em>url</p></td><td class="code"><div class="highlight"><pre>        <span class="k">class</span> <span class="nc">FakeObj</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&quot;/hi-there/&quot;</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="n">FakeObj</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">HttpResponseRedirect</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;/hi-there/&#39;</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="n">FakeObj</span><span class="p">(),</span> <span class="n">permanent</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">HttpResponsePermanentRedirect</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;/hi-there/&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_redirect_to_view_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="s">&#39;hardcoded2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;/hardcoded/doc.pdf&#39;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="s">&#39;places&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;/places/1/&#39;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="s">&#39;headlines&#39;</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="s">&#39;2008&#39;</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="s">&#39;02&#39;</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="s">&#39;17&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;/headlines/2008.02.17/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="s">&#39;not-a-view&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_redirect_to_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="s">&#39;/foo/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;/foo/&#39;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;http://example.com/&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_redirect_view_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">absolute_kwargs_view</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">redirect</span><span class="p">(</span><span class="n">absolute_kwargs_view</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s">&#39;Location&#39;</span><span class="p">],</span> <span class="s">&#39;/absolute_arg_view/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">absolute_kwargs_view</span><span class="p">,</span> <span class="n">wrong_argument</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">NamespaceTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.namespace_urls&#39;</span>

    <span class="k">def</span> <span class="nf">test_ambiguous_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Names deployed via dynamic URL objects that require namespaces can&#39;t be resolved&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">test_ambiguous_urlpattern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Names deployed via dynamic URL objects that require namespaces can&#39;t be resolved&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;inner-nothing&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;inner-nothing&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;inner-nothing&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">test_non_existent_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Non-existent namespaces raise errors&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;blahblah:urlobject-view&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">NoReverseMatch</span><span class="p">,</span> <span class="n">reverse</span><span class="p">,</span> <span class="s">&#39;test-ns1:blahblah:urlobject-view&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_normal_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Normal lookups work as expected&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/normal/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;normal-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/normal/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;normal-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/normal/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;normal-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_simple_included_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Normal lookups work on names included from other patterns&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/normal/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-normal-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/normal/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-normal-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/normal/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-normal-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_namespace_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Dynamic URL objects can be found using a namespace&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/test1/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns1:urlobject-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/test1/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns1:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/test1/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns1:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/test1/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns1:urlobject-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_embedded_namespace_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Namespaces can be installed anywhere in the URL pattern tree&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns3:urlobject-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns3:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns3:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;test-ns3:urlobject-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_namespace_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Namespaces can be applied to include()&#39;d urlpatterns&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/normal/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-normal-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/normal/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/normal/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_namespace_pattern_with_variable_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;When using a include with namespaces when there is a regex variable in front of it&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-outer/42/normal/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-outer:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-outer/42/normal/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-outer:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-outer/42/normal/37/4/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-outer:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg1&#39;</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-outer/42/normal/37/4/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-outer:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">4</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-outer/42/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-outer:inc-special-view&#39;</span><span class="p">,</span>  <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-outer/42/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-outer:inc-special-view&#39;</span><span class="p">,</span>  <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">42</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">test_multiple_namespace_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Namespaces can be embedded&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/test3/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:test-ns3:urlobject-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/test3/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:test-ns3:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:test-ns3:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/test3/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:test-ns3:urlobject-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_nested_namespace_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Namespaces can be nested&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/ns-included4/ns-included1/test3/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-ns4:inc-ns1:test-ns3:urlobject-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/ns-included4/ns-included1/test3/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-ns4:inc-ns1:test-ns3:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/ns-included4/ns-included1/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-ns4:inc-ns1:test-ns3:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/ns-included1/ns-included4/ns-included1/test3/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns1:inc-ns4:inc-ns1:test-ns3:urlobject-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_app_lookup_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;A default application namespace can be used for lookup&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/default/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/default/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/default/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/default/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_app_lookup_object_with_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;A default application namespace is sensitive to the &#39;current&#39; app can be used for lookup&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-view&#39;</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;test-ns3&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">],</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;test-ns3&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">},</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;test-ns3&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/included/test3/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;testapp:urlobject-special-view&#39;</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;test-ns3&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_app_lookup_object_without_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;An application namespace without a default is sensitive to the &#39;current&#39; app can be used for lookup&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other2/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other2/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other2/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other2/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-special-view&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other1/inner/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-view&#39;</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;other-ns1&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other1/inner/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">],</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;other-ns1&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other1/inner/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">},</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;other-ns1&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/other1/inner/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;nodefault:urlobject-special-view&#39;</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="s">&#39;other-ns1&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_special_chars_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/+%5C$*/included/normal/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;special:inc-normal-view&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/+%5C$*/included/normal/37/42/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;special:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">37</span><span class="p">,</span><span class="mi">42</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/+%5C$*/included/normal/42/37/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;special:inc-normal-view&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s">&#39;arg2&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/+%5C$*/included/+%5C$*/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;special:inc-special-view&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_namespaces_with_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Namespace prefixes can capture variables: see #15900&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/inc70/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns5:inner-nothing&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span> <span class="s">&#39;70&#39;</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/inc78/extra/foobar/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns5:inner-extra&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;outer&#39;</span><span class="p">:</span><span class="s">&#39;78&#39;</span><span class="p">,</span> <span class="s">&#39;extra&#39;</span><span class="p">:</span><span class="s">&#39;foobar&#39;</span><span class="p">}))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/inc70/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns5:inner-nothing&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;70&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">&#39;/inc78/extra/foobar/&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;inc-ns5:inner-extra&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;78&#39;</span><span class="p">,</span><span class="s">&#39;foobar&#39;</span><span class="p">]))</span>

<span class="k">class</span> <span class="nc">RequestURLconfTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root_urlconf</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ROOT_URLCONF</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">middleware_classes</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">MIDDLEWARE_CLASSES</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">ROOT_URLCONF</span> <span class="o">=</span> <span class="n">urlconf_outer</span><span class="o">.</span><span class="n">__name__</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">ROOT_URLCONF</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_urlconf</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">MIDDLEWARE_CLASSES</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">middleware_classes</span>

    <span class="k">def</span> <span class="nf">test_urlconf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/test/me/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;outer:/test/me/,&#39;</span>
                                           <span class="s">&#39;inner:/inner_urlconf/second_test/&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/inner_urlconf/second_test/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/second_test/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_urlconf_overridden</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">MIDDLEWARE_CLASSES</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s">&#39;</span><span class="si">%s</span><span class="s">.ChangeURLconfMiddleware&#39;</span> <span class="o">%</span> <span class="n">middleware</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/test/me/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/inner_urlconf/second_test/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/second_test/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s">&#39;outer:,inner:/second_test/&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_urlconf_overridden_with_null</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">MIDDLEWARE_CLASSES</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s">&#39;</span><span class="si">%s</span><span class="s">.NullChangeURLconfMiddleware&#39;</span> <span class="o">%</span> <span class="n">middleware</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ImproperlyConfigured</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/test/me/&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ErrorHandlerResolutionTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests for handler404 and handler500&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">RegexURLResolver</span>
        <span class="n">urlconf</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.urls_error_handlers&#39;</span>
        <span class="n">urlconf_callables</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.urls_error_handlers_callables&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolver</span> <span class="o">=</span> <span class="n">RegexURLResolver</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">urlconf</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callable_resolver</span> <span class="o">=</span> <span class="n">RegexURLResolver</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">urlconf_callables</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_named_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">empty_view</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="p">(</span><span class="n">empty_view</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolver</span><span class="o">.</span><span class="n">resolve404</span><span class="p">(),</span> <span class="n">handler</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolver</span><span class="o">.</span><span class="n">resolve500</span><span class="p">(),</span> <span class="n">handler</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_callable_handers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">empty_view</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="p">(</span><span class="n">empty_view</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callable_resolver</span><span class="o">.</span><span class="n">resolve404</span><span class="p">(),</span> <span class="n">handler</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callable_resolver</span><span class="o">.</span><span class="n">resolve500</span><span class="p">(),</span> <span class="n">handler</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">DefaultErrorHandlerTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.urls_without_full_import&#39;</span>

    <span class="k">def</span> <span class="nf">test_default_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;If the urls.py doesn&#39;t specify handlers, the defaults are used&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/test/&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Shouldn&#39;t get an AttributeError due to undefined 404 handler&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/bad_view/&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s">&quot;Shouldn&#39;t get an AttributeError due to undefined 500 handler&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">NoRootUrlConfTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests for handler404 and handler500 if urlconf is None&quot;&quot;&quot;</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">test_no_handler_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ImproperlyConfigured</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/test/me/&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ResolverMatchTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.namespace_urls&#39;</span>

    <span class="k">def</span> <span class="nf">test_urlpattern_resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="ow">in</span> <span class="n">resolve_test_data</span><span class="p">:</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>Test legacy support for extracting "function, args, kwargs"</p></td><td class="code"><div class="highlight"><pre>            <span class="n">match_func</span><span class="p">,</span> <span class="n">match_args</span><span class="p">,</span> <span class="n">match_kwargs</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match_func</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match_args</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match_kwargs</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>Test ResolverMatch capabilities.</p></td><td class="code"><div class="highlight"><pre>            <span class="n">match</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">ResolverMatch</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">url_name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">app_name</span><span class="p">,</span> <span class="n">app_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>... and for legacy purposes:</p></td><td class="code"><div class="highlight"><pre>            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">func</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">args</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">kwargs</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ErroneousViewTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="s">&#39;regressiontests.urlpatterns_reverse.erroneous_urls&#39;</span>

    <span class="k">def</span> <span class="nf">test_erroneous_resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/erroneous_inner/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/erroneous_outer/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ViewDoesNotExist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/missing_inner/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ViewDoesNotExist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/missing_outer/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">ViewDoesNotExist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="s">&#39;/uncallable/&#39;</span><span class="p">)</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
