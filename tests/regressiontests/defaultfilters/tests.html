<!DOCTYPE html>
<html><head><title>joekychen/django » tests › regressiontests › defaultfilters › tests.py

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>tests.py</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div><p>-<em>- coding: utf-8 -</em>-</p></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">decimal</span>

<span class="kn">from</span> <span class="nn">django.template.defaultfilters</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">unittest</span><span class="p">,</span> <span class="n">translation</span>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="kn">import</span> <span class="n">SafeData</span>


<span class="k">class</span> <span class="nc">DefaultFiltersTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_floatformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">7.7</span><span class="p">),</span> <span class="s">&#39;7.7&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">7.0</span><span class="p">),</span> <span class="s">&#39;7&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">0.7</span><span class="p">),</span> <span class="s">&#39;0.7&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">0.07</span><span class="p">),</span> <span class="s">&#39;0.1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">0.007</span><span class="p">),</span> <span class="s">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span> <span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">7.7</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s">&#39;7.700&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">6.000000</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s">&#39;6.000&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">6.200000</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s">&#39;6.200&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">6.200000</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="s">&#39;6.200&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">13.1031</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="s">&#39;13.103&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">11.1197</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="s">&#39;11.12&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">11.0000</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="s">&#39;11&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">11.000001</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="s">&#39;11.00&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">8.2798</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s">&#39;8.280&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">5555.555</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;5555.56&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">001.3000</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;1.30&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">0.12345</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;0.12&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;555.555&#39;</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;555.56&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;09.000&#39;</span><span class="p">)),</span> <span class="s">&#39;9&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">13.1031</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="s">&#39;13.1031&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">18.125</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;18.13&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="s">&#39;¿Cómo esta usted?&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>Check that we're not converting to scientific notation.</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="s">&#39;0.000000&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="s">&#39;0.0000000&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s">&#39;0.0000000000&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">0.000000000000000000015</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
                                     <span class="s">&#39;0.00000000000000000002&#39;</span><span class="p">)</span>

        <span class="n">pos_inf</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1e30000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">pos_inf</span><span class="p">),</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">pos_inf</span><span class="p">))</span>

        <span class="n">neg_inf</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="o">-</span><span class="mf">1e30000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">neg_inf</span><span class="p">),</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">neg_inf</span><span class="p">))</span>

        <span class="n">nan</span> <span class="o">=</span> <span class="n">pos_inf</span> <span class="o">/</span> <span class="n">pos_inf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">nan</span><span class="p">),</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">nan</span><span class="p">))</span>

        <span class="k">class</span> <span class="nc">FloatWrapper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">def</span> <span class="nf">__float__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">FloatWrapper</span><span class="p">(</span><span class="mf">11.000001</span><span class="p">),</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="s">&#39;11.00&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Regression for #15789</p></td><td class="code"><div class="highlight"><pre>        <span class="n">decimal_ctx</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span>
        <span class="n">old_prec</span><span class="p">,</span> <span class="n">decimal_ctx</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="n">decimal_ctx</span><span class="o">.</span><span class="n">prec</span><span class="p">,</span> <span class="mi">2</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">1.2345</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;1.23&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">15.2042</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="s">&#39;15.204&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">1.2345</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="s">&#39;1.23&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">15.2042</span><span class="p">,</span> <span class="s">&#39;-3&#39;</span><span class="p">),</span> <span class="s">&#39;15.204&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.2345&#39;</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;1.23&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;15.2042&#39;</span><span class="p">),</span> <span class="o">-</span><span class="mi">3</span><span class="p">),</span> <span class="s">&#39;15.204&#39;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">decimal_ctx</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="n">old_prec</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>This fails because of Python's float handling. Floats with many zeroes
after the decimal point should be passed in as another type such as
unicode or Decimal.</p></td><td class="code"><div class="highlight"><pre>    <span class="nd">@unittest.expectedFailure</span>
    <span class="k">def</span> <span class="nf">test_floatformat_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">floatformat</span><span class="p">(</span><span class="mf">1.00000000000000015</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="s">&#39;1.0000000000000002&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_addslashes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addslashes</span><span class="p">(</span><span class="s">&#39;&quot;double quotes&quot; and </span><span class="se">\&#39;</span><span class="s">single quotes</span><span class="se">\&#39;</span><span class="s">&#39;</span><span class="p">),</span>
                          <span class="s">&#39;</span><span class="se">\\</span><span class="s">&quot;double quotes</span><span class="se">\\</span><span class="s">&quot; and </span><span class="se">\\\&#39;</span><span class="s">single quotes</span><span class="se">\\\&#39;</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addslashes</span><span class="p">(</span><span class="s">r&#39;\ : backslashes, too&#39;</span><span class="p">),</span>
                          <span class="s">&#39;</span><span class="se">\\\\</span><span class="s"> : backslashes, too&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_capfirst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="s">&#39;hello world&#39;</span><span class="p">),</span> <span class="s">&#39;Hello world&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_escapejs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">escapejs_filter</span><span class="p">(</span><span class="s">&#39;&quot;double quotes&quot; and </span><span class="se">\&#39;</span><span class="s">single quotes</span><span class="se">\&#39;</span><span class="s">&#39;</span><span class="p">),</span>
            <span class="s">&#39;</span><span class="se">\\</span><span class="s">u0022double quotes</span><span class="se">\\</span><span class="s">u0022 and </span><span class="se">\\</span><span class="s">u0027single quotes</span><span class="se">\\</span><span class="s">u0027&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">escapejs_filter</span><span class="p">(</span><span class="s">r&#39;\ : backslashes, too&#39;</span><span class="p">),</span>
            <span class="s">&#39;</span><span class="se">\\</span><span class="s">u005C : backslashes, too&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">escapejs_filter</span><span class="p">(</span><span class="s">&#39;and lots of whitespace: </span><span class="se">\r\n\t\v\f\b</span><span class="s">&#39;</span><span class="p">),</span>
            <span class="s">&#39;and lots of whitespace: </span><span class="se">\\</span><span class="s">u000D</span><span class="se">\\</span><span class="s">u000A</span><span class="se">\\</span><span class="s">u0009</span><span class="se">\\</span><span class="s">u000B</span><span class="se">\\</span><span class="s">u000C</span><span class="se">\\</span><span class="s">u0008&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">escapejs_filter</span><span class="p">(</span><span class="s">r&#39;&lt;script&gt;and this&lt;/script&gt;&#39;</span><span class="p">),</span>
            <span class="s">&#39;</span><span class="se">\\</span><span class="s">u003Cscript</span><span class="se">\\</span><span class="s">u003Eand this</span><span class="se">\\</span><span class="s">u003C/script</span><span class="se">\\</span><span class="s">u003E&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">escapejs_filter</span><span class="p">(</span><span class="s">&#39;paragraph separator:</span><span class="se">\u2029</span><span class="s">and line separator:</span><span class="se">\u2028</span><span class="s">&#39;</span><span class="p">),</span>
            <span class="s">&#39;paragraph separator:</span><span class="se">\\</span><span class="s">u2029and line separator:</span><span class="se">\\</span><span class="s">u2028&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_fix_ampersands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fix_ampersands_filter</span><span class="p">(</span><span class="s">&#39;Jack &amp; Jill &amp; Jeroboam&#39;</span><span class="p">),</span>
                          <span class="s">&#39;Jack &amp;amp; Jill &amp;amp; Jeroboam&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_linenumbers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linenumbers</span><span class="p">(</span><span class="s">&#39;line 1</span><span class="se">\n</span><span class="s">line 2&#39;</span><span class="p">),</span>
                          <span class="s">&#39;1. line 1</span><span class="se">\n</span><span class="s">2. line 2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linenumbers</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;x&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)),</span>
                          <span class="s">&#39;01. x</span><span class="se">\n</span><span class="s">02. x</span><span class="se">\n</span><span class="s">03. x</span><span class="se">\n</span><span class="s">04. x</span><span class="se">\n</span><span class="s">05. x</span><span class="se">\n</span><span class="s">06. x</span><span class="se">\n</span><span class="s">07. &#39;</span>\
                          <span class="s">&#39;x</span><span class="se">\n</span><span class="s">08. x</span><span class="se">\n</span><span class="s">09. x</span><span class="se">\n</span><span class="s">10. x&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_lower</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lower</span><span class="p">(</span><span class="s">&#39;TEST&#39;</span><span class="p">),</span> <span class="s">&#39;test&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>uppercase E umlaut</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lower</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xcb</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\xeb</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_make_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">make_list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">make_list</span><span class="p">(</span><span class="mi">1234</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">,</span> <span class="s">&#39;4&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_slugify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slugify</span><span class="p">(</span><span class="s">&#39; Jack &amp; Jill like numbers 1,2,3 and 4 and&#39;</span>\
            <span class="s">&#39; silly characters ?%.$!/&#39;</span><span class="p">),</span>
            <span class="s">&#39;jack-jill-like-numbers-123-and-4-and-silly-characters&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slugify</span><span class="p">(</span><span class="s">&quot;Un </span><span class="se">\xe9</span><span class="s">l</span><span class="se">\xe9</span><span class="s">phant </span><span class="se">\xe0</span><span class="s"> l&#39;or</span><span class="se">\xe9</span><span class="s">e du bois&quot;</span><span class="p">),</span>
                          <span class="s">&#39;un-elephant-a-loree-du-bois&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_stringformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">stringformat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;03d&#39;</span><span class="p">),</span> <span class="s">&#39;001&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">stringformat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;a nice title, isn</span><span class="se">\&#39;</span><span class="s">t it?&#39;</span><span class="p">),</span>
                          <span class="s">&quot;A Nice Title, Isn&#39;t It?&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;discoth</span><span class="se">\xe8</span><span class="s">que&#39;</span><span class="p">),</span> <span class="s">&#39;Discoth</span><span class="se">\xe8</span><span class="s">que&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_truncatewords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">truncatewords</span><span class="p">(</span><span class="s">&#39;A sentence with a few words in it&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;A ...&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">truncatewords</span><span class="p">(</span><span class="s">&#39;A sentence with a few words in it&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="s">&#39;A sentence with a few ...&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">truncatewords</span><span class="p">(</span><span class="s">&#39;A sentence with a few words in it&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
            <span class="s">&#39;A sentence with a few words in it&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">truncatewords</span><span class="p">(</span><span class="s">&#39;A sentence with a few words in it&#39;</span><span class="p">,</span>
            <span class="s">&#39;not a number&#39;</span><span class="p">),</span> <span class="s">&#39;A sentence with a few words in it&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_truncatewords_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">truncatewords_html</span><span class="p">(</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - three &lt;br&gt;four&lt;/a&gt; five&lt;/p&gt;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">truncatewords_html</span><span class="p">(</span><span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - &#39;</span>\
            <span class="s">&#39;three &lt;br&gt;four&lt;/a&gt; five&lt;/p&gt;&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two ...&lt;/a&gt;&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">truncatewords_html</span><span class="p">(</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - three &lt;br&gt;four&lt;/a&gt; five&lt;/p&gt;&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - three &lt;br&gt;four ...&lt;/a&gt;&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">truncatewords_html</span><span class="p">(</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - three &lt;br&gt;four&lt;/a&gt; five&lt;/p&gt;&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - three &lt;br&gt;four&lt;/a&gt; five&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">truncatewords_html</span><span class="p">(</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - three &lt;br&gt;four&lt;/a&gt; five&lt;/p&gt;&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
            <span class="s">&#39;&lt;p&gt;one &lt;a href=&quot;#&quot;&gt;two - three &lt;br&gt;four&lt;/a&gt; five&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">truncatewords_html</span><span class="p">(</span>
            <span class="s">&#39;</span><span class="se">\xc5</span><span class="s">ngstr</span><span class="se">\xf6</span><span class="s">m was here&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\xc5</span><span class="s">ngstr</span><span class="se">\xf6</span><span class="s">m ...&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">upper</span><span class="p">(</span><span class="s">&#39;Mixed case input&#39;</span><span class="p">),</span> <span class="s">&#39;MIXED CASE INPUT&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>lowercase e umlaut</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">upper</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xeb</span><span class="s">&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="se">\xcb</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_urlencode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlencode</span><span class="p">(</span><span class="s">&#39;fran</span><span class="se">\xe7</span><span class="s">ois &amp; jill&#39;</span><span class="p">),</span>
                          <span class="s">&#39;fran%C3%A7ois</span><span class="si">%20%</span><span class="s">26%20jill&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlencode</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;1&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_iriencode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">iriencode</span><span class="p">(</span><span class="s">&#39;S</span><span class="se">\xf8</span><span class="s">r-Tr</span><span class="se">\xf8</span><span class="s">ndelag&#39;</span><span class="p">),</span>
                          <span class="s">&#39;S%C3%B8r-Tr%C3%B8ndelag&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">iriencode</span><span class="p">(</span><span class="n">urlencode</span><span class="p">(</span><span class="s">&#39;fran</span><span class="se">\xe7</span><span class="s">ois &amp; jill&#39;</span><span class="p">)),</span>
                          <span class="s">&#39;fran%C3%A7ois</span><span class="si">%20%</span><span class="s">26%20jill&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_urlizetrunc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlizetrunc</span><span class="p">(</span><span class="s">&#39;http://short.com/&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="s">&#39;&lt;a href=&#39;</span>\
            <span class="s">&#39;&quot;http://short.com/&quot; rel=&quot;nofollow&quot;&gt;http://short.com/&lt;/a&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlizetrunc</span><span class="p">(</span><span class="s">&#39;http://www.google.co.uk/search?hl=en&#39;</span>\
            <span class="s">&#39;&amp;q=some+long+url&amp;btnG=Search&amp;meta=&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="s">&#39;&lt;a href=&quot;http://&#39;</span>\
            <span class="s">&#39;www.google.co.uk/search?hl=en&amp;q=some+long+url&amp;btnG=Search&amp;&#39;</span>\
            <span class="s">&#39;meta=&quot; rel=&quot;nofollow&quot;&gt;http://www.google...&lt;/a&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlizetrunc</span><span class="p">(</span><span class="s">&#39;http://www.google.co.uk/search?hl=en&#39;</span>\
            <span class="s">&#39;&amp;q=some+long+url&amp;btnG=Search&amp;meta=&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="s">&#39;&lt;a href=&quot;http://&#39;</span>\
            <span class="s">&#39;www.google.co.uk/search?hl=en&amp;q=some+long+url&amp;btnG=Search&#39;</span>\
            <span class="s">&#39;&amp;meta=&quot; rel=&quot;nofollow&quot;&gt;http://www.google...&lt;/a&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>Check truncating of URIs which are the exact length</p></td><td class="code"><div class="highlight"><pre>        <span class="n">uri</span> <span class="o">=</span> <span class="s">&#39;http://31characteruri.com/test/&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">uri</span><span class="p">),</span> <span class="mi">31</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlizetrunc</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://31characteruri.com/test/&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>\
            <span class="s">&#39;http://31characteruri.com/test/&lt;/a&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlizetrunc</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://31characteruri.com/test/&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>\
            <span class="s">&#39;http://31characteruri.com/t...&lt;/a&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlizetrunc</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://31characteruri.com/test/&quot;&#39;</span>\
            <span class="s">&#39; rel=&quot;nofollow&quot;&gt;...&lt;/a&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_urlize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>Check normal urlize</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://google.com&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://google.com&quot; rel=&quot;nofollow&quot;&gt;http://google.com&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://google.com/&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://google.com/&quot; rel=&quot;nofollow&quot;&gt;http://google.com/&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;www.google.com&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://www.google.com&quot; rel=&quot;nofollow&quot;&gt;www.google.com&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;djangoproject.org&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://djangoproject.org&quot; rel=&quot;nofollow&quot;&gt;djangoproject.org&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;info@djangoproject.org&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;mailto:info@djangoproject.org&quot;&gt;info@djangoproject.org&lt;/a&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>Check urlize with https addresses</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;https://google.com&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;https://google.com&quot; rel=&quot;nofollow&quot;&gt;https://google.com&lt;/a&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>Check urlize doesn't overquote already quoted urls - see #9655</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://hi.baidu.com/%D6%D8%D0%C2%BF&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://hi.baidu.com/%D6%D8%D0%C2%BF&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>
            <span class="s">&#39;http://hi.baidu.com/%D6%D8%D0%C2%BF&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;www.mystore.com/30%OffCoupons!&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://www.mystore.com/30%25OffCoupons!&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>
            <span class="s">&#39;www.mystore.com/30%OffCoupons!&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://en.wikipedia.org/wiki/Caf%C3%A9&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://en.wikipedia.org/wiki/Caf%C3%A9&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>
            <span class="s">&#39;http://en.wikipedia.org/wiki/Caf%C3%A9&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://en.wikipedia.org/wiki/Café&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://en.wikipedia.org/wiki/Caf%C3%A9&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>
            <span class="s">&#39;http://en.wikipedia.org/wiki/Café&lt;/a&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>Check urlize keeps balanced parentheses - see #11911</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://en.wikipedia.org/wiki/Django_(web_framework)&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://en.wikipedia.org/wiki/Django_(web_framework)&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>
            <span class="s">&#39;http://en.wikipedia.org/wiki/Django_(web_framework)&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;(see http://en.wikipedia.org/wiki/Django_(web_framework))&#39;</span><span class="p">),</span>
            <span class="s">&#39;(see &lt;a href=&quot;http://en.wikipedia.org/wiki/Django_(web_framework)&quot; rel=&quot;nofollow&quot;&gt;&#39;</span>
            <span class="s">&#39;http://en.wikipedia.org/wiki/Django_(web_framework)&lt;/a&gt;)&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>Check urlize adds nofollow properly - see #12183</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;foo@bar.com or www.bar.com&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;mailto:foo@bar.com&quot;&gt;foo@bar.com&lt;/a&gt; or &#39;</span>
            <span class="s">&#39;&lt;a href=&quot;http://www.bar.com&quot; rel=&quot;nofollow&quot;&gt;www.bar.com&lt;/a&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>Check urlize handles IDN correctly - see #13704</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://c✶.ws&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://xn--c-lgq.ws&quot; rel=&quot;nofollow&quot;&gt;http://c✶.ws&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;www.c✶.ws&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://www.xn--c-lgq.ws&quot; rel=&quot;nofollow&quot;&gt;www.c✶.ws&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;c✶.org&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://xn--c-lgq.org&quot; rel=&quot;nofollow&quot;&gt;c✶.org&lt;/a&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;info@c✶.org&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;mailto:info@xn--c-lgq.org&quot;&gt;info@c✶.org&lt;/a&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>Check urlize doesn't highlight malformed URIs - see #16395</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http:///www.google.com&#39;</span><span class="p">),</span>
           <span class="s">&#39;http:///www.google.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://.google.com&#39;</span><span class="p">),</span>
            <span class="s">&#39;http://.google.com&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;http://@foo.com&#39;</span><span class="p">),</span>
            <span class="s">&#39;http://@foo.com&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>Check urlize accepts more TLDs - see #16656</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;usa.gov&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;http://usa.gov&quot; rel=&quot;nofollow&quot;&gt;usa.gov&lt;/a&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>Check urlize don't crash on invalid email with dot-starting domain - see #17592</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;email@.stream.ru&#39;</span><span class="p">),</span>
            <span class="s">&#39;email@.stream.ru&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>Check urlize accepts uppercased URL schemes - see #18071</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="s">&#39;HTTPS://github.com/&#39;</span><span class="p">),</span>
            <span class="s">&#39;&lt;a href=&quot;https://github.com/&quot; rel=&quot;nofollow&quot;&gt;HTTPS://github.com/&lt;/a&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_wordcount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordcount</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordcount</span><span class="p">(</span><span class="s">&#39;oneword&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordcount</span><span class="p">(</span><span class="s">&#39;lots of words&#39;</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordwrap</span><span class="p">(</span><span class="s">&#39;this is a long paragraph of text that &#39;</span>\
            <span class="s">&#39;really needs to be wrapped I</span><span class="se">\&#39;</span><span class="s">m afraid&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
            <span class="s">&quot;this is a long</span><span class="se">\n</span><span class="s">paragraph of</span><span class="se">\n</span><span class="s">text that</span><span class="se">\n</span><span class="s">really needs</span><span class="se">\n</span><span class="s">to be &quot;</span>\
            <span class="s">&quot;wrapped</span><span class="se">\n</span><span class="s">I&#39;m afraid&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordwrap</span><span class="p">(</span><span class="s">&#39;this is a short paragraph of text.</span><span class="se">\n</span><span class="s">  &#39;</span>\
            <span class="s">&#39;But this line should be indented&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
            <span class="s">&#39;this is a</span><span class="se">\n</span><span class="s">short</span><span class="se">\n</span><span class="s">paragraph of</span><span class="se">\n</span><span class="s">text.</span><span class="se">\n</span><span class="s">  But this</span><span class="se">\n</span><span class="s">line &#39;</span>\
            <span class="s">&#39;should be</span><span class="se">\n</span><span class="s">indented&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordwrap</span><span class="p">(</span><span class="s">&#39;this is a short paragraph of text.</span><span class="se">\n</span><span class="s">  &#39;</span>\
            <span class="s">&#39;But this line should be indented&#39;</span><span class="p">,</span><span class="mi">15</span><span class="p">),</span> <span class="s">&#39;this is a short</span><span class="se">\n</span><span class="s">&#39;</span>\
            <span class="s">&#39;paragraph of</span><span class="se">\n</span><span class="s">text.</span><span class="se">\n</span><span class="s">  But this line</span><span class="se">\n</span><span class="s">should be</span><span class="se">\n</span><span class="s">indented&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_rjust</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ljust</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s">&#39;test      &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ljust</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s">&#39;test&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rjust</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s">&#39;      test&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rjust</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s">&#39;test&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">center</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="s">&#39; test &#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_cut</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cut</span><span class="p">(</span><span class="s">&#39;a string to be mangled&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span>
                          <span class="s">&#39; string to be mngled&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cut</span><span class="p">(</span><span class="s">&#39;a string to be mangled&#39;</span><span class="p">,</span> <span class="s">&#39;ng&#39;</span><span class="p">),</span>
                          <span class="s">&#39;a stri to be maled&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cut</span><span class="p">(</span><span class="s">&#39;a string to be mangled&#39;</span><span class="p">,</span> <span class="s">&#39;strings&#39;</span><span class="p">),</span>
                          <span class="s">&#39;a string to be mangled&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_force_escape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">escaped</span> <span class="o">=</span> <span class="n">force_escape</span><span class="p">(</span><span class="s">&#39;&lt;some html &amp; special characters &gt; here&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">escaped</span><span class="p">,</span> <span class="s">&#39;&amp;lt;some html &amp;amp; special characters &amp;gt; here&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">escaped</span><span class="p">,</span> <span class="n">SafeData</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">force_escape</span><span class="p">(</span><span class="s">&#39;&lt;some html &amp; special characters &gt; here ĐÅ€£&#39;</span><span class="p">),</span>
            <span class="s">&#39;&amp;lt;some html &amp;amp; special characters &amp;gt; here&#39;</span>\
            <span class="s">&#39; </span><span class="se">\u0110\xc5\u20ac\xa3</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_linebreaks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaks_filter</span><span class="p">(</span><span class="s">&#39;line 1&#39;</span><span class="p">),</span> <span class="s">&#39;&lt;p&gt;line 1&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaks_filter</span><span class="p">(</span><span class="s">&#39;line 1</span><span class="se">\n</span><span class="s">line 2&#39;</span><span class="p">),</span>
                          <span class="s">&#39;&lt;p&gt;line 1&lt;br /&gt;line 2&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaks_filter</span><span class="p">(</span><span class="s">&#39;line 1</span><span class="se">\r</span><span class="s">line 2&#39;</span><span class="p">),</span>
                          <span class="s">&#39;&lt;p&gt;line 1&lt;br /&gt;line 2&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaks_filter</span><span class="p">(</span><span class="s">&#39;line 1</span><span class="se">\r\n</span><span class="s">line 2&#39;</span><span class="p">),</span>
                          <span class="s">&#39;&lt;p&gt;line 1&lt;br /&gt;line 2&lt;/p&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_linebreaksbr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaksbr</span><span class="p">(</span><span class="s">&#39;line 1</span><span class="se">\n</span><span class="s">line 2&#39;</span><span class="p">),</span>
                          <span class="s">&#39;line 1&lt;br /&gt;line 2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaksbr</span><span class="p">(</span><span class="s">&#39;line 1</span><span class="se">\r</span><span class="s">line 2&#39;</span><span class="p">),</span>
                          <span class="s">&#39;line 1&lt;br /&gt;line 2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaksbr</span><span class="p">(</span><span class="s">&#39;line 1</span><span class="se">\r\n</span><span class="s">line 2&#39;</span><span class="p">),</span>
                          <span class="s">&#39;line 1&lt;br /&gt;line 2&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_removetags</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">removetags</span><span class="p">(</span><span class="s">&#39;some &lt;b&gt;html&lt;/b&gt; with &lt;script&gt;alert&#39;</span>\
            <span class="s">&#39;(&quot;You smell&quot;)&lt;/script&gt; disallowed &lt;img /&gt; tags&#39;</span><span class="p">,</span> <span class="s">&#39;script img&#39;</span><span class="p">),</span>
            <span class="s">&#39;some &lt;b&gt;html&lt;/b&gt; with alert(&quot;You smell&quot;) disallowed  tags&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">striptags</span><span class="p">(</span><span class="s">&#39;some &lt;b&gt;html&lt;/b&gt; with &lt;script&gt;alert&#39;</span>\
            <span class="s">&#39;(&quot;You smell&quot;)&lt;/script&gt; disallowed &lt;img /&gt; tags&#39;</span><span class="p">),</span>
            <span class="s">&#39;some html with alert(&quot;You smell&quot;) disallowed  tags&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_dictsort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sorted_dicts</span> <span class="o">=</span> <span class="n">dictsort</span><span class="p">([{</span><span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Barbara-Ann&#39;</span><span class="p">},</span>
                                 <span class="p">{</span><span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">63</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Ra Ra Rasputin&#39;</span><span class="p">},</span>
                                 <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Jonny B Goode&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">}],</span> <span class="s">&#39;age&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="k">for</span> <span class="nb">dict</span> <span class="ow">in</span> <span class="n">sorted_dicts</span><span class="p">],</span>
            <span class="p">[[(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;Jonny B Goode&#39;</span><span class="p">)],</span>
             <span class="p">[(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;Barbara-Ann&#39;</span><span class="p">)],</span>
             <span class="p">[(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">63</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;Ra Ra Rasputin&#39;</span><span class="p">)]])</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><p>If it gets passed a list of something else different from
dictionaries it should fail silently</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsort</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsort</span><span class="p">(</span><span class="s">&#39;Hello!&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsort</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsort</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_dictsortreversed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sorted_dicts</span> <span class="o">=</span> <span class="n">dictsortreversed</span><span class="p">([{</span><span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Barbara-Ann&#39;</span><span class="p">},</span>
                                         <span class="p">{</span><span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">63</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Ra Ra Rasputin&#39;</span><span class="p">},</span>
                                         <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Jonny B Goode&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">}],</span>
                                        <span class="s">&#39;age&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">([</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="k">for</span> <span class="nb">dict</span> <span class="ow">in</span> <span class="n">sorted_dicts</span><span class="p">],</span>
            <span class="p">[[(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">63</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;Ra Ra Rasputin&#39;</span><span class="p">)],</span>
             <span class="p">[(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;Barbara-Ann&#39;</span><span class="p">)],</span>
             <span class="p">[(</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;Jonny B Goode&#39;</span><span class="p">)]])</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>If it gets passed a list of something else different from
dictionaries it should fail silently</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsortreversed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsortreversed</span><span class="p">(</span><span class="s">&#39;Hello!&#39;</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsortreversed</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">dictsortreversed</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;age&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_first</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">first</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">first</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">first</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">),</span> <span class="s">&#39;t&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_join</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">join</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="s">&#39;glue&#39;</span><span class="p">),</span> <span class="s">&#39;0glue1glue2&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="s">&#39;1234&#39;</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">length</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">length_is</span><span class="p">([],</span> <span class="mi">0</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">length_is</span><span class="p">([],</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">length_is</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">length_is</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slice_filter</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slice_filter</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">),</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slice_filter</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">,</span> <span class="s">&#39;-1&#39;</span><span class="p">),</span> <span class="s">&#39;abcdef&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slice_filter</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">,</span> <span class="s">&#39;1:2&#39;</span><span class="p">),</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slice_filter</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">,</span> <span class="s">&#39;1:3&#39;</span><span class="p">),</span> <span class="s">&#39;bc&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slice_filter</span><span class="p">(</span><span class="s">&#39;abcdefg&#39;</span><span class="p">,</span> <span class="s">&#39;0::2&#39;</span><span class="p">),</span> <span class="s">&#39;aceg&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_unordered_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;item 1&#39;</span><span class="p">,</span> <span class="s">&#39;item 2&#39;</span><span class="p">]),</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;item 1&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;li&gt;item 2&lt;/li&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;item 1&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;item 1.1&#39;</span><span class="p">]]),</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;item 1</span><span class="se">\n\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;item 1.1&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t</span><span class="s">&lt;/li&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;item 1&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;item 1.1&#39;</span><span class="p">,</span> <span class="s">&#39;item1.2&#39;</span><span class="p">],</span> <span class="s">&#39;item 2&#39;</span><span class="p">]),</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;item 1</span><span class="se">\n\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;item 1.1&lt;/li&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;item1.2&#39;</span>\
            <span class="s">&#39;&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t</span><span class="s">&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;li&gt;item 2&lt;/li&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;item 1&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;item 1.1&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;item 1.1.1&#39;</span><span class="p">,</span>
                                                      <span class="p">[</span><span class="s">&#39;item 1.1.1.1&#39;</span><span class="p">]]]]),</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;item 1</span><span class="se">\n\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;item 1.1</span><span class="se">\n\t\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t\t</span><span class="s">&lt;li&gt;&#39;</span>\
            <span class="s">&#39;item 1.1.1</span><span class="se">\n\t\t\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t\t\t</span><span class="s">&lt;li&gt;item 1.1.1.1&lt;/li&gt;</span><span class="se">\n\t\t\t</span><span class="s">&#39;</span>\
            <span class="s">&#39;&lt;/ul&gt;</span><span class="se">\n\t\t\t</span><span class="s">&lt;/li&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t</span><span class="s">&lt;/li&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">(</span>
            <span class="p">[</span><span class="s">&#39;States&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;Kansas&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;Lawrence&#39;</span><span class="p">,</span> <span class="s">&#39;Topeka&#39;</span><span class="p">],</span> <span class="s">&#39;Illinois&#39;</span><span class="p">]]),</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;States</span><span class="se">\n\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;Kansas</span><span class="se">\n\t\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t\t</span><span class="s">&lt;li&gt;&#39;</span>\
            <span class="s">&#39;Lawrence&lt;/li&gt;</span><span class="se">\n\t\t\t</span><span class="s">&lt;li&gt;Topeka&lt;/li&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;/li&gt;&#39;</span>\
            <span class="s">&#39;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;Illinois&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t</span><span class="s">&lt;/li&gt;&#39;</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">ULItem</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
            <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="s">&#39;ulitem-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">ULItem</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">ULItem</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">]),</span>
                          <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;ulitem-a&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;li&gt;ulitem-b&lt;/li&gt;&#39;</span><span class="p">)</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>Old format for unordered lists should still work</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;item 1&#39;</span><span class="p">,</span> <span class="p">[]]),</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;item 1&lt;/li&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;item 1&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;item 1.1&#39;</span><span class="p">,</span> <span class="p">[]]]]),</span>
            <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;item 1</span><span class="se">\n\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;item 1.1&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t</span><span class="s">&lt;/li&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;item 1&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;item 1.1&#39;</span><span class="p">,</span> <span class="p">[]],</span>
            <span class="p">[</span><span class="s">&#39;item 1.2&#39;</span><span class="p">,</span> <span class="p">[]]]]),</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;item 1</span><span class="se">\n\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;item 1.1&#39;</span>\
            <span class="s">&#39;&lt;/li&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;item 1.2&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t</span><span class="s">&lt;/li&gt;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">unordered_list</span><span class="p">([</span><span class="s">&#39;States&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;Kansas&#39;</span><span class="p">,</span> <span class="p">[[</span><span class="s">&#39;Lawrence&#39;</span><span class="p">,</span>
            <span class="p">[]],</span> <span class="p">[</span><span class="s">&#39;Topeka&#39;</span><span class="p">,</span> <span class="p">[]]]],</span> <span class="p">[</span><span class="s">&#39;Illinois&#39;</span><span class="p">,</span> <span class="p">[]]]]),</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&lt;li&gt;States</span><span class="se">\n\t</span><span class="s">&#39;</span>\
            <span class="s">&#39;&lt;ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;Kansas</span><span class="se">\n\t\t</span><span class="s">&lt;ul&gt;</span><span class="se">\n\t\t\t</span><span class="s">&lt;li&gt;Lawrence&lt;/li&gt;&#39;</span>\
            <span class="s">&#39;</span><span class="se">\n\t\t\t</span><span class="s">&lt;li&gt;Topeka&lt;/li&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;/li&gt;</span><span class="se">\n\t\t</span><span class="s">&lt;li&gt;&#39;</span>\
            <span class="s">&#39;Illinois&lt;/li&gt;</span><span class="se">\n\t</span><span class="s">&lt;/ul&gt;</span><span class="se">\n\t</span><span class="s">&lt;/li&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_get_digit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">get_digit</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">get_digit</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">get_digit</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">get_digit</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">get_digit</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">get_digit</span><span class="p">(</span><span class="s">&#39;xyz&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s">&#39;xyz&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-21"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-21">&#182;</a></div><p>real testing of date() is in dateformat.py</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span> <span class="s">&quot;d F Y&quot;</span><span class="p">),</span>
                          <span class="s">&#39;29 December 2005&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span> <span class="s">r&#39;jS \o\f F&#39;</span><span class="p">),</span>
                          <span class="s">&#39;29th of December&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-22"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-22">&#182;</a></div><p>real testing of time() is done in dateformat.py</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span> <span class="s">&quot;h&quot;</span><span class="p">),</span> <span class="s">&#39;01&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;h&quot;</span><span class="p">),</span> <span class="s">&#39;12&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_timesince</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-23"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-23">&#182;</a></div><p>real testing is done in timesince.py, where we can provide our own 'now'</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">timesince_filter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
            <span class="s">&#39;1 day&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">timesince_filter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span>
                             <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">)),</span>
            <span class="s">&#39;1 day&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_timeuntil</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">timeuntil_filter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
            <span class="s">&#39;1 day&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">timeuntil_filter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                             <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">29</span><span class="p">)),</span>
            <span class="s">&#39;1 day&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">default</span><span class="p">(</span><span class="s">&quot;val&quot;</span><span class="p">,</span> <span class="s">&quot;default&quot;</span><span class="p">),</span> <span class="s">&#39;val&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">default</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;default&quot;</span><span class="p">),</span> <span class="s">&#39;default&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">default</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&quot;default&quot;</span><span class="p">),</span> <span class="s">&#39;default&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_if_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">default_if_none</span><span class="p">(</span><span class="s">&quot;val&quot;</span><span class="p">,</span> <span class="s">&quot;default&quot;</span><span class="p">),</span> <span class="s">&#39;val&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">default_if_none</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;default&quot;</span><span class="p">),</span> <span class="s">&#39;default&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">default_if_none</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&quot;default&quot;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_divisibleby</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">divisibleby</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">divisibleby</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_yesno</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">yesno</span><span class="p">(</span><span class="bp">True</span><span class="p">),</span> <span class="s">&#39;yes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">yesno</span><span class="p">(</span><span class="bp">False</span><span class="p">),</span> <span class="s">&#39;no&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">yesno</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span> <span class="s">&#39;maybe&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">yesno</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="s">&#39;certainly,get out of town,perhaps&#39;</span><span class="p">),</span>
                          <span class="s">&#39;certainly&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">yesno</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="s">&#39;certainly,get out of town,perhaps&#39;</span><span class="p">),</span>
                          <span class="s">&#39;get out of town&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">yesno</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;certainly,get out of town,perhaps&#39;</span><span class="p">),</span>
                          <span class="s">&#39;perhaps&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">yesno</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;certainly,get out of town&#39;</span><span class="p">),</span>
                          <span class="s">&#39;get out of town&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_filesizeformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1023</span><span class="p">),</span> <span class="s">&#39;1023 bytes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1.0 KB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;10.0 KB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;1024.0 KB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1.0 MB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">50</span><span class="p">),</span> <span class="s">&#39;50.0 MB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;1024.0 MB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1.0 GB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1.0 TB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1.0 PB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">2000</span><span class="p">),</span>
                          <span class="s">&#39;2000.0 PB&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&#39;0 bytes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">),</span> <span class="s">&#39;0 bytes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\N{GREEK SMALL LETTER ALPHA}</span><span class="s">&quot;</span><span class="p">),</span>
                          <span class="s">&#39;0 bytes&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_localized_filesizeformat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">(</span><span class="n">USE_L10N</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">translation</span><span class="o">.</span><span class="n">override</span><span class="p">(</span><span class="s">&#39;de&#39;</span><span class="p">,</span> <span class="n">deactivate</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1023</span><span class="p">),</span> <span class="s">&#39;1023 Bytes&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1,0 KB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;10,0 KB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;1024,0 KB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1,0 MB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">50</span><span class="p">),</span> <span class="s">&#39;50,0 MB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;1024,0 MB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1,0 GB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span> <span class="s">&#39;1,0 TB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">),</span>
                                  <span class="s">&#39;1,0 PB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">2000</span><span class="p">),</span>
                                  <span class="s">&#39;2000,0 PB&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="s">&#39;0 Bytes&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">),</span> <span class="s">&#39;0 Bytes&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">filesizeformat</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\N{GREEK SMALL LETTER ALPHA}</span><span class="s">&quot;</span><span class="p">),</span>
                                  <span class="s">&#39;0 Bytes&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_pluralize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">([]),</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;es&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;es&#39;</span><span class="p">),</span> <span class="s">&#39;es&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s">&#39;es&#39;</span><span class="p">),</span> <span class="s">&#39;es&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;y,ies&#39;</span><span class="p">),</span> <span class="s">&#39;y&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;y,ies&#39;</span><span class="p">),</span> <span class="s">&#39;ies&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s">&#39;y,ies&#39;</span><span class="p">),</span> <span class="s">&#39;ies&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">pluralize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;y,ies,error&#39;</span><span class="p">),</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_phone2numeric</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">phone2numeric_filter</span><span class="p">(</span><span class="s">&#39;0800 flowers&#39;</span><span class="p">),</span> <span class="s">&#39;0800 3569377&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_non_string_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div></td></tr>


<tr id="section-24"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-24">&#182;</a></div><p>Filters shouldn't break if passed non-strings</p></td><td class="code"><div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">addslashes</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linenumbers</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;1. 123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">lower</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">make_list</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="p">[</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;3&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">slugify</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">title</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">truncatewords</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">upper</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlencode</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlize</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">urlizetrunc</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordcount</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">wordwrap</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ljust</span><span class="p">(</span><span class="s">&#39;123&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s">&#39;123 &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">rjust</span><span class="p">(</span><span class="s">&#39;123&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s">&#39; 123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">center</span><span class="p">(</span><span class="s">&#39;123&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="s">&#39; 123 &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">center</span><span class="p">(</span><span class="s">&#39;123&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="s">&#39; 123  &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cut</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="s">&#39;2&#39;</span><span class="p">),</span> <span class="s">&#39;13&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">escape</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaks_filter</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;&lt;p&gt;123&lt;/p&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linebreaksbr</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">removetags</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">striptags</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="s">&#39;123&#39;</span><span class="p">)</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/django",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
